import{b as OI,c as Eu,d as FI,e as LI,f as VI,g as bf,h as jI,i as ha,j as Cf,k as Iu,l as UI,m as BI,n as Sf,o as Ne,p as ri,q as gn,r as _u,s as fa,t as $I,u as qI,v as lr,w as St}from"./chunk-FGK32RNH.js";import{a as W,b as Re,g as Tf,h as N}from"./chunk-DEPBX7UX.js";function X(n){return typeof n=="function"}function lo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Du=lo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ii(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Le=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(o){e=o instanceof Du?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{zI(o)}catch(s){e=e??[],s instanceof Du?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Du(e)}}add(e){var t;if(e&&e!==this)if(this.closed)zI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ii(t,e)}remove(e){let{_finalizers:t}=this;t&&ii(t,e),e instanceof n&&e._removeParent(this)}};Le.EMPTY=(()=>{let n=new Le;return n.closed=!0,n})();var Af=Le.EMPTY;function Tu(n){return n instanceof Le||n&&"closed"in n&&X(n.remove)&&X(n.add)&&X(n.unsubscribe)}function zI(n){X(n)?n():n.unsubscribe()}var bu=class extends Le{constructor(e,t){super()}schedule(e,t=0){return this}};var pa={setInterval(n,e,...t){let{delegate:r}=pa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=pa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ho=class extends bu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return pa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&pa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ii(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ga={now(){return(ga.delegate||Date).now()},delegate:void 0};var fo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};fo.now=ga.now;var po=class extends fo{constructor(e,t=fo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var mn=new po(ho),xf=mn;var en={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var go={setTimeout(n,e,...t){let{delegate:r}=go;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=go;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Cu(n){go.setTimeout(()=>{let{onUnhandledError:e}=en;if(e)e(n);else throw n})}function ma(){}var HI=Mf("C",void 0,void 0);function GI(n){return Mf("E",void 0,n)}function WI(n){return Mf("N",n,void 0)}function Mf(n,e,t){return{kind:n,value:e,error:t}}var oi=null;function mo(n){if(en.useDeprecatedSynchronousErrorHandling){let e=!oi;if(e&&(oi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=oi;if(oi=null,t)throw r}}else n()}function KI(n){en.useDeprecatedSynchronousErrorHandling&&oi&&(oi.errorThrown=!0,oi.error=n)}var si=class extends Le{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Tu(e)&&e.add(this)):this.destination=QM}static create(e,t,r){return new jn(e,t,r)}next(e){this.isStopped?Nf(WI(e),this):this._next(e)}error(e){this.isStopped?Nf(GI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Nf(HI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},WM=Function.prototype.bind;function Rf(n,e){return WM.call(n,e)}var Pf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Su(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Su(r)}else Su(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Su(t)}}},jn=class extends si{constructor(e,t,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&en.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Rf(e.next,o),error:e.error&&Rf(e.error,o),complete:e.complete&&Rf(e.complete,o)}):i=e}this.destination=new Pf(i)}};function Su(n){en.useDeprecatedSynchronousErrorHandling?KI(n):Cu(n)}function KM(n){throw n}function Nf(n,e){let{onStoppedNotification:t}=en;t&&go.setTimeout(()=>t(n,e))}var QM={closed:!0,next:ma,error:KM,complete:ma};var yo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function yt(n){return n}function kf(...n){return Of(n)}function Of(n){return n.length===0?yt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var re=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=ZM(t)?t:new jn(t,r,i);return mo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=QI(r),new r((i,o)=>{let s=new jn({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[yo](){return this}pipe(...t){return Of(t)(this)}toPromise(t){return t=QI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function QI(n){var e;return(e=n??en.Promise)!==null&&e!==void 0?e:Promise}function YM(n){return n&&X(n.next)&&X(n.error)&&X(n.complete)}function ZM(n){return n&&n instanceof si||YM(n)&&Tu(n)}function Au(n){return n&&X(n.schedule)}function YI(n){return n instanceof Date&&!isNaN(n)}function ZI(n=0,e,t=xf){let r=-1;return e!=null&&(Au(e)?t=e:r=e),new re(i=>{let o=YI(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function JM(n=0,e=mn){return n<0&&(n=0),ZI(n,n,e)}var vt=new re(n=>n.complete());function Ff(n){return X(n?.lift)}function oe(n){return e=>{if(Ff(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(n,e,t,r,i){return new Lf(n,e,t,r,i)}var Lf=class extends si{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function yn(n){return n<=0?()=>vt:oe((e,t)=>{let r=0;e.subscribe(se(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function vo(){return oe((n,e)=>{let t=null;n._refCount++;let r=se(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var wo=class extends re{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ff(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Le;let t=this.getSubject();e.add(this.source.subscribe(se(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Le.EMPTY)}return e}refCount(){return vo()(this)}};var JI=lo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class n extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new xu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new JI}next(t){mo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){mo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){mo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Af:(this.currentObservers=null,o.push(t),new Le(()=>{this.currentObservers=null,ii(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new re;return t.source=this,t}}return n.create=(e,t)=>new xu(e,t),n})(),xu=class extends Ue{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Af}};var rt=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Mu=class extends Ue{constructor(e=1/0,t=1/0,r=ga){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Ru=class extends ho{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Nu=class extends po{};var Vf=new Nu(Ru);function jf(n){return n[n.length-1]}function Pu(n){return X(jf(n))?n.pop():void 0}function vn(n){return Au(jf(n))?n.pop():void 0}function XI(n,e){return typeof jf(n)=="number"?n.pop():e}var Eo=n=>n&&typeof n.length=="number"&&typeof n!="function";function ku(n){return X(n?.then)}function Ou(n){return X(n[yo])}function Fu(n){return Symbol.asyncIterator&&X(n?.[Symbol.asyncIterator])}function Lu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function XM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Vu=XM();function ju(n){return X(n?.[Vu])}function Uu(n){return FI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Eu(t.read());if(i)return yield Eu(void 0);yield yield Eu(r)}}finally{t.releaseLock()}})}function Bu(n){return X(n?.getReader)}function Te(n){if(n instanceof re)return n;if(n!=null){if(Ou(n))return eR(n);if(Eo(n))return tR(n);if(ku(n))return nR(n);if(Fu(n))return e_(n);if(ju(n))return rR(n);if(Bu(n))return iR(n)}throw Lu(n)}function eR(n){return new re(e=>{let t=n[yo]();if(X(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function tR(n){return new re(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function nR(n){return new re(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Cu)})}function rR(n){return new re(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function e_(n){return new re(e=>{oR(n,e).catch(t=>e.error(t))})}function iR(n){return e_(Uu(n))}function oR(n,e){var t,r,i,o;return OI(this,void 0,void 0,function*(){try{for(t=LI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function At(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function jt(n,e=0){return oe((t,r)=>{t.subscribe(se(r,i=>At(r,n,()=>r.next(i),e),()=>At(r,n,()=>r.complete(),e),i=>At(r,n,()=>r.error(i),e)))})}function tn(n,e=0){return oe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function t_(n,e){return Te(n).pipe(tn(e),jt(e))}function n_(n,e){return Te(n).pipe(tn(e),jt(e))}function r_(n,e){return new re(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function i_(n,e){return new re(t=>{let r;return At(t,e,()=>{r=n[Vu](),At(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function $u(n,e){if(!n)throw new Error("Iterable cannot be null");return new re(t=>{At(t,e,()=>{let r=n[Symbol.asyncIterator]();At(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function o_(n,e){return $u(Uu(n),e)}function s_(n,e){if(n!=null){if(Ou(n))return t_(n,e);if(Eo(n))return r_(n,e);if(ku(n))return n_(n,e);if(Fu(n))return $u(n,e);if(ju(n))return i_(n,e);if(Bu(n))return o_(n,e)}throw Lu(n)}function we(n,e){return e?s_(n,e):Te(n)}function ee(...n){let e=vn(n);return we(n,e)}function Io(n,e){let t=X(n)?n:()=>n,r=i=>i.error(t());return new re(e?i=>e.schedule(r,0,i):r)}function Uf(n){return!!n&&(n instanceof re||X(n.lift)&&X(n.subscribe))}var Un=lo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Y(n,e){return oe((t,r)=>{let i=0;t.subscribe(se(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:sR}=Array;function aR(n,e){return sR(e)?n(...e):n(e)}function _o(n){return Y(e=>aR(n,e))}var{isArray:cR}=Array,{getPrototypeOf:uR,prototype:lR,keys:dR}=Object;function qu(n){if(n.length===1){let e=n[0];if(cR(e))return{args:e,keys:null};if(hR(e)){let t=dR(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function hR(n){return n&&typeof n=="object"&&uR(n)===lR}function zu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Hu(...n){let e=vn(n),t=Pu(n),{args:r,keys:i}=qu(n);if(r.length===0)return we([],e);let o=new re(fR(r,e,i?s=>zu(i,s):yt));return t?o.pipe(_o(t)):o}function fR(n,e,t=yt){return r=>{a_(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)a_(e,()=>{let l=we(n[c],e),d=!1;l.subscribe(se(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function a_(n,e,t){n?At(t,n,e):e()}function c_(n,e,t,r,i,o,s,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},y=A=>l<r?_(A):c.push(A),_=A=>{o&&e.next(A),l++;let b=!1;Te(t(A,d++)).subscribe(se(e,P=>{i?.(P),o?y(P):e.next(P)},()=>{b=!0},void 0,()=>{if(b)try{for(l--;c.length&&l<r;){let P=c.shift();s?At(e,s,()=>_(P)):_(P)}g()}catch(P){e.error(P)}}))};return n.subscribe(se(e,y,()=>{f=!0,g()})),()=>{a?.()}}function Be(n,e,t=1/0){return X(e)?Be((r,i)=>Y((o,s)=>e(r,o,i,s))(Te(n(r,i))),t):(typeof e=="number"&&(t=e),oe((r,i)=>c_(r,i,n,t)))}function ya(n=1/0){return Be(yt,n)}function u_(){return ya(1)}function Do(...n){return u_()(we(n,vn(n)))}function Gu(n){return new re(e=>{Te(n()).subscribe(e)})}function pR(...n){let e=Pu(n),{args:t,keys:r}=qu(n),i=new re(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let f=!1;Te(t[d]).subscribe(se(o,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?zu(r,a):a),o.complete())}))}});return e?i.pipe(_o(e)):i}var gR=["addListener","removeListener"],mR=["addEventListener","removeEventListener"],yR=["on","off"];function Bf(n,e,t,r){if(X(t)&&(r=t,t=void 0),r)return Bf(n,e,t).pipe(_o(r));let[i,o]=ER(n)?mR.map(s=>a=>n[s](e,a,t)):vR(n)?gR.map(l_(n,e)):wR(n)?yR.map(l_(n,e)):[];if(!i&&Eo(n))return Be(s=>Bf(s,e,t))(Te(n));if(!i)throw new TypeError("Invalid event target");return new re(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return i(a),()=>o(a)})}function l_(n,e){return t=>r=>n[t](e,r)}function vR(n){return X(n.addListener)&&X(n.removeListener)}function wR(n){return X(n.on)&&X(n.off)}function ER(n){return X(n.addEventListener)&&X(n.removeEventListener)}function $f(...n){let e=vn(n),t=XI(n,1/0),r=n;return r.length?r.length===1?Te(r[0]):ya(t)(we(r,e)):vt}function Xe(n,e){return oe((t,r)=>{let i=0;t.subscribe(se(r,o=>n.call(e,o,i++)&&r.next(o)))})}function dr(n){return oe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(se(t,void 0,void 0,s=>{o=Te(n(s,dr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function d_(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(se(s,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function hr(n,e){return X(e)?Be(n,e,1):Be(n,1)}function IR(n,e=mn){return oe((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+n,d=e.now();if(d<l){i=this.schedule(void 0,l-d),r.add(i);return}a()}t.subscribe(se(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function fr(n){return oe((e,t)=>{let r=!1;e.subscribe(se(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function qf(n){return Y(()=>n)}function zf(n,e=yt){return n=n??_R,oe((t,r)=>{let i,o=!0;t.subscribe(se(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function _R(n,e){return n===e}function Wu(n=DR){return oe((e,t)=>{let r=!1;e.subscribe(se(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function DR(){return new Un}function pr(n){return oe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function zt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Xe((i,o)=>n(i,o,r)):yt,yn(1),t?fr(e):Wu(()=>new Un))}function To(n){return n<=0?()=>vt:oe((e,t)=>{let r=[];e.subscribe(se(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Hf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Xe((i,o)=>n(i,o,r)):yt,To(1),t?fr(e):Wu(()=>new Un))}function va(){return oe((n,e)=>{let t,r=!1;n.subscribe(se(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function ai(n,e){return oe(d_(n,e,arguments.length>=2,!0))}function h_(n={}){let{connector:e=()=>new Ue,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=c=void 0,d=f=!1},_=()=>{let A=s;y(),A?.unsubscribe()};return oe((A,b)=>{l++,!f&&!d&&g();let P=c=c??e();b.add(()=>{l--,l===0&&!f&&!d&&(a=Gf(_,i))}),P.subscribe(b),!s&&l>0&&(s=new jn({next:j=>P.next(j),error:j=>{f=!0,g(),a=Gf(y,t,j),P.error(j)},complete:()=>{d=!0,g(),a=Gf(y,r),P.complete()}}),Te(A).subscribe(s))})(o)}}function Gf(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new jn({next:()=>{r.unsubscribe(),n()}});return Te(e(...t)).subscribe(r)}function Ku(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,h_({connector:()=>new Mu(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ci(...n){let e=vn(n);return oe((t,r)=>{(e?Do(n,t,e):Do(n,t)).subscribe(r)})}function Pe(n,e){return oe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(se(r,c=>{i?.unsubscribe();let l=0,d=o++;Te(n(c,d)).subscribe(i=se(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Qu(n,e){return X(e)?Pe(()=>n,e):Pe(()=>n)}function Wf(n){return oe((e,t)=>{Te(n).subscribe(se(t,()=>t.complete(),ma)),!t.closed&&e.subscribe(t)})}function Ge(n,e,t){let r=X(n)||e||t?{next:n,error:e,complete:t}:n;return r?oe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(se(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):yt}var f_=null;var Kf=1,Qf=Symbol("SIGNAL");function pe(n){let e=f_;return f_=n,e}var p_={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function TR(n){if(!(Jf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Kf)){if(!n.producerMustRecompute(n)&&!Yf(n)){n.dirty=!1,n.lastCleanEpoch=Kf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Kf}}function g_(n){return n&&(n.nextProducerIndex=0),pe(n)}function m_(n,e){if(pe(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Jf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Zf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Yf(n){Xf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(TR(t),r!==t.version))return!0}return!1}function y_(n){if(Xf(n),Jf(n))for(let e=0;e<n.producerNode.length;e++)Zf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Zf(n,e){if(bR(n),n.liveConsumerNode.length===1&&CR(n))for(let r=0;r<n.producerNode.length;r++)Zf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Xf(i),i.producerIndexOfThis[r]=e}}function Jf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Xf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function bR(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function CR(n){return n.producerNode!==void 0}function SR(){throw new Error}var AR=SR;function v_(n){AR=n}var sD="https://g.co/ng/security#xss",te=class extends Error{constructor(e,t){super(Pl(e,t)),this.code=e}};function Pl(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ra(n){return{toString:n}.toString()}var Yu="__parameters__";function xR(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function aD(n,e,t){return Ra(()=>{let r=xR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,d){let f=c.hasOwnProperty(Yu)?c[Yu]:Object.defineProperty(c,Yu,{value:[]})[Yu];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var di=globalThis;function be(n){for(let e in n)if(n[e]===be)return e;throw Error("Could not find renamed property on target object.")}function MR(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Et(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Et).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function gp(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var RR=be({__forward_ref__:be});function cD(n){return n.__forward_ref__=cD,n.toString=function(){return Et(this())},n}function wt(n){return uD(n)?n():n}function uD(n){return typeof n=="function"&&n.hasOwnProperty(RR)&&n.__forward_ref__===cD}function Z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function sn(n){return{providers:n.providers||[],imports:n.imports||[]}}function kl(n){return w_(n,dD)||w_(n,hD)}function lD(n){return kl(n)!==null}function w_(n,e){return n.hasOwnProperty(e)?n[e]:null}function NR(n){let e=n&&(n[dD]||n[hD]);return e||null}function E_(n){return n&&(n.hasOwnProperty(I_)||n.hasOwnProperty(PR))?n[I_]:null}var dD=be({\u0275prov:be}),I_=be({\u0275inj:be}),hD=be({ngInjectableDef:be}),PR=be({ngInjectorDef:be}),G=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function fD(n){return n&&!!n.\u0275providers}var kR=be({\u0275cmp:be}),OR=be({\u0275dir:be}),FR=be({\u0275pipe:be}),LR=be({\u0275mod:be}),cl=be({\u0275fac:be}),wa=be({__NG_ELEMENT_ID__:be}),__=be({__NG_ENV_ID__:be});function hi(n){return typeof n=="string"?n:n==null?"":String(n)}function VR(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():hi(n)}function jR(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new te(-200,n)}function pg(n,e){throw new te(-201,!1)}var he=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(he||{}),mp;function pD(){return mp}function xt(n){let e=mp;return mp=n,e}function gD(n,e,t){let r=kl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&he.Optional)return null;if(e!==void 0)return e;pg(n,"Injector")}var UR={},Ea=UR,yp="__NG_DI_FLAG__",ul="ngTempTokenPath",BR="ngTokenPath",$R=/\n/gm,qR="\u0275",D_="__source",Ao;function zR(){return Ao}function gr(n){let e=Ao;return Ao=n,e}function HR(n,e=he.Default){if(Ao===void 0)throw new te(-203,!1);return Ao===null?gD(n,void 0,e):Ao.get(n,e&he.Optional?null:void 0,e)}function U(n,e=he.Default){return(pD()||HR)(wt(n),e)}function V(n,e=he.Default){return U(n,Ol(e))}function Ol(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function vp(n){let e=[];for(let t=0;t<n.length;t++){let r=wt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new te(900,!1);let i,o=he.Default;for(let s=0;s<r.length;s++){let a=r[s],c=GR(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(U(i,o))}else e.push(U(r))}return e}function mD(n,e){return n[yp]=e,n.prototype[yp]=e,n}function GR(n){return n[yp]}function WR(n,e,t,r){let i=n[ul];throw e[D_]&&i.unshift(e[D_]),n.message=KR(`
`+n.message,i,t,r),n[BR]=i,n[ul]=null,n}function KR(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==qR?n.slice(2):n;let i=Et(e);if(Array.isArray(e))i=e.map(Et).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Et(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace($R,`
  `)}`}var jo=mD(aD("Optional"),8);var gg=mD(aD("SkipSelf"),4);function fi(n,e){let t=n.hasOwnProperty(cl);return t?n[cl]:null}function QR(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function YR(n){return n.flat(Number.POSITIVE_INFINITY)}function mg(n,e){n.forEach(t=>Array.isArray(t)?mg(t,e):e(t))}function yD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ll(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ZR(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function JR(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Fl(n,e,t){let r=Na(n,e);return r>=0?n[r|1]=t:(r=~r,JR(n,r,e,t)),r}function ep(n,e){let t=Na(n,e);if(t>=0)return n[t|1]}function Na(n,e){return XR(n,e,1)}function XR(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Mo={},Mt=[],Ro=new G(""),vD=new G("",-1),wD=new G(""),dl=class{get(e,t=Ea){if(t===Ea){let r=new Error(`NullInjectorError: No provider for ${Et(e)}!`);throw r.name="NullInjectorError",r}return t}},ED=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ED||{}),In=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(In||{}),No=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(No||{});function eN(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function wp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];nN(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function tN(n){return n===3||n===4||n===6}function nN(n){return n.charCodeAt(0)===64}function Ia(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?T_(n,t,i,null,e[++r]):T_(n,t,i,null,null))}}return n}function T_(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var ID="ng-template";function rN(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&eN(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(yg(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function yg(n){return n.type===4&&n.value!==ID}function iN(n,e,t){let r=n.type===4&&!t?ID:n.value;return e===r}function oN(n,e,t){let r=4,i=n.attrs,o=i!==null?cN(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!nn(r)&&!nn(c))return!1;if(s&&nn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!iN(n,c,t)||c===""&&e.length===1){if(nn(r))return!1;s=!0}}else if(r&8){if(i===null||!rN(n,i,c,t)){if(nn(r))return!1;s=!0}}else{let l=e[++a],d=sN(c,i,yg(n),t);if(d===-1){if(nn(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(nn(r))return!1;s=!0}}}}return nn(r)||s}function nn(n){return(n&1)===0}function sN(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return uN(e,n)}function _D(n,e,t=!1){for(let r=0;r<e.length;r++)if(oN(n,e[r],t))return!0;return!1}function aN(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function cN(n){for(let e=0;e<n.length;e++){let t=n[e];if(tN(t))return e}return n.length}function uN(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function lN(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function b_(n,e){return n?":not("+e.trim()+")":e}function dN(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!nn(s)&&(e+=b_(o,i),i=""),r=s,o=o||!nn(r);t++}return i!==""&&(e+=b_(o,i)),e}function hN(n){return n.map(dN).join(",")}function fN(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!nn(i))break;i=o}r++}return{attrs:e,classes:t}}function DD(n){return Ra(()=>{let e=AD(n),t=Re(W({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ED.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||In.Emulated,styles:n.styles||Mt,_:null,schemas:n.schemas||null,tView:null,id:""});xD(t);let r=n.dependencies;return t.directiveDefs=S_(r,!1),t.pipeDefs=S_(r,!0),t.id=mN(t),t})}function pN(n){return pi(n)||TD(n)}function gN(n){return n!==null}function an(n){return Ra(()=>({type:n.type,bootstrap:n.bootstrap||Mt,declarations:n.declarations||Mt,imports:n.imports||Mt,exports:n.exports||Mt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function C_(n,e){if(n==null)return Mo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=No.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==No.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ci(n){return Ra(()=>{let e=AD(n);return xD(e),e})}function vg(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function pi(n){return n[kR]||null}function TD(n){return n[OR]||null}function bD(n){return n[FR]||null}function CD(n){let e=pi(n)||TD(n)||bD(n);return e!==null?e.standalone:!1}function SD(n,e){let t=n[LR]||null;if(!t&&e===!0)throw new Error(`Type ${Et(n)} does not have '\u0275mod' property.`);return t}function AD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Mo,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Mt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:C_(n.inputs,e),outputs:C_(n.outputs),debugInfo:null}}function xD(n){n.features?.forEach(e=>e(n))}function S_(n,e){if(!n)return null;let t=e?bD:pN;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(gN)}function mN(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Pa(n){return{\u0275providers:n}}function yN(...n){return{\u0275providers:MD(!0,n),\u0275fromNgModule:!0}}function MD(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return mg(e,s=>{let a=s;Ep(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&RD(i,o),t}function RD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];wg(i,o=>{e(o,r)})}}function Ep(n,e,t,r){if(n=wt(n),!n)return!1;let i=null,o=E_(n),s=!o&&pi(n);if(!o&&!s){let c=n.ngModule;if(o=E_(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Ep(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{mg(o.imports,d=>{Ep(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&RD(l,e)}if(!a){let l=fi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Mt},i),e({provide:wD,useValue:i,multi:!0},i),e({provide:Ro,useValue:()=>U(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;wg(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function wg(n,e){for(let t of n)fD(t)&&(t=t.\u0275providers),Array.isArray(t)?wg(t,e):e(t)}var vN=be({provide:String,useValue:be});function ND(n){return n!==null&&typeof n=="object"&&vN in n}function wN(n){return!!(n&&n.useExisting)}function EN(n){return!!(n&&n.useFactory)}function Po(n){return typeof n=="function"}function IN(n){return!!n.useClass}var Ll=new G(""),nl={},_N={},tp;function Eg(){return tp===void 0&&(tp=new dl),tp}var Nt=class{},_a=class extends Nt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_p(e,s=>this.processProvider(s)),this.records.set(vD,bo(void 0,this)),i.has("environment")&&this.records.set(Nt,bo(void 0,this));let o=this.records.get(Ll);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(wD,Mt,he.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=pe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),pe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=gr(this),r=xt(void 0),i;try{return e()}finally{gr(t),xt(r)}}get(e,t=Ea,r=he.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(__))return e[__](this);r=Ol(r);let i,o=gr(this),s=xt(void 0);try{if(!(r&he.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=SN(e)&&kl(e);l&&this.injectableDefInScope(l)?c=bo(Ip(e),nl):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&he.Self?Eg():this.parent;return t=r&he.Optional&&t===Ea?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[ul]=a[ul]||[]).unshift(Et(e)),o)throw a;return WR(a,e,"R3InjectorError",this.source)}else throw a}finally{xt(s),gr(o)}}resolveInjectorInitializers(){let e=pe(null),t=gr(this),r=xt(void 0),i;try{let o=this.get(Ro,Mt,he.Self);for(let s of o)s()}finally{gr(t),xt(r),pe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Et(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new te(205,!1)}processProvider(e){e=wt(e);let t=Po(e)?e:wt(e&&e.provide),r=TN(e);if(!Po(e)&&e.multi===!0){let i=this.records.get(t);i||(i=bo(void 0,nl,!0),i.factory=()=>vp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=pe(null);try{return t.value===nl&&(t.value=_N,t.value=t.factory()),typeof t.value=="object"&&t.value&&CN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{pe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=wt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ip(n){let e=kl(n),t=e!==null?e.factory:fi(n);if(t!==null)return t;if(n instanceof G)throw new te(204,!1);if(n instanceof Function)return DN(n);throw new te(204,!1)}function DN(n){if(n.length>0)throw new te(204,!1);let t=NR(n);return t!==null?()=>t.factory(n):()=>new n}function TN(n){if(ND(n))return bo(void 0,n.useValue);{let e=PD(n);return bo(e,nl)}}function PD(n,e,t){let r;if(Po(n)){let i=wt(n);return fi(i)||Ip(i)}else if(ND(n))r=()=>wt(n.useValue);else if(EN(n))r=()=>n.useFactory(...vp(n.deps||[]));else if(wN(n))r=()=>U(wt(n.useExisting));else{let i=wt(n&&(n.useClass||n.provide));if(bN(n))r=()=>new i(...vp(n.deps));else return fi(i)||Ip(i)}return r}function bo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function bN(n){return!!n.deps}function CN(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function SN(n){return typeof n=="function"||typeof n=="object"&&n instanceof G}function _p(n,e){for(let t of n)Array.isArray(t)?_p(t,e):t&&fD(t)?_p(t.\u0275providers,e):e(t)}function cn(n,e){n instanceof _a&&n.assertNotDestroyed();let t,r=gr(n),i=xt(void 0);try{return e()}finally{gr(r),xt(i)}}function AN(){return pD()!==void 0||zR()!=null}function xN(n){return typeof n=="function"}var zn=0,ae=1,ne=2,dt=3,on=4,Pt=5,Da=6,hl=7,Ht=8,ko=9,_n=10,ke=11,Ta=12,A_=13,Uo=14,Gt=15,gi=16,Co=17,Bn=18,Vl=19,kD=20,mr=21,np=22,mi=23,It=25,OD=1;var yi=7,fl=8,Oo=9,Rt=10,pl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(pl||{});function yr(n){return Array.isArray(n)&&typeof n[OD]=="object"}function Hn(n){return Array.isArray(n)&&n[OD]===!0}function FD(n){return(n.flags&4)!==0}function jl(n){return n.componentOffset>-1}function Ig(n){return(n.flags&1)===1}function vr(n){return!!n.template}function Dp(n){return(n[ne]&512)!==0}var Tp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function LD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function ka(){return VD}function VD(n){return n.type.prototype.ngOnChanges&&(n.setInput=RN),MN}ka.ngInherit=!0;function MN(){let n=UD(this),e=n?.current;if(e){let t=n.previous;if(t===Mo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function RN(n,e,t,r,i){let o=this.declaredInputs[r],s=UD(n)||NN(n,{previous:Mo,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Tp(l&&l.currentValue,t,c===Mo),LD(n,e,i,t)}var jD="__ngSimpleChanges__";function UD(n){return n[jD]||null}function NN(n,e){return n[jD]=e}var x_=null;var wn=function(n,e,t){x_?.(n,e,t)},BD="svg",PN="math";function Dn(n){for(;Array.isArray(n);)n=n[zn];return n}function $D(n,e){return Dn(e[n])}function Wt(n,e){return Dn(e[n.index])}function _g(n,e){return n.data[e]}function qD(n,e){return n[e]}function Ir(n,e){let t=e[n];return yr(t)?t:t[zn]}function kN(n){return(n[ne]&4)===4}function Dg(n){return(n[ne]&128)===128}function ON(n){return Hn(n[dt])}function gl(n,e){return e==null?null:n[e]}function zD(n){n[Co]=0}function FN(n){n[ne]&1024||(n[ne]|=1024,Dg(n)&&Ul(n))}function LN(n,e){for(;n>0;)e=e[Uo],n--;return e}function ba(n){return!!(n[ne]&9216||n[mi]?.dirty)}function bp(n){n[_n].changeDetectionScheduler?.notify(7),n[ne]&64&&(n[ne]|=1024),ba(n)&&Ul(n)}function Ul(n){n[_n].changeDetectionScheduler?.notify(0);let e=Ca(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Dg(e)));)e=Ca(e)}function HD(n,e){if((n[ne]&256)===256)throw new te(911,!1);n[mr]===null&&(n[mr]=[]),n[mr].push(e)}function VN(n,e){if(n[mr]===null)return;let t=n[mr].indexOf(e);t!==-1&&n[mr].splice(t,1)}function Ca(n){let e=n[dt];return Hn(e)?e[dt]:e}var ce={lFrame:nT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var GD=!1;function jN(){return ce.lFrame.elementDepthCount}function UN(){ce.lFrame.elementDepthCount++}function BN(){ce.lFrame.elementDepthCount--}function WD(){return ce.bindingsEnabled}function KD(){return ce.skipHydrationRootTNode!==null}function $N(n){return ce.skipHydrationRootTNode===n}function qN(){ce.skipHydrationRootTNode=null}function ue(){return ce.lFrame.lView}function $e(){return ce.lFrame.tView}function xG(n){return ce.lFrame.contextLView=n,n[Ht]}function MG(n){return ce.lFrame.contextLView=null,n}function _t(){let n=QD();for(;n!==null&&n.type===64;)n=n.parent;return n}function QD(){return ce.lFrame.currentTNode}function zN(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Oa(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function YD(){return ce.lFrame.isParent}function ZD(){ce.lFrame.isParent=!1}function HN(){return ce.lFrame.contextLView}function JD(){return GD}function M_(n){GD=n}function Bl(){let n=ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function GN(){return ce.lFrame.bindingIndex}function WN(n){return ce.lFrame.bindingIndex=n}function Fa(){return ce.lFrame.bindingIndex++}function Tg(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function KN(){return ce.lFrame.inI18n}function QN(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,Cp(e)}function YN(){return ce.lFrame.currentDirectiveIndex}function Cp(n){ce.lFrame.currentDirectiveIndex=n}function ZN(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function XD(){return ce.lFrame.currentQueryIndex}function bg(n){ce.lFrame.currentQueryIndex=n}function JN(n){let e=n[ae];return e.type===2?e.declTNode:e.type===1?n[Pt]:null}function eT(n,e,t){if(t&he.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&he.Host);)if(i=JN(o),i===null||(o=o[Uo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ce.lFrame=tT();return r.currentTNode=e,r.lView=n,!0}function Cg(n){let e=tT(),t=n[ae];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function tT(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?nT(n):e}function nT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function rT(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var iT=rT;function Sg(){let n=rT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function XN(n){return(ce.lFrame.contextLView=LN(n,ce.lFrame.contextLView))[Ht]}function _r(){return ce.lFrame.selectedIndex}function vi(n){ce.lFrame.selectedIndex=n}function La(){let n=ce.lFrame;return _g(n.tView,n.selectedIndex)}function RG(){ce.lFrame.currentNamespace=BD}function NG(){eP()}function eP(){ce.lFrame.currentNamespace=null}function tP(){return ce.lFrame.currentNamespace}var oT=!0;function Ag(){return oT}function xg(n){oT=n}function nP(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=VD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Mg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function rl(n,e,t){sT(n,e,3,t)}function il(n,e,t,r){(n[ne]&3)===t&&sT(n,e,t,r)}function rp(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function sT(n,e,t,r){let i=r!==void 0?n[Co]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Co]+=65536),(a<o||o==-1)&&(rP(n,t,e,c),n[Co]=(n[Co]&4294901760)+c+2),c++}function R_(n,e){wn(4,n,e);let t=pe(null);try{e.call(n)}finally{pe(t),wn(5,n,e)}}function rP(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[Co]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,R_(a,o)):R_(a,o)}var xo=-1,wi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function iP(n){return n instanceof wi}function oP(n){return(n.flags&8)!==0}function sP(n){return(n.flags&16)!==0}function aT(n){return n!==xo}function ml(n){return n&32767}function aP(n){return n>>16}function yl(n,e){let t=aP(n),r=e;for(;t>0;)r=r[Uo],t--;return r}var Sp=!0;function vl(n){let e=Sp;return Sp=n,e}var cP=256,cT=cP-1,uT=5,uP=0,En={};function lP(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(wa)&&(r=t[wa]),r==null&&(r=t[wa]=uP++);let i=r&cT,o=1<<i;e.data[n+(i>>uT)]|=o}function wl(n,e){let t=lT(n,e);if(t!==-1)return t;let r=e[ae];r.firstCreatePass&&(n.injectorIndex=e.length,ip(r.data,n),ip(e,null),ip(r.blueprint,null));let i=Rg(n,e),o=n.injectorIndex;if(aT(i)){let s=ml(i),a=yl(i,e),c=a[ae].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function ip(n,e){n.push(0,0,0,0,0,0,0,0,e)}function lT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Rg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=gT(i),r===null)return xo;if(t++,i=i[Uo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return xo}function Ap(n,e,t){lP(n,e,t)}function dT(n,e,t){if(t&he.Optional||n!==void 0)return n;pg(e,"NodeInjector")}function hT(n,e,t,r){if(t&he.Optional&&r===void 0&&(r=null),!(t&(he.Self|he.Host))){let i=n[ko],o=xt(void 0);try{return i?i.get(e,r,t&he.Optional):gD(e,r,t&he.Optional)}finally{xt(o)}}return dT(r,e,t)}function fT(n,e,t,r=he.Default,i){if(n!==null){if(e[ne]&2048&&!(r&he.Self)){let s=pP(n,e,t,r,En);if(s!==En)return s}let o=pT(n,e,t,r,En);if(o!==En)return o}return hT(e,t,r,i)}function pT(n,e,t,r,i){let o=hP(t);if(typeof o=="function"){if(!eT(e,n,r))return r&he.Host?dT(i,t,r):hT(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&he.Optional))pg(t);else return s}finally{iT()}}else if(typeof o=="number"){let s=null,a=lT(n,e),c=xo,l=r&he.Host?e[Gt][Pt]:null;for((a===-1||r&he.SkipSelf)&&(c=a===-1?Rg(n,e):e[a+8],c===xo||!P_(r,!1)?a=-1:(s=e[ae],a=ml(c),e=yl(c,e)));a!==-1;){let d=e[ae];if(N_(o,a,d.data)){let f=dP(a,e,t,s,r,l);if(f!==En)return f}c=e[a+8],c!==xo&&P_(r,e[ae].data[a+8]===l)&&N_(o,a,e)?(s=d,a=ml(c),e=yl(c,e)):a=-1}}return i}function dP(n,e,t,r,i,o){let s=e[ae],a=s.data[n+8],c=r==null?jl(a)&&Sp:r!=s&&(a.type&3)!==0,l=i&he.Host&&o===a,d=ol(a,s,t,c,l);return d!==null?Ei(e,s,d,a):En}function ol(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let _=s[y];if(y<c&&t===_||y>=c&&_.type===t)return y}if(i){let y=s[c];if(y&&vr(y)&&y.type===t)return c}return null}function Ei(n,e,t,r){let i=n[t],o=e.data;if(iP(i)){let s=i;s.resolving&&jR(VR(o[t]));let a=vl(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?xt(s.injectImpl):null,d=eT(n,r,he.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&nP(t,o[t],e)}finally{l!==null&&xt(l),vl(a),s.resolving=!1,iT()}}return i}function hP(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(wa)?n[wa]:void 0;return typeof e=="number"?e>=0?e&cT:fP:e}function N_(n,e,t){let r=1<<n;return!!(t[e+(n>>uT)]&r)}function P_(n,e){return!(n&he.Self)&&!(n&he.Host&&e)}var li=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return fT(this._tNode,this._lView,e,Ol(r),t)}};function fP(){return new li(_t(),ue())}function Ng(n){return Ra(()=>{let e=n.prototype.constructor,t=e[cl]||xp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[cl]||xp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function xp(n){return uD(n)?()=>{let e=xp(wt(n));return e&&e()}:fi(n)}function pP(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=pT(o,s,t,r|he.Self,En);if(a!==En)return a;let c=o.parent;if(!c){let l=s[kD];if(l){let d=l.get(t,En,r);if(d!==En)return d}c=gT(s),s=s[Uo]}o=c}return i}function gT(n){let e=n[ae],t=e.type;return t===2?e.declTNode:t===1?n[Pt]:null}function k_(n,e=null,t=null,r){let i=mT(n,e,t,r);return i.resolveInjectorInitializers(),i}function mT(n,e=null,t=null,r,i=new Set){let o=[t||Mt,yN(n)];return r=r||(typeof n=="object"?void 0:Et(n)),new _a(o,e||Eg(),r||null,i)}var ui=class ui{static create(e,t){if(Array.isArray(e))return k_({name:""},t,e,"");{let r=e.name??"";return k_({name:r},e.parent,e.providers,r)}}};ui.THROW_IF_NOT_FOUND=Ea,ui.NULL=new dl,ui.\u0275prov=Z({token:ui,providedIn:"any",factory:()=>U(vD)}),ui.__NG_ELEMENT_ID__=-1;var Ii=ui;var gP=new G("");gP.__NG_ELEMENT_ID__=n=>{let e=_t();if(e===null)throw new te(204,!1);if(e.type&2)return e.value;if(n&he.Optional)return null;throw new te(204,!1)};var mP="ngOriginalError";function op(n){return n[mP]}var $n=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&op(e);for(;t&&op(t);)t=op(t);return t||null}},yT=new G("",{providedIn:"root",factory:()=>V($n).handleError.bind(void 0)}),vT=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=yP,e.__NG_ENV_ID__=r=>r;let n=e;return n})(),Mp=class extends vT{constructor(e){super(),this._lView=e}onDestroy(e){return HD(this._lView,e),()=>VN(this._lView,e)}};function yP(){return new Mp(ue())}function vP(){return Bo(_t(),ue())}function Bo(n,e){return new Dr(Wt(n,e))}var Dr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=vP;let n=e;return n})();function wP(n){return n instanceof Dr?n.nativeElement:n}var Rp=class extends Ue{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,AN()&&(this.destroyRef=V(vT,{optional:!0})??void 0)}emit(e){let t=pe(null);try{super.next(e)}finally{pe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=sp(o),i&&(i=sp(i)),s&&(s=sp(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Le&&e.add(a),a}};function sp(n){return e=>{setTimeout(n,void 0,e)}}var lt=Rp;function EP(){return this._results[Symbol.iterator]()}var Np=class n{get changes(){return this._changes??=new lt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=EP)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=YR(e);(this._changesDetected=!QR(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function wT(n){return(n.flags&128)===128}var ET=new Map,IP=0;function _P(){return IP++}function DP(n){ET.set(n[Vl],n)}function TP(n){ET.delete(n[Vl])}var O_="__ngContext__";function _i(n,e){yr(e)?(n[O_]=e[Vl],DP(e)):n[O_]=e}function IT(n){return DT(n[Ta])}function _T(n){return DT(n[on])}function DT(n){for(;n!==null&&!Hn(n);)n=n[on];return n}var Pp;function TT(n){Pp=n}function bT(){if(Pp!==void 0)return Pp;if(typeof document<"u")return document;throw new te(210,!1)}var Pg=new G("",{providedIn:"root",factory:()=>bP}),bP="ng",kg=new G(""),kt=new G("",{providedIn:"platform",factory:()=>"unknown"});var PG=new G(""),Og=new G("",{providedIn:"root",factory:()=>bT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var CP="h",SP="b";var AP=()=>null;function Fg(n,e,t=!1){return AP(n,e,t)}var CT=!1,xP=new G("",{providedIn:"root",factory:()=>CT});var Zu;function MP(){if(Zu===void 0&&(Zu=null,di.trustedTypes))try{Zu=di.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zu}function $l(n){return MP()?.createHTML(n)||n}var Ju;function RP(){if(Ju===void 0&&(Ju=null,di.trustedTypes))try{Ju=di.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ju}function F_(n){return RP()?.createHTML(n)||n}var El=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${sD})`}};function $o(n){return n instanceof El?n.changingThisBreaksApplicationSecurity:n}function Lg(n,e){let t=NP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${sD})`)}return t===e}function NP(n){return n instanceof El&&n.getTypeName()||null}function PP(n){let e=new Op(n);return kP()?new kp(e):e}var kp=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString($l(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}},Op=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=$l(e),t}};function kP(){try{return!!new window.DOMParser().parseFromString($l(""),"text/html")}catch{return!1}}var OP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Vg(n){return n=String(n),n.match(OP)?n:"unsafe:"+n}function Gn(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Va(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var ST=Gn("area,br,col,hr,img,wbr"),AT=Gn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),xT=Gn("rp,rt"),FP=Va(xT,AT),LP=Va(AT,Gn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),VP=Va(xT,Gn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),L_=Va(ST,LP,VP,FP),MT=Gn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),jP=Gn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),UP=Gn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),BP=Va(MT,jP,UP),$P=Gn("script,style,template"),Fp=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=HP(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=zP(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=V_(e).toLowerCase();if(!L_.hasOwnProperty(t))return this.sanitizedSomething=!0,!$P.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!BP.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;MT[a]&&(c=Vg(c)),this.buf.push(" ",s,'="',j_(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=V_(e).toLowerCase();L_.hasOwnProperty(t)&&!ST.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(j_(e))}};function qP(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function zP(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw RT(e);return e}function HP(n){let e=n.firstChild;if(e&&qP(n,e))throw RT(e);return e}function V_(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function RT(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var GP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,WP=/([^\#-~ |!])/g;function j_(n){return n.replace(/&/g,"&amp;").replace(GP,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(WP,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Xu;function NT(n,e){let t=null;try{Xu=Xu||PP(n);let r=e?String(e):"";t=Xu.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=Xu.getInertBodyElement(r)}while(r!==o);let a=new Fp().sanitizeChildren(U_(t)||t);return $l(a)}finally{if(t){let r=U_(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function U_(n){return"content"in n&&KP(n)?n.content:null}function KP(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var ql=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ql||{});function kG(n){let e=PT();return e?F_(e.sanitize(ql.HTML,n)||""):Lg(n,"HTML")?F_($o(n)):NT(bT(),hi(n))}function OG(n){let e=PT();return e?e.sanitize(ql.URL,n)||"":Lg(n,"URL")?$o(n):Vg(hi(n))}function PT(){let n=ue();return n&&n[_n].sanitizer}function FG(n){return n.ownerDocument.defaultView}function kT(n){return n instanceof Function?n():n}var qn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(qn||{}),QP;function jg(n,e){return QP(n,e)}function So(n,e,t,r,i){if(r!=null){let o,s=!1;Hn(r)?o=r:yr(r)&&(s=!0,r=r[zn]);let a=Dn(r);n===0&&t!==null?i==null?jT(e,t,a):_l(e,t,a,i||null,!0):n===1&&t!==null?_l(e,t,a,i||null,!0):n===2?uk(e,a,s):n===3&&e.destroyNode(a),o!=null&&dk(e,n,o,t,i)}}function YP(n,e){return n.createText(e)}function ZP(n,e,t){n.setValue(e,t)}function OT(n,e,t){return n.createElement(e,t)}function JP(n,e){FT(n,e),e[zn]=null,e[Pt]=null}function XP(n,e,t,r,i,o){r[zn]=i,r[Pt]=e,zl(n,r,t,1,i,o)}function FT(n,e){e[_n].changeDetectionScheduler?.notify(8),zl(n,e,e[ke],2,null,null)}function ek(n){let e=n[Ta];if(!e)return ap(n[ae],n);for(;e;){let t=null;if(yr(e))t=e[Ta];else{let r=e[Rt];r&&(t=r)}if(!t){for(;e&&!e[on]&&e!==n;)yr(e)&&ap(e[ae],e),e=e[dt];e===null&&(e=n),yr(e)&&ap(e[ae],e),t=e&&e[on]}e=t}}function tk(n,e,t,r){let i=Rt+r,o=t.length;r>0&&(t[i-1][on]=e),r<o-Rt?(e[on]=t[i],yD(t,Rt+r,e)):(t.push(e),e[on]=null),e[dt]=t;let s=e[gi];s!==null&&t!==s&&LT(s,e);let a=e[Bn];a!==null&&a.insertView(n),bp(e),e[ne]|=128}function LT(n,e){let t=n[Oo],r=e[dt];if(yr(r))n[ne]|=pl.HasTransplantedViews;else{let i=r[dt][Gt];e[Gt]!==i&&(n[ne]|=pl.HasTransplantedViews)}t===null?n[Oo]=[e]:t.push(e)}function Ug(n,e){let t=n[Oo],r=t.indexOf(e);t.splice(r,1)}function Il(n,e){if(n.length<=Rt)return;let t=Rt+e,r=n[t];if(r){let i=r[gi];i!==null&&i!==n&&Ug(i,r),e>0&&(n[t-1][on]=r[on]);let o=ll(n,Rt+e);JP(r[ae],r);let s=o[Bn];s!==null&&s.detachView(o[ae]),r[dt]=null,r[on]=null,r[ne]&=-129}return r}function Bg(n,e){if(!(e[ne]&256)){let t=e[ke];t.destroyNode&&zl(n,e,t,3,null,null),ek(e)}}function ap(n,e){if(e[ne]&256)return;let t=pe(null);try{e[ne]&=-129,e[ne]|=256,e[mi]&&y_(e[mi]),rk(n,e),nk(n,e),e[ae].type===1&&e[ke].destroy();let r=e[gi];if(r!==null&&Hn(e[dt])){r!==e[dt]&&Ug(r,e);let i=e[Bn];i!==null&&i.detachView(n)}TP(e)}finally{pe(t)}}function nk(n,e){let t=n.cleanup,r=e[hl];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[hl]=null);let i=e[mr];if(i!==null){e[mr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function rk(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof wi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];wn(4,a,c);try{c.call(a)}finally{wn(5,a,c)}}else{wn(4,i,o);try{o.call(i)}finally{wn(5,i,o)}}}}}function VT(n,e,t){return ik(n,e.parent,t)}function ik(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[zn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===In.None||o===In.Emulated)return null}return Wt(r,t)}}function _l(n,e,t,r,i){n.insertBefore(e,t,r,i)}function jT(n,e,t){n.appendChild(e,t)}function B_(n,e,t,r,i){r!==null?_l(n,e,t,r,i):jT(n,e,t)}function ok(n,e,t,r){n.removeChild(e,t,r)}function $g(n,e){return n.parentNode(e)}function sk(n,e){return n.nextSibling(e)}function UT(n,e,t){return ck(n,e,t)}function ak(n,e,t){return n.type&40?Wt(n,t):null}var ck=ak,$_;function qg(n,e,t,r){let i=VT(n,r,e),o=e[ke],s=r.parent||e[Pt],a=UT(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)B_(o,i,t[c],a,!1);else B_(o,i,t,a,!1);$_!==void 0&&$_(o,r,e,t,i)}function sl(n,e){if(e!==null){let t=e.type;if(t&3)return Wt(e,n);if(t&4)return Lp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return sl(n,r);{let i=n[e.index];return Hn(i)?Lp(-1,i):Dn(i)}}else{if(t&32)return jg(e,n)()||Dn(n[e.index]);{let r=BT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ca(n[Gt]);return sl(i,r)}else return sl(n,e.next)}}}return null}function BT(n,e){if(e!==null){let r=n[Gt][Pt],i=e.projection;return r.projection[i]}return null}function Lp(n,e){let t=Rt+n+1;if(t<e.length){let r=e[t],i=r[ae].firstChild;if(i!==null)return sl(r,i)}return e[yi]}function uk(n,e,t){let r=$g(n,e);r&&ok(n,r,e,t)}function zg(n,e,t,r,i,o,s){for(;t!=null;){let a=r[t.index],c=t.type;if(s&&e===0&&(a&&_i(Dn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)zg(n,e,t.child,r,i,o,!1),So(e,n,i,a,o);else if(c&32){let l=jg(t,r),d;for(;d=l();)So(e,n,i,d,o);So(e,n,i,a,o)}else c&16?$T(n,e,r,t,i,o):So(e,n,i,a,o);t=s?t.projectionNext:t.next}}function zl(n,e,t,r,i,o){zg(t,r,n.firstChild,e,i,o,!1)}function lk(n,e,t){let r=e[ke],i=VT(n,t,e),o=t.parent||e[Pt],s=UT(o,t,e);$T(r,0,e,t,i,s)}function $T(n,e,t,r,i,o){let s=t[Gt],c=s[Pt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];So(e,n,i,d,o)}else{let l=c,d=s[dt];wT(r)&&(l.flags|=128),zg(n,e,l,d,i,o,!0)}}function dk(n,e,t,r,i){let o=t[yi],s=Dn(t);o!==s&&So(e,n,r,o,i);for(let a=Rt;a<t.length;a++){let c=t[a];zl(c[ae],c,n,e,r,o)}}function hk(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:qn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=qn.Important),n.setStyle(t,r,i,o))}}function fk(n,e,t){n.setAttribute(e,"style",t)}function qT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function zT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&wp(n,e,r),i!==null&&qT(n,e,i),o!==null&&fk(n,e,o)}var Dt={};function LG(n=1){HT($e(),ue(),_r()+n,!1)}function HT(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&rl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&il(e,o,0,t)}vi(t)}function ht(n,e=he.Default){let t=ue();if(t===null)return U(n,e);let r=_t();return fT(r,t,wt(n),e)}function GT(n,e,t,r,i,o){let s=pe(null);try{let a=null;i&No.SignalBased&&(a=e[r][Qf]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&No.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):LD(e,a,r,o)}finally{pe(s)}}function pk(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)vi(~i);else{let o=i,s=t[++r],a=t[++r];QN(s,o);let c=e[o];a(2,c)}}}finally{vi(-1)}}function Hl(n,e,t,r,i,o,s,a,c,l,d){let f=e.blueprint.slice();return f[zn]=i,f[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(f[ne]|=2048),zD(f),f[dt]=f[Uo]=n,f[Ht]=t,f[_n]=s||n&&n[_n],f[ke]=a||n&&n[ke],f[ko]=c||n&&n[ko]||null,f[Pt]=o,f[Vl]=_P(),f[Da]=d,f[kD]=l,f[Gt]=e.type==2?n[Gt]:f,f}function ja(n,e,t,r,i){let o=n.data[e];if(o===null)o=gk(n,e,t,r,i),KN()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=zN();o.injectorIndex=s===null?-1:s.injectorIndex}return Oa(o,!0),o}function gk(n,e,t,r,i){let o=QD(),s=YD(),a=s?o:o&&o.parent,c=n.data[e]=Ik(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function WT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function KT(n,e,t,r,i){let o=_r(),s=r&2;try{vi(-1),s&&e.length>It&&HT(n,e,It,!1),wn(s?2:0,i),t(r,i)}finally{vi(o),wn(s?3:1,i)}}function QT(n,e,t){if(FD(e)){let r=pe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{pe(r)}}}function YT(n,e,t){WD()&&(Sk(n,e,t,Wt(t,e)),(t.flags&64)===64&&tb(n,e,t))}function ZT(n,e,t=Wt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function JT(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Hg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Hg(n,e,t,r,i,o,s,a,c,l,d){let f=It+r,g=f+i,y=mk(f,g),_=typeof l=="function"?l():l;return y[ae]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:d}}function mk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Dt);return t}function yk(n,e,t,r){let o=r.get(xP,CT)||t===In.ShadowDom,s=n.selectRootElement(e,o);return vk(s),s}function vk(n){wk(n)}var wk=()=>null;function Ek(n,e,t,r){let i=ib(e);i.push(t),n.firstCreatePass&&ob(n).push(r,i.length-1)}function Ik(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return KD()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function q_(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=No.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?z_(r,t,l,a,c):z_(r,t,l,a)}return r}function z_(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function _k(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=o[d],g=t?t.get(f):null,y=g?g.inputs:null,_=g?g.outputs:null;c=q_(0,f.inputs,d,c,y),l=q_(1,f.outputs,d,l,_);let A=c!==null&&s!==null&&!yg(e)?Vk(c,d,s):null;a.push(A)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function Dk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Gl(n,e,t,r,i,o,s,a){let c=Wt(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Gg(n,t,d,r,i),jl(e)&&Tk(t,e.index)):e.type&3?(r=Dk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function Tk(n,e){let t=Ir(e,n);t[ne]&16||(t[ne]|=64)}function XT(n,e,t,r){if(WD()){let i=r===null?null:{"":-1},o=xk(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&eb(n,e,t,s,i,a),i&&Mk(t,r,i)}t.mergedAttrs=Ia(t.mergedAttrs,t.attrs)}function eb(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Ap(wl(t,e),n,r[l].type);Nk(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=WT(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=Ia(t.mergedAttrs,d.hostAttrs),Pk(n,t,e,c,d),Rk(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}_k(n,t,o)}function bk(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Ck(s)!=a&&s.push(a),s.push(t,r,o)}}function Ck(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Sk(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;jl(t)&&kk(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||wl(t,e),_i(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=Ei(e,n,a,t);if(_i(l,e),s!==null&&Lk(e,a-i,l,c,t,s),vr(c)){let d=Ir(t.index,e);d[Ht]=Ei(e,n,a,t)}}}function tb(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=YN();try{vi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Cp(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Ak(c,l)}}finally{vi(-1),Cp(s)}}function Ak(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function xk(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(_D(e,s.selectors,!1))if(r||(r=[]),vr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Vp(n,e,c)}else r.unshift(s),Vp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Vp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Mk(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new te(-301,!1);r.push(e[i],o)}}}function Rk(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;vr(e)&&(t[""]=n)}}function Nk(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Pk(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=fi(i.type,!0)),s=new wi(o,vr(i),ht);n.blueprint[r]=s,t[r]=s,bk(n,e,r,WT(n,t,i.hostVars,Dt),i)}function kk(n,e,t){let r=Wt(e,n),i=JT(t),o=n[_n].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Wl(n,Hl(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function Ok(n,e,t,r,i,o){let s=Wt(n,e);Fk(e[ke],s,o,n.value,t,r,i)}function Fk(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?hi(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Lk(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],d=s[a++],f=s[a++];GT(r,t,c,l,d,f)}}function Vk(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function nb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function rb(n,e){let t=n.contentQueries;if(t!==null){let r=pe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];bg(o),a.contentQueries(2,e[s],s)}}}finally{pe(r)}}}function Wl(n,e){return n[Ta]?n[A_][on]=e:n[Ta]=e,n[A_]=e,e}function jp(n,e,t){bg(0);let r=pe(null);try{e(n,t)}finally{pe(r)}}function ib(n){return n[hl]??=[]}function ob(n){return n.cleanup??=[]}function sb(n,e){let t=n[ko],r=t?t.get($n,null):null;r&&r.handleError(e)}function Gg(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],d=n.data[s];GT(d,l,r,a,c,i)}}function ab(n,e,t){let r=$D(e,n);ZP(n[ke],r,t)}function jk(n,e){let t=Ir(e,n),r=t[ae];Uk(r,t);let i=t[zn];i!==null&&t[Da]===null&&(t[Da]=Fg(i,t[ko])),Wg(r,t,t[Ht])}function Uk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Wg(n,e,t){Cg(e);try{let r=n.viewQuery;r!==null&&jp(1,r,t);let i=n.template;i!==null&&KT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Bn]?.finishViewCreation(n),n.staticContentQueries&&rb(n,e),n.staticViewQueries&&jp(2,n.viewQuery,t);let o=n.components;o!==null&&Bk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,Sg()}}function Bk(n,e){for(let t=0;t<e.length;t++)jk(n,e[t])}function Kg(n,e,t,r){let i=pe(null);try{let o=e.tView,a=n[ne]&4096?4096:16,c=Hl(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[gi]=l;let d=n[Bn];return d!==null&&(c[Bn]=d.createEmbeddedView(o)),Wg(o,c,t),c}finally{pe(i)}}function $k(n,e){let t=Rt+e;if(t<n.length)return n[t]}function Dl(n,e){return!e||e.firstChild===null||wT(n)}function Qg(n,e,t,r=!0){let i=e[ae];if(tk(i,e,n,t),r){let s=Lp(t,n),a=e[ke],c=$g(a,n[yi]);c!==null&&XP(i,n[Pt],a,e,c,s)}let o=e[Da];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function qk(n,e){let t=Il(n,e);return t!==void 0&&Bg(t[ae],t),t}function Tl(n,e,t,r,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&r.push(Dn(o)),Hn(o)&&zk(o,r);let s=t.type;if(s&8)Tl(n,e,t.child,r);else if(s&32){let a=jg(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=BT(e,t);if(Array.isArray(a))r.push(...a);else{let c=Ca(e[Gt]);Tl(c[ae],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function zk(n,e){for(let t=Rt;t<n.length;t++){let r=n[t],i=r[ae].firstChild;i!==null&&Tl(r[ae],r,i,e)}n[yi]!==n[zn]&&e.push(n[yi])}var cb=[];function Hk(n){return n[mi]??Gk(n)}function Gk(n){let e=cb.pop()??Object.create(Kk);return e.lView=n,e}function Wk(n){n.lView[mi]!==n&&(n.lView=null,cb.push(n))}var Kk=Re(W({},p_),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ul(n.lView)},consumerOnSignalRead(){this.lView[mi]=this}}),Qk=100;function ub(n,e=!0,t=0){let r=n[_n],i=r.rendererFactory,o=!1;o||i.begin?.();try{Yk(n,t)}catch(s){throw e&&sb(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function Yk(n,e){let t=JD();try{M_(!0),Up(n,e);let r=0;for(;ba(n);){if(r===Qk)throw new te(103,!1);r++,Up(n,1)}}finally{M_(t)}}function Zk(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1,s=!1;!o&&e[_n].inlineEffectRunner?.flush(),Cg(e);let a=null,c=null;!o&&Jk(n)&&(c=Hk(e),a=g_(c));try{zD(e),WN(n.bindingStartIndex),t!==null&&KT(n,e,t,2,r);let l=(i&3)===3;if(!o)if(l){let g=n.preOrderCheckHooks;g!==null&&rl(e,g,null)}else{let g=n.preOrderHooks;g!==null&&il(e,g,0,null),rp(e,0)}if(s||Xk(e),lb(e,0),n.contentQueries!==null&&rb(n,e),!o)if(l){let g=n.contentCheckHooks;g!==null&&rl(e,g)}else{let g=n.contentHooks;g!==null&&il(e,g,1),rp(e,1)}pk(n,e);let d=n.components;d!==null&&hb(e,d,0);let f=n.viewQuery;if(f!==null&&jp(2,f,r),!o)if(l){let g=n.viewCheckHooks;g!==null&&rl(e,g)}else{let g=n.viewHooks;g!==null&&il(e,g,2),rp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[np]){for(let g of e[np])g();e[np]=null}o||(e[ne]&=-73)}catch(l){throw o||Ul(e),l}finally{c!==null&&(m_(c,a),Wk(c)),Sg()}}function Jk(n){return n.type!==2}function lb(n,e){for(let t=IT(n);t!==null;t=_T(t))for(let r=Rt;r<t.length;r++){let i=t[r];db(i,e)}}function Xk(n){for(let e=IT(n);e!==null;e=_T(e)){if(!(e[ne]&pl.HasTransplantedViews))continue;let t=e[Oo];for(let r=0;r<t.length;r++){let i=t[r];FN(i)}}}function eO(n,e,t){let r=Ir(e,n);db(r,t)}function db(n,e){Dg(n)&&Up(n,e)}function Up(n,e){let r=n[ae],i=n[ne],o=n[mi],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Yf(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)Zk(r,n,r.template,n[Ht]);else if(i&8192){lb(n,1);let a=r.components;a!==null&&hb(n,a,1)}}function hb(n,e,t){for(let r=0;r<e.length;r++)eO(n,e[r],t)}function Yg(n,e){let t=JD()?64:1088;for(n[_n].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=Ca(n);if(Dp(n)&&!r)return n;n=r}return null}var Di=class{get rootNodes(){let e=this._lView,t=e[ae];return Tl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ht]}set context(e){this._lView[Ht]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[dt];if(Hn(e)){let t=e[fl],r=t?t.indexOf(this):-1;r>-1&&(Il(e,r),ll(t,r))}this._attachedToViewContainer=!1}Bg(this._lView[ae],this._lView)}onDestroy(e){HD(this._lView,e)}markForCheck(){Yg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){bp(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,ub(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Dp(this._lView),t=this._lView[gi];t!==null&&!e&&Ug(t,this._lView),FT(this._lView[ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e;let t=Dp(this._lView),r=this._lView[gi];r!==null&&!t&&LT(r,this._lView),bp(this._lView)}},Ti=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=rO;let n=e;return n})(),tO=Ti,nO=class extends tO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Kg(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Di(i)}};function rO(){return Kl(_t(),ue())}function Kl(n,e){return n.type&4?new nO(e,n,Bo(n,e)):null}var jG=new RegExp(`^(\\d+)*(${SP}|${CP})*(.*)`);var iO=()=>null;function bl(n,e){return iO(n,e)}var Sa=class{},fb=new G("",{providedIn:"root",factory:()=>!1});var pb=new G(""),Bp=class{},Cl=class{};function oO(n){let e=Error(`No component factory found for ${Et(n)}.`);return e[sO]=n,e}var sO="ngComponent";var $p=class{resolveComponentFactory(e){throw oO(e)}},dm=class dm{};dm.NULL=new $p;var Fo=dm,Lo=class{},Ql=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>aO();let n=e;return n})();function aO(){let n=ue(),e=_t(),t=Ir(e.index,n);return(yr(t)?t:n)[ke]}var cO=(()=>{let e=class e{};e.\u0275prov=Z({token:e,providedIn:"root",factory:()=>null});let n=e;return n})(),cp={};var H_=new Set;function Yl(n){H_.has(n)||(H_.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function gb(n){let e=!0;return setTimeout(()=>{e&&(e=!1,n())}),typeof di.requestAnimationFrame=="function"&&di.requestAnimationFrame(()=>{e&&(e=!1,n())}),()=>{e=!1}}function G_(n){let e=!0;return queueMicrotask(()=>{e&&n()}),()=>{e=!1}}function W_(...n){}var Ie=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lt(!1),this.onMicrotaskEmpty=new lt(!1),this.onStable=new lt(!1),this.onError=new lt(!1),typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,dO(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new te(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,uO,W_,W_);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},uO={};function Zg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function lO(n){n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,Zone.root.run(()=>{gb(()=>{n.callbackScheduled=!1,qp(n),n.isCheckStableRunning=!0,Zg(n),n.isCheckStableRunning=!1})}),qp(n))}function dO(n){let e=()=>{lO(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(hO(a))return t.invokeTask(i,o,s,a);try{return K_(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Q_(n)}},onInvoke:(t,r,i,o,s,a,c)=>{try{return K_(n),t.invoke(i,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!fO(a)&&e(),Q_(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,qp(n),Zg(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function qp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function K_(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Q_(n){n._nesting--,Zg(n)}var zp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lt,this.onMicrotaskEmpty=new lt,this.onStable=new lt,this.onError=new lt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function hO(n){return mb(n,"__ignore_ng_zone__")}function fO(n){return mb(n,"__scheduler_tick__")}function mb(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var yb=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=Z({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();function Hp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=gp(i,a);else if(o==2){let c=a,l=e[++s];r=gp(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Sl=class extends Fo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=pi(e);return new Aa(t,this.ngModule)}};function Y_(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function pO(n){let e=n.toLowerCase();return e==="svg"?BD:e==="math"?PN:null}var Gp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Ol(r);let i=this.injector.get(e,cp,r);return i!==cp||t===cp?i:this.parentInjector.get(e,t,r)}},Aa=class extends Cl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=Y_(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Y_(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=hN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=pe(null);try{i=i||this.ngModule;let s=i instanceof Nt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Gp(e,s):e,c=a.get(Lo,null);if(c===null)throw new te(407,!1);let l=a.get(cO,null),d=a.get(yb,null),f=a.get(Sa,null),g={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},y=c.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",A=r?yk(y,r,this.componentDef.encapsulation,a):OT(y,_,pO(_)),b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let P=null;A!==null&&(P=Fg(A,a,!0));let j=Hg(0,null,null,1,0,null,null,null,null,null,null),O=Hl(null,j,null,b,null,null,g,y,a,null,P);Cg(O);let B,Q;try{let H=this.componentDef,I,v=null;H.findHostDirectiveDefs?(I=[],v=new Map,H.findHostDirectiveDefs(H,I,v),I.push(H)):I=[H];let E=gO(O,A),D=mO(E,A,H,I,O,g,y);Q=_g(j,It),A&&wO(y,H,A,r),t!==void 0&&EO(Q,this.ngContentSelectors,t),B=vO(D,H,I,v,O,[IO]),Wg(j,O,null)}finally{Sg()}return new Wp(this.componentType,B,Bo(Q,O),O,Q)}finally{pe(o)}}},Wp=class extends Bp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Di(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Gg(o[ae],o,i,e,t),this.previousInputValues.set(e,t);let s=Ir(this._tNode.index,o);Yg(s,1)}}get injector(){return new li(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function gO(n,e){let t=n[ae],r=It;return n[r]=e,ja(t,r,2,"#host",null)}function mO(n,e,t,r,i,o,s){let a=i[ae];yO(r,n,e,s);let c=null;e!==null&&(c=Fg(e,i[ko]));let l=o.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=Hl(i,JT(t),null,d,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&Vp(a,n,r.length-1),Wl(i,f),i[n.index]=f}function yO(n,e,t,r){for(let i of n)e.mergedAttrs=Ia(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Hp(e,e.mergedAttrs,!0),t!==null&&zT(r,t,e))}function vO(n,e,t,r,i,o){let s=_t(),a=i[ae],c=Wt(s,i);eb(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,g=Ei(i,a,f,s);_i(g,i)}tb(a,i,s),c&&_i(c,i);let l=Ei(i,a,s.directiveStart+s.componentOffset,s);if(n[Ht]=i[Ht]=l,o!==null)for(let d of o)d(l,e);return QT(a,s,i),l}function wO(n,e,t,r){if(r)wp(n,t,["ng-version","18.0.2"]);else{let{attrs:i,classes:o}=fN(e.selectors[0]);i&&wp(n,t,i),o&&o.length>0&&qT(n,t,o.join(" "))}}function EO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function IO(){let n=_t();Mg(ue()[ae],n)}var Wn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=_O;let n=e;return n})();function _O(){let n=_t();return wb(n,ue())}var DO=Wn,vb=class extends DO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Bo(this._hostTNode,this._hostLView)}get injector(){return new li(this._hostTNode,this._hostLView)}get parentInjector(){let e=Rg(this._hostTNode,this._hostLView);if(aT(e)){let t=yl(e,this._hostLView),r=ml(e),i=t[ae].data[r+8];return new li(i,t)}else return new li(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Z_(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Rt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=bl(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Dl(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!xN(e),a;if(s)a=t;else{let _=t||{};a=_.index,r=_.injector,i=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef}let c=s?e:new Aa(pi(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let A=(s?l:this.parentInjector).get(Nt,null);A&&(o=A)}let d=pi(c.componentType??{}),f=bl(this._lContainer,d?.id??null),g=f?.firstChild??null,y=c.create(l,i,g,o);return this.insertImpl(y.hostView,a,Dl(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(ON(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[dt],l=new vb(c,c[Pt],c[dt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Qg(s,i,o,r),e.attachToViewContainerRef(),yD(up(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Z_(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Il(this._lContainer,t);r&&(ll(up(this._lContainer),t),Bg(r[ae],r))}detach(e){let t=this._adjustIndex(e,-1),r=Il(this._lContainer,t);return r&&ll(up(this._lContainer),t)!=null?new Di(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Z_(n){return n[fl]}function up(n){return n[fl]||(n[fl]=[])}function wb(n,e){let t,r=e[n.index];return Hn(r)?t=r:(t=nb(r,e,null,n),e[n.index]=t,Wl(e,t)),bO(t,e,n,r),new vb(t,n,e)}function TO(n,e){let t=n[ke],r=t.createComment(""),i=Wt(e,n),o=$g(t,i);return _l(t,o,r,sk(t,i),!1),r}var bO=AO,CO=()=>!1;function SO(n,e,t){return CO(n,e,t)}function AO(n,e,t,r){if(n[yi])return;let i;t.type&8?i=Dn(r):i=TO(e,t),n[yi]=i}var Kp=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Qp=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Jg(e,t).matches!==null&&this.queries[t].setDirty()}},Al=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=FO(e):this.predicate=e}},Yp=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Zp=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,xO(t,o)),this.matchTNodeWithReadOption(e,t,ol(t,e,o,!1,!1))}else r===Ti?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ol(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Dr||i===Wn||i===Ti&&t.type&4)this.addMatch(t.index,-2);else{let o=ol(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function xO(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function MO(n,e){return n.type&11?Bo(n,e):n.type&4?Kl(n,e):null}function RO(n,e,t,r){return t===-1?MO(e,n):t===-2?NO(n,e,r):Ei(n,n[ae],t,e)}function NO(n,e,t){if(t===Dr)return Bo(e,n);if(t===Ti)return Kl(e,n);if(t===Wn)return wb(e,n)}function Eb(n,e,t,r){let i=e[Bn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let d=o[l];a.push(RO(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function Jp(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=Eb(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],d=e[-c];for(let f=Rt;f<d.length;f++){let g=d[f];g[gi]===g[dt]&&Jp(g[ae],g,l,r)}if(d[Oo]!==null){let f=d[Oo];for(let g=0;g<f.length;g++){let y=f[g];Jp(y[ae],y,l,r)}}}}}return r}function PO(n,e){return n[Bn].queries[e].queryList}function Ib(n,e,t){let r=new Np((t&4)===4);return Ek(n,e,r,r.destroy),(e[Bn]??=new Qp).queries.push(new Kp(r))-1}function kO(n,e,t){let r=$e();return r.firstCreatePass&&(_b(r,new Al(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),Ib(r,ue(),e)}function OO(n,e,t,r){let i=$e();if(i.firstCreatePass){let o=_t();_b(i,new Al(e,t,r),o.index),LO(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return Ib(i,ue(),t)}function FO(n){return n.split(",").map(e=>e.trim())}function _b(n,e,t){n.queries===null&&(n.queries=new Yp),n.queries.track(new Zp(e,t))}function LO(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Jg(n,e){return n.queries.getByIndex(e)}function VO(n,e){let t=n[ae],r=Jg(t,e);return r.crossesNgTemplate?Jp(t,n,e,[]):Eb(t,n,r,e)}function jO(n){return typeof n=="function"&&n[Qf]!==void 0}function Db(n){return jO(n)&&typeof n.set=="function"}function UO(n){return Object.getPrototypeOf(n.prototype).constructor}function BO(n){let e=UO(n.type),t=!0,r=[n];for(;e;){let i;if(vr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new te(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=el(n.inputs),s.inputTransforms=el(n.inputTransforms),s.declaredInputs=el(n.declaredInputs),s.outputs=el(n.outputs);let a=i.hostBindings;a&&GO(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&zO(n,c),l&&HO(n,l),$O(n,i),MR(n.outputs,i.outputs),vr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===BO&&(t=!1)}}e=Object.getPrototypeOf(e)}qO(r)}function $O(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function qO(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ia(i.hostAttrs,t=Ia(t,i.hostAttrs))}}function el(n){return n===Mo?{}:n===Mt?[]:n}function zO(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function HO(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function GO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var wr=class{},xa=class{};var Xp=class extends wr{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Sl(this);let i=SD(e);this._bootstrapComponents=kT(i.bootstrap),this._r3Injector=mT(e,t,[{provide:wr,useValue:this},{provide:Fo,useValue:this.componentFactoryResolver},...r],Et(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},eg=class extends xa{constructor(e){super(),this.moduleType=e}create(e){return new Xp(this.moduleType,e,[])}};var xl=class extends wr{constructor(e){super(),this.componentFactoryResolver=new Sl(this),this.instance=null;let t=new _a([...e.providers,{provide:wr,useValue:this},{provide:Fo,useValue:this.componentFactoryResolver}],e.parent||Eg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Xg(n,e,t=null){return new xl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Tr=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new rt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Tb(n){return em(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function WO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function em(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function tm(n,e,t){return n[e]=t}function KO(n,e){return n[e]}function Tn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function bb(n,e,t,r){let i=Tn(n,e,t);return Tn(n,e+1,r)||i}function QO(n){return(n.flags&32)===32}function YO(n,e,t,r,i,o,s,a,c){let l=e.consts,d=ja(e,n,4,s||null,a||null);XT(e,t,d,gl(l,c)),Mg(e,d);let f=d.tView=Hg(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function Cb(n,e,t,r,i,o,s,a,c,l){let d=t+It,f=e.firstCreatePass?YO(d,e,n,r,i,o,s,a,c):e.data[d];Oa(f,!1);let g=JO(e,n,f,t);Ag()&&qg(e,n,g,f),_i(g,n);let y=nb(g,n,g,f);return n[d]=y,Wl(n,y),SO(y,f,n),Ig(f)&&YT(e,n,f),c!=null&&ZT(n,f,l),f}function ZO(n,e,t,r,i,o,s,a){let c=ue(),l=$e(),d=gl(l.consts,o);return Cb(c,l,n,e,t,r,i,d,s,a),ZO}var JO=XO;function XO(n,e,t,r){return xg(!0),e[ke].createComment("")}function Sb(n,e,t,r){let i=ue(),o=Fa();if(Tn(i,o,e)){let s=$e(),a=La();Ok(a,i,n,e,t,r)}return Sb}function nm(n,e,t,r){return Tn(n,Fa(),t)?e+hi(t)+r:Dt}function Ab(n,e,t,r,i,o){let s=GN(),a=bb(n,s,t,i);return Tg(2),a?e+hi(t)+r+hi(i)+o:Dt}function tl(n,e){return n<<17|e<<2}function bi(n){return n>>17&32767}function e1(n){return(n&2)==2}function t1(n,e){return n&131071|e<<17}function tg(n){return n|2}function Vo(n){return(n&131068)>>2}function lp(n,e){return n&-131069|e<<2}function n1(n){return(n&1)===1}function ng(n){return n|1}function r1(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=bi(s),c=Vo(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Na(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let g=bi(n[a+1]);n[r+1]=tl(g,a),g!==0&&(n[g+1]=lp(n[g+1],r)),n[a+1]=t1(n[a+1],r)}else n[r+1]=tl(a,0),a!==0&&(n[a+1]=lp(n[a+1],r)),a=r;else n[r+1]=tl(c,0),a===0?a=r:n[c+1]=lp(n[c+1],r),c=r;l&&(n[r+1]=tg(n[r+1])),J_(n,d,r,!0),J_(n,d,r,!1),i1(e,d,n,r,o),s=tl(a,c),o?e.classBindings=s:e.styleBindings=s}function i1(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Na(o,e)>=0&&(t[r+1]=ng(t[r+1]))}function J_(n,e,t,r){let i=n[t+1],o=e===null,s=r?bi(i):Vo(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];o1(c,e)&&(a=!0,n[s+1]=r?ng(l):tg(l)),s=r?bi(l):Vo(l)}a&&(n[t+1]=r?tg(i):ng(i))}function o1(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Na(n,e)>=0:!1}var rn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function s1(n){return n.substring(rn.key,rn.keyEnd)}function a1(n){return c1(n),xb(n,Mb(n,0,rn.textEnd))}function xb(n,e){let t=rn.textEnd;return t===e?-1:(e=rn.keyEnd=u1(n,rn.key=e,t),Mb(n,e,t))}function c1(n){rn.key=0,rn.keyEnd=0,rn.value=0,rn.valueEnd=0,rn.textEnd=n.length}function Mb(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function u1(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function l1(n,e,t){let r=ue(),i=Fa();if(Tn(r,i,e)){let o=$e(),s=La();Gl(o,s,r,n,e,r[ke],t,!1)}return l1}function rg(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Gg(n,t,o[s],s,r)}function Rb(n,e,t){return Pb(n,e,t,!1),Rb}function d1(n,e){return Pb(n,e,null,!0),d1}function BG(n){kb(y1,Nb,n,!0)}function Nb(n,e){for(let t=a1(e);t>=0;t=xb(e,t))Fl(n,s1(e),!0)}function Pb(n,e,t,r){let i=ue(),o=$e(),s=Tg(2);if(o.firstUpdatePass&&Fb(o,n,s,r),e!==Dt&&Tn(i,s,e)){let a=o.data[_r()];Lb(o,a,i,i[ke],n,i[s+1]=w1(e,t),r,s)}}function kb(n,e,t,r){let i=$e(),o=Tg(2);i.firstUpdatePass&&Fb(i,null,o,r);let s=ue();if(t!==Dt&&Tn(s,o,t)){let a=i.data[_r()];if(Vb(a,r)&&!Ob(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=gp(c,t||"")),rg(i,a,s,t,r)}else v1(i,a,s,s[ke],s[o+1],s[o+1]=m1(n,e,t),r,o)}}function Ob(n,e){return e>=n.expandoStartIndex}function Fb(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[_r()],s=Ob(n,t);Vb(o,r)&&e===null&&!s&&(e=!1),e=h1(i,o,e,r),r1(i,o,e,t,s,r)}}function h1(n,e,t,r){let i=ZN(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=dp(null,n,e,t,r),t=Ma(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=dp(i,n,e,t,r),o===null){let c=f1(n,e,r);c!==void 0&&Array.isArray(c)&&(c=dp(null,n,e,c[1],r),c=Ma(c,e.attrs,r),p1(n,e,r,c))}else o=g1(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function f1(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Vo(r)!==0)return n[bi(r)]}function p1(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[bi(i)]=r}function g1(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ma(r,s,t)}return Ma(r,e.attrs,t)}function dp(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ma(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ma(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Fl(n,s,t?!0:e[++o]))}return n===void 0?null:n}function m1(n,e,t){if(t==null||t==="")return Mt;let r=[],i=$o(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function y1(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Fl(n,r,t)}function v1(n,e,t,r,i,o,s,a){i===Dt&&(i=Mt);let c=0,l=0,d=0<i.length?i[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let g=c<i.length?i[c+1]:void 0,y=l<o.length?o[l+1]:void 0,_=null,A;d===f?(c+=2,l+=2,g!==y&&(_=f,A=y)):f===null||d!==null&&d<f?(c+=2,_=d):(l+=2,_=f,A=y),_!==null&&Lb(n,e,t,r,_,A,s,a),d=c<i.length?i[c]:null,f=l<o.length?o[l]:null}}function Lb(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=n1(l)?X_(c,e,t,i,Vo(l),s):void 0;if(!Ml(d)){Ml(o)||e1(l)&&(o=X_(c,null,t,i,a,s));let f=$D(_r(),t);hk(r,s,f,i,o)}}function X_(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=t[i+1];g===Dt&&(g=f?Mt:void 0);let y=f?ep(g,r):d===r?g:void 0;if(l&&!Ml(y)&&(y=ep(c,r)),Ml(y)&&(a=y,s))return a;let _=n[i+1];i=s?bi(_):Vo(_)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=ep(c,r))}return a}function Ml(n){return n!==void 0}function w1(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Et($o(n)))),n}function Vb(n,e){return(n.flags&(e?8:16))!==0}function $G(n,e,t){let r=ue(),i=nm(r,n,e,t);kb(Fl,Nb,i,!0)}function qG(n,e){Yl("NgControlFlow");let t=ue(),r=Fa(),i=t[r]!==Dt?t[r]:-1,o=i!==-1?eD(t,It+i):void 0,s=0;if(Tn(t,r,n)){let a=pe(null);try{if(o!==void 0&&qk(o,s),n!==-1){let c=It+n,l=eD(t,c),d=E1(t[ae],c),f=bl(l,d.tView.ssrId),g=Kg(t,d,e,{dehydratedView:f});Qg(l,g,s,Dl(d,f))}}finally{pe(a)}}else if(o!==void 0){let a=$k(o,s);a!==void 0&&(a[Ht]=e)}}function eD(n,e){return n[e]}function E1(n,e){return _g(n,e)}function I1(n,e,t,r,i,o){let s=e.consts,a=gl(s,i),c=ja(e,n,2,r,a);return XT(e,t,c,gl(s,o)),c.attrs!==null&&Hp(c,c.attrs,!1),c.mergedAttrs!==null&&Hp(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function jb(n,e,t,r){let i=ue(),o=$e(),s=It+n,a=i[ke],c=o.firstCreatePass?I1(s,o,i,e,t,r):o.data[s],l=_1(o,i,c,a,e,n);i[s]=l;let d=Ig(c);return Oa(c,!0),zT(a,l,c),!QO(c)&&Ag()&&qg(o,i,l,c),jN()===0&&_i(l,i),UN(),d&&(YT(o,i,c),QT(o,c,i)),r!==null&&ZT(i,c),jb}function Ub(){let n=_t();YD()?ZD():(n=n.parent,Oa(n,!1));let e=n;$N(e)&&qN(),BN();let t=$e();return t.firstCreatePass&&(Mg(t,n),FD(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&oP(e)&&rg(t,e,ue(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&sP(e)&&rg(t,e,ue(),e.stylesWithoutHost,!1),Ub}function rm(n,e,t,r){return jb(n,e,t,r),Ub(),rm}var _1=(n,e,t,r,i,o)=>(xg(!0),OT(r,i,tP()));function zG(){return ue()}var Rl="en-US";var D1=Rl;function T1(n){typeof n=="string"&&(D1=n.toLowerCase().replace(/_/g,"-"))}var b1=(n,e,t)=>{};function Bb(n,e,t,r){let i=ue(),o=$e(),s=_t();return $b(o,i,i[ke],s,n,e,r),Bb}function C1(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[hl],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function $b(n,e,t,r,i,o,s){let a=Ig(r),l=n.firstCreatePass&&ob(n),d=e[Ht],f=ib(e),g=!0;if(r.type&3||s){let A=Wt(r,e),b=s?s(A):A,P=f.length,j=s?B=>s(Dn(B[r.index])):r.index,O=null;if(!s&&a&&(O=C1(n,e,i,r.index)),O!==null){let B=O.__ngLastListenerFn__||O;B.__ngNextListenerFn__=o,O.__ngLastListenerFn__=o,g=!1}else{o=nD(r,e,d,o),b1(A,i,o);let B=t.listen(b,i,o);f.push(o,B),l&&l.push(i,j,P,P+1)}}else o=nD(r,e,d,o);let y=r.outputs,_;if(g&&y!==null&&(_=y[i])){let A=_.length;if(A)for(let b=0;b<A;b+=2){let P=_[b],j=_[b+1],Q=e[P][j].subscribe(o),H=f.length;f.push(o,Q),l&&l.push(i,r.index,H,-(H+1))}}}function tD(n,e,t,r){let i=pe(null);try{return wn(6,e,t),t(r)!==!1}catch(o){return sb(n,o),!1}finally{wn(7,e,t),pe(i)}}function nD(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Ir(n.index,e):e;Yg(s,5);let a=tD(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=tD(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function HG(n=1){return XN(n)}function S1(n,e){let t=null,r=aN(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?_D(n,o,!0):lN(r,o))return i}return t}function GG(n){let e=ue()[Gt][Pt];if(!e.projection){let t=n?n.length:1,r=e.projection=ZR(t,null),i=r.slice(),o=e.child;for(;o!==null;){let s=n?S1(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function WG(n,e=0,t,r,i,o){let s=ue(),a=$e(),c=r?n+1:null;c!==null&&Cb(s,a,c,r,i,o,null,t);let l=ja(a,It+n,16,null,t||null);l.projection===null&&(l.projection=e),ZD();let f=!s[Da]||KD();s[Gt][Pt].projection[l.projection]===null&&c!==null?A1(s,a,c):f&&(l.flags&32)!==32&&lk(a,s,l)}function A1(n,e,t){let r=It+t,i=e.data[r],o=n[r],s=bl(o,i.tView.ssrId),a=Kg(n,i,void 0,{dehydratedView:s});Qg(o,a,0,Dl(i,s))}function x1(n,e,t){return qb(n,"",e,"",t),x1}function qb(n,e,t,r,i){let o=ue(),s=nm(o,e,t,r);if(s!==Dt){let a=$e(),c=La();Gl(a,c,o,n,s,o[ke],i,!1)}return qb}function M1(n,e,t,r,i,o,s){let a=ue(),c=Ab(a,e,t,r,i,o);if(c!==Dt){let l=$e(),d=La();Gl(l,d,a,n,c,a[ke],s,!1)}return M1}function R1(n,e,t,r){OO(n,e,t,r)}function KG(n,e,t){kO(n,e,t)}function N1(n){let e=ue(),t=$e(),r=XD();bg(r+1);let i=Jg(t,r);if(n.dirty&&kN(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=VO(e,r);n.reset(o,wP),n.notifyOnChanges()}return!0}return!1}function P1(){return PO(ue(),XD())}function k1(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function QG(n){let e=HN();return qD(e,It+n)}function YG(n,e=""){let t=ue(),r=$e(),i=n+It,o=r.firstCreatePass?ja(r,i,1,e,null):r.data[i],s=O1(r,t,o,e,n);t[i]=s,Ag()&&qg(r,t,s,o),Oa(o,!1)}var O1=(n,e,t,r,i)=>(xg(!0),YP(e[ke],r));function F1(n){return zb("",n,""),F1}function zb(n,e,t){let r=ue(),i=nm(r,n,e,t);return i!==Dt&&ab(r,_r(),i),zb}function L1(n,e,t,r,i){let o=ue(),s=Ab(o,n,e,t,r,i);return s!==Dt&&ab(o,_r(),s),L1}function V1(n,e,t){Db(e)&&(e=e());let r=ue(),i=Fa();if(Tn(r,i,e)){let o=$e(),s=La();Gl(o,s,r,n,e,r[ke],t,!1)}return V1}function ZG(n,e){let t=Db(n);return t&&n.set(e),t}function j1(n,e){let t=ue(),r=$e(),i=_t();return $b(r,t,t[ke],i,n,e),j1}function U1(n,e,t){let r=$e();if(r.firstCreatePass){let i=vr(n);ig(t,r.data,r.blueprint,i,!0),ig(e,r.data,r.blueprint,i,!1)}}function ig(n,e,t,r,i){if(n=wt(n),Array.isArray(n))for(let o=0;o<n.length;o++)ig(n[o],e,t,r,i);else{let o=$e(),s=ue(),a=_t(),c=Po(n)?n:wt(n.provide),l=PD(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Po(n)||!n.multi){let y=new wi(l,i,ht),_=fp(c,e,i?d:d+g,f);_===-1?(Ap(wl(a,s),o,c),hp(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[_]=y,s[_]=y)}else{let y=fp(c,e,d+g,f),_=fp(c,e,d,d+g),A=y>=0&&t[y],b=_>=0&&t[_];if(i&&!b||!i&&!A){Ap(wl(a,s),o,c);let P=q1(i?$1:B1,t.length,i,r,l);!i&&b&&(t[_].providerFactory=P),hp(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(P),s.push(P)}else{let P=Hb(t[i?_:y],l,!i&&r);hp(o,n,y>-1?y:_,P)}!i&&r&&b&&t[_].componentProviders++}}}function hp(n,e,t,r){let i=Po(e),o=IN(e);if(i||o){let c=(o?wt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function Hb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function fp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function B1(n,e,t,r){return og(this.multi,[])}function $1(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Ei(t,t[ae],this.providerFactory.index,r);o=a.slice(0,s),og(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],og(i,o);return o}function og(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function q1(n,e,t,r,i){let o=new wi(n,t,ht);return o.multi=[],o.index=e,o.componentProviders=0,Hb(o,i,r&&!t),o}function JG(n,e=[]){return t=>{t.providersResolver=(r,i)=>U1(r,i?i(n):n,e)}}var z1=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=MD(!1,r.type),o=i.length>0?Xg([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Z({token:e,providedIn:"environment",factory:()=>new e(U(Nt))});let n=e;return n})();function Gb(n){Yl("NgStandalone"),n.getStandaloneInjector=e=>e.get(z1).getOrCreateStandaloneInjector(n)}function XG(n,e,t){let r=Bl()+n,i=ue();return i[r]===Dt?tm(i,r,t?e.call(t):e()):KO(i,r)}function e3(n,e,t,r){return Kb(ue(),Bl(),n,e,t,r)}function t3(n,e,t,r,i){return H1(ue(),Bl(),n,e,t,r,i)}function Wb(n,e){let t=n[e];return t===Dt?void 0:t}function Kb(n,e,t,r,i,o){let s=e+t;return Tn(n,s,i)?tm(n,s+1,o?r.call(o,i):r(i)):Wb(n,s+1)}function H1(n,e,t,r,i,o,s){let a=e+t;return bb(n,a,i,o)?tm(n,a+2,s?r.call(s,i,o):r(i,o)):Wb(n,a+2)}function n3(n,e){let t=$e(),r,i=n+It;t.firstCreatePass?(r=G1(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=fi(r.type,!0)),s,a=xt(ht);try{let c=vl(!1),l=o();return vl(c),k1(t,ue(),i,l),l}finally{xt(a)}}function G1(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function r3(n,e,t){let r=n+It,i=ue(),o=qD(i,r);return W1(i,r)?Kb(i,Bl(),e,o.transform,t,o):o.transform(t)}function W1(n,e){return n[ae].data[e].pure}function i3(n,e){return Kl(n,e)}var Er=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Qb=new Er("18.0.2"),Zl=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();var Yb=new G("");function qo(n){return!!n&&typeof n.then=="function"}function im(n){return!!n&&typeof n.subscribe=="function"}var Zb=new G(""),Jb=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=V(Zb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(qo(s))r.push(s);else if(im(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Jl=new G("");function K1(){v_(()=>{throw new te(600,!1)})}function Q1(n){return n.isBoundToModule}var Y1=10;function Z1(n,e,t){try{let r=t();return qo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Si=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(yT),this.afterRenderEffectManager=V(yb),this.zonelessEnabled=V(fb),this.externalTestViews=new Set,this.beforeRender=new Ue,this.afterTick=new Ue,this.componentTypes=[],this.components=[],this.isStable=V(Tr).hasPendingTasks.pipe(Y(r=>!r)),this._injector=V(Nt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Cl;if(!this._injector.get(Jb).done){let y=!o&&CD(r),_=!1;throw new te(405,_)}let a;o?a=r:a=this._injector.get(Fo).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=Q1(a)?void 0:this._injector.get(wr),l=i||a.selector,d=a.create(Ii.NULL,[],l,c),f=d.location.nativeElement,g=d.injector.get(Yb,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),pp(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new te(101,!1);let i=pe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,pe(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(Lo,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<Y1;){let a=o===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:l}of this._views)J1(c,l,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>ba(c))&&(s.execute(),!this.allViews.some(({_lView:c})=>ba(c))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;pp(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Jl,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>pp(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new te(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function pp(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function J1(n,e,t,r){if(!t&&!ba(n))return;ub(n,e,t&&!r?0:1)}var sg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},om=(()=>{let e=class e{compileModuleSync(r){return new eg(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=SD(r),s=kT(o.declarations).reduce((a,c)=>{let l=pi(c);return l&&a.push(new Aa(l)),a},[]);return new sg(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var X1=(()=>{let e=class e{constructor(){this.zone=V(Ie),this.changeDetectionScheduler=V(Sa),this.applicationRef=V(Si)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function eF({ngZoneFactory:n,ignoreChangesOutsideZone:e}){return n??=()=>new Ie(nF()),[{provide:Ie,useFactory:n},{provide:Ro,multi:!0,useFactory:()=>{let t=V(X1,{optional:!0});return()=>t.initialize()}},{provide:Ro,multi:!0,useFactory:()=>{let t=V(rF);return()=>{t.initialize()}}},{provide:yT,useFactory:tF},e===!0?{provide:pb,useValue:!0}:[]]}function tF(){let n=V(Ie),e=V($n);return t=>n.runOutsideAngular(()=>e.handleError(t))}function nF(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var rF=(()=>{let e=class e{constructor(){this.subscription=new Le,this.initialized=!1,this.zone=V(Ie),this.pendingTasks=V(Tr)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ie.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var iF=(()=>{let e=class e{constructor(){this.appRef=V(Si),this.taskService=V(Tr),this.ngZone=V(Ie),this.zonelessEnabled=V(fb),this.disableScheduling=V(pb,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Le,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof zp||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?G_:gb;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Ie.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(i),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,G_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function oF(){return typeof $localize<"u"&&$localize.locale||Rl}var sm=new G("",{providedIn:"root",factory:()=>V(sm,he.Optional|he.SkipSelf)||oF()});var Xb=new G("");var al=null;function sF(n=[],e){return Ii.create({name:e,providers:[{provide:Ll,useValue:"platform"},{provide:Xb,useValue:new Set([()=>al=null])},...n]})}function aF(n=[]){if(al)return al;let e=sF(n);return al=e,K1(),cF(e),e}function cF(n){n.get(kg,null)?.forEach(t=>t())}function am(){return!1}var zo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=uF;let n=e;return n})();function uF(n){return lF(_t(),ue(),(n&16)===16)}function lF(n,e,t){if(jl(n)&&!t){let r=Ir(n.index,e);return new Di(r,r)}else if(n.type&47){let r=e[Gt];return new Di(r,e)}return null}var ag=class{constructor(){}supports(e){return Tb(e)}create(e){return new cg(e)}},dF=(n,e)=>e,cg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||dF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<rD(r,i,o)?t:r,a=rD(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,_=y+g;d<=_&&_<l&&(o[g]=y+1)}let f=s.previousIndex;o[f]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Tb(e))throw new te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,WO(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new ug(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Nl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Nl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ug=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},lg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Nl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new lg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function rD(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var dg=class{constructor(){}supports(e){return e instanceof Map||em(e)}create(){return new hg}},hg=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||em(e)))throw new te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new fg(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},fg=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function iD(){return new cm([new ag])}var cm=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||iD()),deps:[[e,new gg,new jo]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new te(901,!1)}};e.\u0275prov=Z({token:e,providedIn:"root",factory:iD});let n=e;return n})();function oD(){return new um([new dg])}var um=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||oD()),deps:[[e,new gg,new jo]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i)return i;throw new te(901,!1)}};e.\u0275prov=Z({token:e,providedIn:"root",factory:oD});let n=e;return n})();function eC(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=aF(r),o=[eF({}),{provide:Sa,useExisting:iF},...t||[]],a=new xl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Ie);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get($n,null),d;c.runOutsideAngular(()=>{d=c.onError.subscribe({next:y=>{l.handleError(y)}})});let f=()=>a.destroy(),g=i.get(Xb);return g.add(f),a.onDestroy(()=>{d.unsubscribe(),g.delete(f)}),Z1(l,c,()=>{let y=a.get(Jb);return y.runInitializers(),y.donePromise.then(()=>{let _=a.get(sm,Rl);T1(_||Rl);let A=a.get(Si);return e!==void 0&&A.bootstrap(e),A})})})}catch(e){return Promise.reject(e)}}function tC(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function lm(n){let e=pe(null);try{return n()}finally{pe(e)}}var cC=null;function Ho(){return cC}function uC(n){cC??=n}var Xl=class{};var Ot=new G(""),lC=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:()=>V(pF),providedIn:"platform"});let n=e;return n})();var pF=(()=>{let e=class e extends lC{constructor(){super(),this._doc=V(Ot),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ho().getBaseHref(this._doc)}onPopState(r){let i=Ho().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Ho().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:()=>new e,providedIn:"platform"});let n=e;return n})();function dC(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function nC(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ai(n){return n&&n[0]!=="?"?"?"+n:n}var ed=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:()=>V(hC),providedIn:"root"});let n=e;return n})(),gF=new G(""),hC=(()=>{let e=class e extends ed{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??V(Ot).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return dC(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Ai(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Ai(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Ai(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(U(lC),U(gF,8))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Ua=(()=>{let e=class e{constructor(r){this._subject=new lt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=vF(nC(rC(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Ai(i))}normalize(r){return e.stripTrailingSlash(yF(this._basePath,rC(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ai(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ai(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Ai,e.joinWithSlash=dC,e.stripTrailingSlash=nC,e.\u0275fac=function(i){return new(i||e)(U(ed))},e.\u0275prov=Z({token:e,factory:()=>mF(),providedIn:"root"});let n=e;return n})();function mF(){return new Ua(U(ed))}function yF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function rC(n){return n.replace(/\/index.html$/,"")}function vF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function td(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var hm=/\s+/,iC=[],C3=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=iC,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(hm):iC}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(hm):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(hm).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(ht(Dr),ht(Ql))},e.\u0275dir=Ci({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let n=e;return n})();var fm=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},S3=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new fm(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),oC(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);oC(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ht(Wn),ht(Ti),ht(cm))},e.\u0275dir=Ci({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function oC(n,e){n.context.$implicit=e.item}var A3=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new pm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){sC("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){sC("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ht(Wn),ht(Ti))},e.\u0275dir=Ci({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),pm=class{constructor(){this.$implicit=null,this.ngIf=null}};function sC(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Et(e)}'.`)}var x3=(()=>{let e=class e{constructor(r){this._viewContainerRef=r,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(r){if(this._shouldRecreateView(r)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(r){return!!r.ngTemplateOutlet||!!r.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(r,i,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,o):!1,get:(r,i,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,o)}})}};e.\u0275fac=function(i){return new(i||e)(ht(Wn))},e.\u0275dir=Ci({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[ka]});let n=e;return n})();function wF(n,e){return new te(2100,!1)}var gm=class{createSubscription(e,t){return lm(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){lm(()=>e.unsubscribe())}},mm=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},EF=new mm,IF=new gm,M3=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(qo(r))return EF;if(im(r))return IF;throw wF(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(ht(zo,16))},e.\u0275pipe=vg({name:"async",type:e,pure:!1,standalone:!0});let n=e;return n})();function _F(n,e){return{key:n,value:e}}var R3=(()=>{let e=class e{constructor(r){this.differs=r,this.keyValues=[],this.compareFn=aC}transform(r,i=aC){if(!r||!(r instanceof Map)&&typeof r!="object")return null;this.differ??=this.differs.find(r).create();let o=this.differ.diff(r),s=i!==this.compareFn;return o&&(this.keyValues=[],o.forEachItem(a=>{this.keyValues.push(_F(a.key,a.currentValue))})),(o||s)&&(this.keyValues.sort(i),this.compareFn=i),this.keyValues}};e.\u0275fac=function(i){return new(i||e)(ht(um,16))},e.\u0275pipe=vg({name:"keyvalue",type:e,pure:!1,standalone:!0});let n=e;return n})();function aC(n,e){let t=n.key,r=e.key;if(t===r)return 0;if(t===void 0)return 1;if(r===void 0)return-1;if(t===null)return 1;if(r===null)return-1;if(typeof t=="string"&&typeof r=="string")return t<r?-1:1;if(typeof t=="number"&&typeof r=="number")return t-r;if(typeof t=="boolean"&&typeof r=="boolean")return t<r?-1:1;let i=String(t),o=String(r);return i==o?0:i<o?-1:1}var DF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=an({type:e}),e.\u0275inj=sn({});let n=e;return n})(),ym="browser",TF="server";function N3(n){return n===ym}function Cr(n){return n===TF}var Go=class{};var $a=class{},rd=class{},Kn=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var wm=class{encodeKey(e){return fC(e)}encodeValue(e){return fC(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function CF(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var SF=/%(\d[a-f0-9])/gi,AF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function fC(n){return encodeURIComponent(n).replace(SF,(e,t)=>AF[t]??e)}function nd(n){return`${n}`}var Ar=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new wm,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=CF(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(nd):[nd(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(nd(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(nd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Em=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function xF(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function pC(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function gC(n){return typeof Blob<"u"&&n instanceof Blob}function mC(n){return typeof FormData<"u"&&n instanceof FormData}function MF(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ba=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(xF(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Kn,this.context??=new Em,!this.params)this.params=new Ar,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||pC(this.body)||gC(this.body)||mC(this.body)||MF(this.body)?this.body:this.body instanceof Ar?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||mC(this.body)?null:gC(this.body)?this.body.type||null:pC(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ar?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,y)=>g.set(y,e.setHeaders[y]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,y)=>g.set(y,e.setParams[y]),d)),new n(t,r,s,{params:d,headers:l,context:f,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},xr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(xr||{}),qa=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Kn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},id=class n extends qa{constructor(e={}){super(e),this.type=xr.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},za=class n extends qa{constructor(e={}){super(e),this.type=xr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Sr=class extends qa{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},IC=200,RF=204;function vm(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var NF=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof Ba)s=r;else{let l;o.headers instanceof Kn?l=o.headers:l=new Kn(o.headers);let d;o.params&&(o.params instanceof Ar?d=o.params:d=new Ar({fromObject:o.params})),s=new Ba(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=ee(s).pipe(hr(l=>this.handler.handle(l)));if(r instanceof Ba||o.observe==="events")return a;let c=a.pipe(Xe(l=>l instanceof za));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(Y(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(Y(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(Y(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(Y(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Ar().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,vm(o,i))}post(r,i,o={}){return this.request("POST",r,vm(o,i))}put(r,i,o={}){return this.request("PUT",r,vm(o,i))}};e.\u0275fac=function(i){return new(i||e)(U($a))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let n=e;return n})(),PF=/^\)\]\}',?\n/,kF="X-Request-URL";function yC(n){if(n.url)return n.url;let e=kF.toLocaleLowerCase();return n.headers.get(e)}var OF=(()=>{let e=class e{constructor(){this.fetchImpl=V(Im,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=V(Ie)}handle(r){return new re(i=>{let o=new AbortController;return this.doRequest(r,o.signal,i).then(_m,s=>i.error(new Sr({error:s}))),()=>o.abort()})}doRequest(r,i,o){return N(this,null,function*(){let s=this.createRequestInit(r),a;try{let _=this.fetchImpl(r.urlWithParams,W({signal:i},s));FF(_),o.next({type:xr.Sent}),a=yield _}catch(_){o.error(new Sr({error:_,status:_.status??0,statusText:_.statusText,url:r.urlWithParams,headers:_.headers}));return}let c=new Kn(a.headers),l=a.statusText,d=yC(a)??r.urlWithParams,f=a.status,g=null;if(r.reportProgress&&o.next(new id({headers:c,status:f,statusText:l,url:d})),a.body){let _=a.headers.get("content-length"),A=[],b=a.body.getReader(),P=0,j,O,B=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>N(this,null,function*(){for(;;){let{done:H,value:I}=yield b.read();if(H)break;if(A.push(I),P+=I.length,r.reportProgress){O=r.responseType==="text"?(O??"")+(j??=new TextDecoder).decode(I,{stream:!0}):void 0;let v=()=>o.next({type:xr.DownloadProgress,total:_?+_:void 0,loaded:P,partialText:O});B?B.run(v):v()}}}));let Q=this.concatChunks(A,P);try{let H=a.headers.get("Content-Type")??"";g=this.parseBody(r,Q,H)}catch(H){o.error(new Sr({error:H,headers:new Kn(a.headers),status:a.status,statusText:a.statusText,url:yC(a)??r.urlWithParams}));return}}f===0&&(f=g?IC:0),f>=200&&f<300?(o.next(new za({body:g,headers:c,status:f,statusText:l,url:d})),o.complete()):o.error(new Sr({error:g,headers:c,status:f,statusText:l,url:d}))})}parseBody(r,i,o){switch(r.responseType){case"json":let s=new TextDecoder().decode(i).replace(PF,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:o});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},o=r.withCredentials?"include":void 0;if(r.headers.forEach((s,a)=>i[s]=a.join(",")),i.Accept??="application/json, text/plain, */*",!i["Content-Type"]){let s=r.detectContentTypeHeader();s!==null&&(i["Content-Type"]=s)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:o}}concatChunks(r,i){let o=new Uint8Array(i),s=0;for(let a of r)o.set(a,s),s+=a.length;return o}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let n=e;return n})(),Im=class{};function _m(){}function FF(n){n.then(_m,_m)}function _C(n,e){return e(n)}function LF(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function VF(n,e,t){return(r,i)=>cn(t,()=>e(r,o=>n(o,i)))}var jF=new G(""),Dm=new G(""),UF=new G(""),DC=new G("",{providedIn:"root",factory:()=>!0});function BF(){let n=null;return(e,t)=>{n===null&&(n=(V(jF,{optional:!0})??[]).reduceRight(LF,_C));let r=V(Tr);if(V(DC)){let o=r.add();return n(e,t).pipe(pr(()=>r.remove(o)))}else return n(e,t)}}var vC=(()=>{let e=class e extends $a{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=V(Tr),this.contributeToStability=V(DC)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Dm),...this.injector.get(UF,[])]));this.chain=i.reduceRight((o,s)=>VF(o,s,this.injector),_C)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(pr(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(U(rd),U(Nt))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let n=e;return n})();var $F=/^\)\]\}',?\n/;function qF(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var wC=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new te(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?we(i.\u0275loadImpl()):ee(null)).pipe(Pe(()=>new re(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((b,P)=>a.setRequestHeader(b,P.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let b=r.detectContentTypeHeader();b!==null&&a.setRequestHeader("Content-Type",b)}if(r.responseType){let b=r.responseType.toLowerCase();a.responseType=b!=="json"?b:"text"}let c=r.serializeBody(),l=null,d=()=>{if(l!==null)return l;let b=a.statusText||"OK",P=new Kn(a.getAllResponseHeaders()),j=qF(a)||r.url;return l=new id({headers:P,status:a.status,statusText:b,url:j}),l},f=()=>{let{headers:b,status:P,statusText:j,url:O}=d(),B=null;P!==RF&&(B=typeof a.response>"u"?a.responseText:a.response),P===0&&(P=B?IC:0);let Q=P>=200&&P<300;if(r.responseType==="json"&&typeof B=="string"){let H=B;B=B.replace($F,"");try{B=B!==""?JSON.parse(B):null}catch(I){B=H,Q&&(Q=!1,B={error:I,text:B})}}Q?(s.next(new za({body:B,headers:b,status:P,statusText:j,url:O||void 0})),s.complete()):s.error(new Sr({error:B,headers:b,status:P,statusText:j,url:O||void 0}))},g=b=>{let{url:P}=d(),j=new Sr({error:b,status:a.status||0,statusText:a.statusText||"Unknown Error",url:P||void 0});s.error(j)},y=!1,_=b=>{y||(s.next(d()),y=!0);let P={type:xr.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(P.total=b.total),r.responseType==="text"&&a.responseText&&(P.partialText=a.responseText),s.next(P)},A=b=>{let P={type:xr.UploadProgress,loaded:b.loaded};b.lengthComputable&&(P.total=b.total),s.next(P)};return a.addEventListener("load",f),a.addEventListener("error",g),a.addEventListener("timeout",g),a.addEventListener("abort",g),r.reportProgress&&(a.addEventListener("progress",_),c!==null&&a.upload&&a.upload.addEventListener("progress",A)),a.send(c),s.next({type:xr.Sent}),()=>{a.removeEventListener("error",g),a.removeEventListener("abort",g),a.removeEventListener("load",f),a.removeEventListener("timeout",g),r.reportProgress&&(a.removeEventListener("progress",_),c!==null&&a.upload&&a.upload.removeEventListener("progress",A)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(U(Go))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let n=e;return n})(),TC=new G(""),zF="XSRF-TOKEN",HF=new G("",{providedIn:"root",factory:()=>zF}),GF="X-XSRF-TOKEN",WF=new G("",{providedIn:"root",factory:()=>GF}),od=class{},KF=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=td(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(U(Ot),U(kt),U(HF))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let n=e;return n})();function QF(n,e){let t=n.url.toLowerCase();if(!V(TC)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=V(od).getToken(),i=V(WF);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var bC=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(bC||{});function YF(n,e){return{\u0275kind:n,\u0275providers:e}}function ZF(...n){let e=[NF,wC,vC,{provide:$a,useExisting:vC},{provide:rd,useFactory:()=>V(OF,{optional:!0})??V(wC)},{provide:Dm,useValue:QF,multi:!0},{provide:TC,useValue:!0},{provide:od,useClass:KF}];for(let t of n)e.push(...t.\u0275providers);return Pa(e)}var EC=new G("");function JF(){return YF(bC.LegacyInterceptors,[{provide:EC,useFactory:BF},{provide:Dm,useExisting:EC,multi:!0}])}var W3=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=an({type:e}),e.\u0275inj=sn({providers:[ZF(JF())]});let n=e;return n})();var Cm=class extends Xl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Sm=class n extends Cm{static makeCurrent(){uC(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=XF();return t==null?null:eL(t)}resetBaseElement(){Ha=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return td(document.cookie,e)}},Ha=null;function XF(){return Ha=Ha||document.querySelector("base"),Ha?Ha.getAttribute("href"):null}function eL(n){return new URL(n,document.baseURI).pathname}var tL=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let n=e;return n})(),Am=new G(""),xC=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new te(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(U(Am),U(Ie))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let n=e;return n})(),sd=class{constructor(e){this._doc=e}},Tm="ng-app-id",MC=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Cr(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Tm}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Tm),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Tm,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(U(Ot),U(Pg),U(Og,8),U(kt))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let n=e;return n})(),bm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Mm=/%COMP%/g,RC="%COMP%",nL=`_nghost-${RC}`,rL=`_ngcontent-${RC}`,iL=!0,oL=new G("",{providedIn:"root",factory:()=>iL});function sL(n){return rL.replace(Mm,n)}function aL(n){return nL.replace(Mm,n)}function NC(n,e){return e.map(t=>t.replace(Mm,n))}var CC=(()=>{let e=class e{constructor(r,i,o,s,a,c,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Cr(c),this.defaultRenderer=new Ga(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===In.ShadowDom&&(i=Re(W({},i),{encapsulation:In.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof ad?o.applyToHost(r):o instanceof Wa&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case In.Emulated:s=new ad(l,d,i,this.appId,f,a,c,g);break;case In.ShadowDom:return new xm(l,d,r,i,a,c,this.nonce,g);default:s=new Wa(l,d,i,f,a,c,g);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(U(xC),U(MC),U(Pg),U(oL),U(Ot),U(kt),U(Ie),U(Og))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let n=e;return n})(),Ga=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(bm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(SC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(SC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new te(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=bm[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=bm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(qn.DashCase|qn.Important)?e.style.setProperty(t,r,i&qn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&qn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Ho().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function SC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var xm=class extends Ga{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=NC(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Wa=class extends Ga{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?NC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ad=class extends Wa{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=sL(l),this.hostAttr=aL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},cL=(()=>{let e=class e extends sd{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(U(Ot))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let n=e;return n})(),AC=["alt","control","meta","shift"],uL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},dL=(()=>{let e=class e extends sd{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ho().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),AC.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=uL[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),AC.forEach(a=>{if(a!==o){let c=lL[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(U(Ot))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let n=e;return n})();function v8(n,e){return eC(W({rootComponent:n},hL(e)))}function hL(n){return{appProviders:[...yL,...n?.providers??[]],platformProviders:mL}}function fL(){Sm.makeCurrent()}function pL(){return new $n}function gL(){return TT(document),document}var mL=[{provide:kt,useValue:ym},{provide:kg,useValue:fL,multi:!0},{provide:Ot,useFactory:gL,deps:[]}];var yL=[{provide:Ll,useValue:"root"},{provide:$n,useFactory:pL,deps:[]},{provide:Am,useClass:cL,multi:!0,deps:[Ot,Ie,kt]},{provide:Am,useClass:dL,multi:!0,deps:[Ot]},CC,MC,xC,{provide:Lo,useExisting:CC},{provide:Go,useClass:tL,deps:[]},[]];var PC=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(U(Ot))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var de="primary",lc=Symbol("RouteTitle"),Om=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Jo(n){return new Om(n)}function wL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function EL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!bn(n[t],e[t]))return!1;return!0}function bn(n,e){let t=n?Fm(n):void 0,r=e?Fm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!BC(n[i],e[i]))return!1;return!0}function Fm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function BC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function $C(n){return n.length>0?n[n.length-1]:null}function Rr(n){return Uf(n)?n:qo(n)?we(Promise.resolve(n)):ee(n)}var IL={exact:zC,subset:HC},qC={exact:_L,subset:DL,ignored:()=>!0};function kC(n,e,t){return IL[t.paths](n.root,e.root,t.matrixParams)&&qC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function _L(n,e){return bn(n,e)}function zC(n,e,t){if(!Mi(n.segments,e.segments)||!ld(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!zC(n.children[r],e.children[r],t))return!1;return!0}function DL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>BC(n[t],e[t]))}function HC(n,e,t){return GC(n,e,e.segments,t)}function GC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Mi(i,t)||e.hasChildren()||!ld(i,t,r))}else if(n.segments.length===t.length){if(!Mi(n.segments,t)||!ld(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!HC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Mi(n.segments,i)||!ld(n.segments,i,r)||!n.children[de]?!1:GC(n.children[de],e,o,r)}}function ld(n,e,t){return e.every((r,i)=>qC[t](n[i].parameters,r.parameters))}var Mr=class{constructor(e=new Ee([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Jo(this.queryParams),this._queryParamMap}toString(){return CL.serialize(this)}},Ee=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dd(this)}},xi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Jo(this.parameters),this._parameterMap}toString(){return KC(this)}};function TL(n,e){return Mi(n,e)&&n.every((t,r)=>bn(t.parameters,e[r].parameters))}function Mi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function bL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===de&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==de&&(t=t.concat(e(i,r)))}),t}var cy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:()=>new ec,providedIn:"root"});let n=e;return n})(),ec=class{parse(e){let t=new Vm(e);return new Mr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ka(e.root,!0)}`,r=xL(e.queryParams),i=typeof e.fragment=="string"?`#${SL(e.fragment)}`:"";return`${t}${r}${i}`}},CL=new ec;function dd(n){return n.segments.map(e=>KC(e)).join("/")}function Ka(n,e){if(!n.hasChildren())return dd(n);if(e){let t=n.children[de]?Ka(n.children[de],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==de&&r.push(`${i}:${Ka(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=bL(n,(r,i)=>i===de?[Ka(n.children[de],!1)]:[`${i}:${Ka(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[de]!=null?`${dd(n)}/${t[0]}`:`${dd(n)}/(${t.join("//")})`}}function WC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cd(n){return WC(n).replace(/%3B/gi,";")}function SL(n){return encodeURI(n)}function Lm(n){return WC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hd(n){return decodeURIComponent(n)}function OC(n){return hd(n.replace(/\+/g,"%20"))}function KC(n){return`${Lm(n.path)}${AL(n.parameters)}`}function AL(n){return Object.entries(n).map(([e,t])=>`;${Lm(e)}=${Lm(t)}`).join("")}function xL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${cd(t)}=${cd(i)}`).join("&"):`${cd(t)}=${cd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var ML=/^[^\/()?;#]+/;function Rm(n){let e=n.match(ML);return e?e[0]:""}var RL=/^[^\/()?;=#]+/;function NL(n){let e=n.match(RL);return e?e[0]:""}var PL=/^[^=?&#]+/;function kL(n){let e=n.match(PL);return e?e[0]:""}var OL=/^[^&#]+/;function FL(n){let e=n.match(OL);return e?e[0]:""}var Vm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[de]=new Ee(e,t)),r}parseSegment(){let e=Rm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(e),new xi(hd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=NL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Rm(this.remaining);i&&(r=i,this.capture(r))}e[hd(t)]=hd(r)}parseQueryParam(e){let t=kL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=FL(this.remaining);s&&(r=s,this.capture(r))}let i=OC(t),o=OC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Rm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new te(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=de);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[de]:new Ee([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new te(4011,!1)}};function QC(n){return n.segments.length>0?new Ee([],{[de]:n}):n}function YC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=YC(i);if(r===de&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ee(n.segments,e);return LL(t)}function LL(n){if(n.numberOfChildren===1&&n.children[de]){let e=n.children[de];return new Ee(n.segments.concat(e.segments),e.children)}return n}function tc(n){return n instanceof Mr}function VL(n,e,t=null,r=null){let i=ZC(n);return JC(i,e,t,r)}function ZC(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Ee(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=QC(r);return e??i}function JC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Nm(i,i,i,t,r);let o=jL(e);if(o.toRoot())return Nm(i,i,new Ee([],{}),t,r);let s=UL(o,i,n),a=s.processChildren?Za(s.segmentGroup,s.index,o.commands):e0(s.segmentGroup,s.index,o.commands);return Nm(i,s.segmentGroup,a,t,r)}function fd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function nc(n){return typeof n=="object"&&n!=null&&n.outlets}function Nm(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=XC(n,e,t);let a=QC(YC(s));return new Mr(a,o,i)}function XC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=XC(o,e,t)}),new Ee(n.segments,r)}var pd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fd(r[0]))throw new te(4003,!1);let i=r.find(nc);if(i&&i!==$C(r))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function jL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new pd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new pd(t,e,r)}var Qo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function UL(n,e,t){if(n.isAbsolute)return new Qo(e,!0,0);if(!t)return new Qo(e,!1,NaN);if(t.parent===null)return new Qo(t,!0,0);let r=fd(n.commands[0])?0:1,i=t.segments.length-1+r;return BL(t,i,n.numberOfDoubleDots)}function BL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new te(4005,!1);i=r.segments.length}return new Qo(r,!1,i-o)}function $L(n){return nc(n[0])?n[0].outlets:{[de]:n}}function e0(n,e,t){if(n??=new Ee([],{}),n.segments.length===0&&n.hasChildren())return Za(n,e,t);let r=qL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ee(n.segments.slice(0,r.pathIndex),{});return o.children[de]=new Ee(n.segments.slice(r.pathIndex),n.children),Za(o,0,i)}else return r.match&&i.length===0?new Ee(n.segments,{}):r.match&&!n.hasChildren()?jm(n,e,t):r.match?Za(n,0,i):jm(n,e,t)}function Za(n,e,t){if(t.length===0)return new Ee(n.segments,{});{let r=$L(t),i={};if(Object.keys(r).some(o=>o!==de)&&n.children[de]&&n.numberOfChildren===1&&n.children[de].segments.length===0){let o=Za(n.children[de],e,t);return new Ee(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=e0(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ee(n.segments,i)}}function qL(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(nc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!LC(c,l,s))return o;r+=2}else{if(!LC(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function jm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(nc(o)){let c=zL(o.outlets);return new Ee(r,c)}if(i===0&&fd(t[0])){let c=n.segments[e];r.push(new xi(c.path,FC(t[0]))),i++;continue}let s=nc(o)?o.outlets[de]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&fd(a)?(r.push(new xi(s,FC(a))),i+=2):(r.push(new xi(s,{})),i++)}return new Ee(r,{})}function zL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=jm(new Ee([],{}),0,r))}),e}function FC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function LC(n,e,t){return n==t.path&&bn(e,t.parameters)}var Ja="imperative",it=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(it||{}),Kt=class{constructor(e,t){this.id=e,this.url=t}},rc=class extends Kt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=it.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ri=class extends Kt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=it.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Bt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Bt||{}),Um=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Um||{}),Qn=class extends Kt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=it.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ni=class extends Kt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=it.NavigationSkipped}},ic=class extends Kt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=it.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},gd=class extends Kt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bm=class extends Kt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$m=class extends Kt{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=it.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},qm=class extends Kt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zm=class extends Kt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hm=class{constructor(e){this.route=e,this.type=it.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Gm=class{constructor(e){this.route=e,this.type=it.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Wm=class{constructor(e){this.snapshot=e,this.type=it.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Km=class{constructor(e){this.snapshot=e,this.type=it.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qm=class{constructor(e){this.snapshot=e,this.type=it.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ym=class{constructor(e){this.snapshot=e,this.type=it.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var oc=class{},Xo=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};var Zm=class{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new _d(this.injector),this.attachRef=null}},_d=(()=>{let e=class e{constructor(r){this.parentInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Zm(this.parentInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(U(Nt))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),md=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Jm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Jm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Xm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Xm(e,this._root).map(t=>t.value)}};function Jm(n,e){if(n===e.value)return e;for(let t of e.children){let r=Jm(n,t);if(r)return r}return null}function Xm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Xm(n,t);if(r.length)return r.unshift(e),r}return[]}var Ut=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ko(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var yd=class extends md{constructor(e,t){super(e),this.snapshot=t,uy(this,e)}toString(){return this.snapshot.toString()}};function t0(n){let e=HL(n),t=new rt([new xi("",{})]),r=new rt({}),i=new rt({}),o=new rt({}),s=new rt(""),a=new es(t,r,o,s,i,de,n,e.root);return a.snapshot=e.root,new yd(new Ut(a,[]),e)}function HL(n){let e={},t={},r={},i="",o=new Yo([],e,r,i,t,de,n,null,{});return new wd("",new Ut(o,[]))}var es=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Y(l=>l[lc]))??ee(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(e=>Jo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(e=>Jo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function vd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:W(W({},e.params),n.params),data:W(W({},e.data),n.data),resolve:W(W(W(W({},n.data),e.data),i?.data),n._resolvedData)}:r={params:W({},n.params),data:W({},n.data),resolve:W(W({},n.data),n._resolvedData??{})},i&&r0(i)&&(r.resolve[lc]=i.title),r}var Yo=class{get title(){return this.data?.[lc]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Jo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Jo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},wd=class extends md{constructor(e,t){super(t),this.url=e,uy(this,t)}toString(){return n0(this._root)}};function uy(n,e){e.value._routerState=n,e.children.forEach(t=>uy(n,t))}function n0(n){let e=n.children.length>0?` { ${n.children.map(n0).join(", ")} } `:"";return`${n.value}${e}`}function Pm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,bn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),bn(e.params,t.params)||n.paramsSubject.next(t.params),EL(e.url,t.url)||n.urlSubject.next(t.url),bn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ey(n,e){let t=bn(n.params,e.params)&&TL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||ey(n.parent,e.parent))}function r0(n){return typeof n.title=="string"||n.title===null}var GL=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=de,this.activateEvents=new lt,this.deactivateEvents=new lt,this.attachEvents=new lt,this.detachEvents=new lt,this.parentContexts=V(_d),this.location=V(Wn),this.changeDetector=V(zo),this.inputBinder=V(ly,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new ty(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ci({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ka]});let n=e;return n})(),ty=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===es?this.route:e===_d?this.childContexts:this.parent.get(e,t)}},ly=new G("");function WL(n,e,t){let r=sc(n,e._root,t?t._root:void 0);return new yd(r,e)}function sc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=KL(n,e,t);return new Ut(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>sc(n,a)),s}}let r=QL(e.value),i=e.children.map(o=>sc(n,o));return new Ut(r,i)}}function KL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return sc(n,r,i);return sc(n,r)})}function QL(n){return new es(new rt(n.url),new rt(n.params),new rt(n.queryParams),new rt(n.fragment),new rt(n.data),n.outlet,n.component,n)}var ac=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},i0="ngNavigationCancelingError";function Ed(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=tc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=o0(!1,Bt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function o0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[i0]=!0,t.cancellationCode=e,t}function YL(n){return s0(n)&&tc(n.url)}function s0(n){return!!n&&n[i0]}var ZL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=DD({type:e,selectors:[["ng-component"]],standalone:!0,features:[Gb],decls:1,vars:0,template:function(i,o){i&1&&rm(0,"router-outlet")},dependencies:[GL],encapsulation:2});let n=e;return n})();function JL(n,e){return n.providers&&!n._injector&&(n._injector=Xg(n.providers,e,`Route: ${n.path}`)),n._injector??e}function dy(n){let e=n.children&&n.children.map(dy),t=e?Re(W({},n),{children:e}):W({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==de&&(t.component=ZL),t}function un(n){return n.outlet||de}function XL(n,e){let t=n.filter(r=>un(r)===e);return t.push(...n.filter(r=>un(r)!==e)),t}function dc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var eV=(n,e,t,r)=>Y(i=>(new ny(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),ny=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Pm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ko(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ko(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ko(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ko(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ym(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Km(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Pm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Pm(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=dc(i.snapshot);s.attachRef=null,s.route=i,s.injector=a??s.injector,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Id=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Zo=class{constructor(e,t){this.component=e,this.route=t}};function tV(n,e,t){let r=n._root,i=e?e._root:null;return Qa(r,i,t,[r.value])}function nV(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ns(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!lD(n)?n:e.get(n):r}function Qa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ko(e);return n.children.forEach(s=>{rV(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Xa(a,t.getContext(s),i)),i}function rV(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=iV(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Id(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Qa(n,e,a?a.children:null,r,i):Qa(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Zo(a.outlet.component,s))}else s&&Xa(e,a,i),i.canActivateChecks.push(new Id(r)),o.component?Qa(n,null,a?a.children:null,r,i):Qa(n,null,t,r,i);return i}function iV(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Mi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Mi(n.url,e.url)||!bn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ey(n,e)||!bn(n.queryParams,e.queryParams);case"paramsChange":default:return!ey(n,e)}}function Xa(n,e,t){let r=Ko(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Xa(s,e.children.getContext(o),t):Xa(s,null,t):Xa(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Zo(e.outlet.component,i)):t.canDeactivateChecks.push(new Zo(null,i)):t.canDeactivateChecks.push(new Zo(null,i))}function hc(n){return typeof n=="function"}function oV(n){return typeof n=="boolean"}function sV(n){return n&&hc(n.canLoad)}function aV(n){return n&&hc(n.canActivate)}function cV(n){return n&&hc(n.canActivateChild)}function uV(n){return n&&hc(n.canDeactivate)}function lV(n){return n&&hc(n.canMatch)}function a0(n){return n instanceof Un||n?.name==="EmptyError"}var ud=Symbol("INITIAL_VALUE");function ts(){return Pe(n=>Hu(n.map(e=>e.pipe(yn(1),ci(ud)))).pipe(Y(e=>{for(let t of e)if(t!==!0){if(t===ud)return ud;if(t===!1||dV(t))return t}return!0}),Xe(e=>e!==ud),yn(1)))}function dV(n){return tc(n)||n instanceof ac}function hV(n,e){return Be(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ee(Re(W({},t),{guardsResult:!0})):fV(s,r,i,n).pipe(Be(a=>a&&oV(a)?pV(r,o,n,e):ee(a)),Y(a=>Re(W({},t),{guardsResult:a})))})}function fV(n,e,t,r){return we(n).pipe(Be(i=>wV(i.component,i.route,t,e,r)),zt(i=>i!==!0,!0))}function pV(n,e,t,r){return we(e).pipe(hr(i=>Do(mV(i.route.parent,r),gV(i.route,r),vV(n,i.path,t),yV(n,i.route,t))),zt(i=>i!==!0,!0))}function gV(n,e){return n!==null&&e&&e(new Qm(n)),ee(!0)}function mV(n,e){return n!==null&&e&&e(new Wm(n)),ee(!0)}function yV(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(o=>Gu(()=>{let s=dc(e)??t,a=ns(o,s),c=aV(a)?a.canActivate(e,n):cn(s,()=>a(e,n));return Rr(c).pipe(zt())}));return ee(i).pipe(ts())}function vV(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>nV(s)).filter(s=>s!==null).map(s=>Gu(()=>{let a=s.guards.map(c=>{let l=dc(s.node)??t,d=ns(c,l),f=cV(d)?d.canActivateChild(r,n):cn(l,()=>d(r,n));return Rr(f).pipe(zt())});return ee(a).pipe(ts())}));return ee(o).pipe(ts())}function wV(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ee(!0);let s=o.map(a=>{let c=dc(e)??i,l=ns(a,c),d=uV(l)?l.canDeactivate(n,e,t,r):cn(c,()=>l(n,e,t,r));return Rr(d).pipe(zt())});return ee(s).pipe(ts())}function EV(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let o=i.map(s=>{let a=ns(s,n),c=sV(a)?a.canLoad(e,t):cn(n,()=>a(e,t));return Rr(c)});return ee(o).pipe(ts(),c0(r))}function c0(n){return kf(Ge(e=>{if(typeof e!="boolean")throw Ed(n,e)}),Y(e=>e===!0))}function IV(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let o=i.map(s=>{let a=ns(s,n),c=lV(a)?a.canMatch(e,t):cn(n,()=>a(e,t));return Rr(c)});return ee(o).pipe(ts(),c0(r))}var cc=class{constructor(e){this.segmentGroup=e||null}},uc=class extends Error{constructor(e){super(),this.urlTree=e}};function Wo(n){return Io(new cc(n))}function _V(n){return Io(new te(4e3,!1))}function DV(n){return Io(o0(!1,Bt.GuardRejected))}var ry=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[de])return _V(`${e.redirectTo}`);i=i.children[de]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:y,data:_,title:A}=i,b=cn(o,()=>a({params:y,data:_,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:A}));if(b instanceof Mr)throw new uc(b);t=b}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new uc(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Mr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ee(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new te(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},iy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function TV(n,e,t,r,i){let o=hy(n,e,t);return o.matched?(r=JL(e,r),IV(r,e,t,i).pipe(Y(s=>s===!0?o:W({},iy)))):ee(o)}function hy(n,e,t){if(e.path==="**")return bV(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?W({},iy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||wL)(t,n,e);if(!i)return W({},iy);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?W(W({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function bV(n){return{matched:!0,parameters:n.length>0?$C(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function VC(n,e,t,r){return t.length>0&&AV(n,t,r)?{segmentGroup:new Ee(e,SV(r,new Ee(t,n.children))),slicedSegments:[]}:t.length===0&&xV(n,t,r)?{segmentGroup:new Ee(n.segments,CV(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ee(n.segments,n.children),slicedSegments:t}}function CV(n,e,t,r){let i={};for(let o of t)if(Dd(n,e,o)&&!r[un(o)]){let s=new Ee([],{});i[un(o)]=s}return W(W({},r),i)}function SV(n,e){let t={};t[de]=e;for(let r of n)if(r.path===""&&un(r)!==de){let i=new Ee([],{});t[un(r)]=i}return t}function AV(n,e,t){return t.some(r=>Dd(n,e,r)&&un(r)!==de)}function xV(n,e,t){return t.some(r=>Dd(n,e,r))}function Dd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function MV(n,e,t,r){return un(n)!==r&&(r===de||!Dd(e,t,n))?!1:hy(e,n,t).matched}function RV(n,e,t){return e.length===0&&!n.children[t]}var oy=class{};function NV(n,e,t,r,i,o,s="emptyOnly"){return new sy(n,e,t,r,i,s,o).recognize()}var PV=31,sy=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ry(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new te(4002,`'${e.segmentGroup}'`)}recognize(){let e=VC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Y(({children:t,rootSnapshot:r})=>{let i=new Ut(r,t),o=new wd("",i),s=VL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Yo([],Object.freeze({}),Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),de,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,de,t).pipe(Y(r=>({children:r,rootSnapshot:t})),dr(r=>{if(r instanceof uc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof cc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Y(s=>s instanceof Ut?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return we(o).pipe(hr(s=>{let a=r.children[s],c=XL(t,s);return this.processSegmentGroup(e,c,a,s,i)}),ai((s,a)=>(s.push(...a),s)),fr(null),Hf(),Be(s=>{if(s===null)return Wo(r);let a=u0(s);return kV(a),ee(a)}))}processSegment(e,t,r,i,o,s,a){return we(t).pipe(hr(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(dr(l=>{if(l instanceof cc)return ee(null);throw l}))),zt(c=>!!c),dr(c=>{if(a0(c))return RV(r,i,o)?ee(new oy):Wo(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return MV(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Wo(i):Wo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=hy(t,i,o);if(!c)return Wo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>PV&&(this.allowRedirects=!1));let y=new Yo(o,l,Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,jC(i),un(i),i.component??i._loadedComponent??null,i,UC(i)),_=vd(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(_.params),y.data=Object.freeze(_.data);let A=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(Be(b=>this.processSegment(e,r,t,b.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=TV(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Pe(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Pe(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:y}=c,_=new Yo(g,f,Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,jC(r),un(r),r.component??r._loadedComponent??null,r,UC(r)),A=vd(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(A.params),_.data=Object.freeze(A.data);let{segmentGroup:b,slicedSegments:P}=VC(t,g,y,l);if(P.length===0&&b.hasChildren())return this.processChildren(d,l,b,_).pipe(Y(O=>new Ut(_,O)));if(l.length===0&&P.length===0)return ee(new Ut(_,[]));let j=un(r)===o;return this.processSegment(d,l,b,P,j?de:o,!0,_).pipe(Y(O=>new Ut(_,O instanceof Ut?[O]:[])))}))):Wo(t)))}getChildConfig(e,t,r){return t.children?ee({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ee({routes:t._loadedRoutes,injector:t._loadedInjector}):EV(e,t,r,this.urlSerializer).pipe(Be(i=>i?this.configLoader.loadChildren(e,t).pipe(Ge(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):DV(t))):ee({routes:[],injector:e})}};function kV(n){n.sort((e,t)=>e.value.outlet===de?-1:t.value.outlet===de?1:e.value.outlet.localeCompare(t.value.outlet))}function OV(n){let e=n.value.routeConfig;return e&&e.path===""}function u0(n){let e=[],t=new Set;for(let r of n){if(!OV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=u0(r.children);e.push(new Ut(r.value,i))}return e.filter(r=>!t.has(r))}function jC(n){return n.data||{}}function UC(n){return n.resolve||{}}function FV(n,e,t,r,i,o){return Be(s=>NV(n,e,t,r,s.extractedUrl,i,o).pipe(Y(({state:a,tree:c})=>Re(W({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function LV(n,e){return Be(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ee(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of l0(c))s.add(l);let a=0;return we(s).pipe(hr(c=>o.has(c)?VV(c,r,n,e):(c.data=vd(c,c.parent,n).resolve,ee(void 0))),Ge(()=>a++),To(1),Be(c=>a===s.size?ee(t):vt))})}function l0(n){let e=n.children.map(t=>l0(t)).flat();return[n,...e]}function VV(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!r0(i)&&(o[lc]=i.title),jV(o,n,e,r).pipe(Y(s=>(n._resolvedData=s,n.data=vd(n,n.parent,t).resolve,null)))}function jV(n,e,t,r){let i=Fm(n);if(i.length===0)return ee({});let o={};return we(i).pipe(Be(s=>UV(n[s],e,t,r).pipe(zt(),Ge(a=>{if(a instanceof ac)throw Ed(new ec,a);o[s]=a}))),To(1),qf(o),dr(s=>a0(s)?vt:Io(s)))}function UV(n,e,t,r){let i=dc(e)??r,o=ns(n,i),s=o.resolve?o.resolve(e,t):cn(i,()=>o(e,t));return Rr(s)}function km(n){return Pe(e=>{let t=n(e);return t?we(t).pipe(Y(()=>e)):ee(e)})}var d0=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===de);return i}getResolvedTitleForRoute(r){return r.data[lc]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:()=>V(BV),providedIn:"root"});let n=e;return n})(),BV=(()=>{let e=class e extends d0{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(U(PC))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),fy=new G("",{providedIn:"root",factory:()=>({})}),py=new G(""),$V=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(om)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ee(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Rr(r.loadComponent()).pipe(Y(h0),Ge(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),pr(()=>{this.componentLoaders.delete(r)})),o=new wo(i,()=>new Ue).pipe(vo());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ee({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=qV(i,this.compiler,r,this.onLoadEndListener).pipe(pr(()=>{this.childrenLoaders.delete(i)})),a=new wo(s,()=>new Ue).pipe(vo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function qV(n,e,t,r){return Rr(n.loadChildren()).pipe(Y(h0),Be(i=>i instanceof xa||Array.isArray(i)?ee(i):we(e.compileModuleAsync(i))),Y(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(py,[],{optional:!0,self:!0}).flat()),{routes:s.map(dy),injector:o}}))}function zV(n){return n&&typeof n=="object"&&"default"in n}function h0(n){return zV(n)?n.default:n}var gy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:()=>V(HV),providedIn:"root"});let n=e;return n})(),HV=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),GV=new G("");var WV=new G(""),KV=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ue,this.transitionAbortSubject=new Ue,this.configLoader=V($V),this.environmentInjector=V(Nt),this.urlSerializer=V(cy),this.rootContexts=V(_d),this.location=V(Ua),this.inputBindingEnabled=V(ly,{optional:!0})!==null,this.titleStrategy=V(d0),this.options=V(fy,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(gy),this.createViewTransition=V(GV,{optional:!0}),this.navigationErrorHandler=V(WV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ee(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Hm(o)),i=o=>this.events.next(new Gm(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Re(W(W({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new rt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ja,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xe(s=>s.id!==0),Y(s=>Re(W({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Pe(s=>{let a=!1,c=!1;return ee(s).pipe(Pe(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Bt.SupersededByNewNavigation),vt;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Re(W({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new Ni(l.id,this.urlSerializer.serialize(l.rawUrl),g,Um.IgnoredSameUrlNavigation)),l.resolve(!1),vt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ee(l).pipe(Pe(g=>{let y=this.transitions?.getValue();return this.events.next(new rc(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),y!==this.transitions?.getValue()?vt:Promise.resolve(g)}),FV(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=Re(W({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let y=new gd(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:y,source:_,restoredState:A,extras:b}=l,P=new rc(g,this.urlSerializer.serialize(y),_,A);this.events.next(P);let j=t0(this.rootComponentType).snapshot;return this.currentTransition=s=Re(W({},l),{targetSnapshot:j,urlAfterRedirects:y,extras:Re(W({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,ee(s)}else{let g="";return this.events.next(new Ni(l.id,this.urlSerializer.serialize(l.extractedUrl),g,Um.IgnoredByUrlHandlingStrategy)),l.resolve(!1),vt}}),Ge(l=>{let d=new Bm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Y(l=>(this.currentTransition=s=Re(W({},l),{guards:tV(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),hV(this.environmentInjector,l=>this.events.next(l)),Ge(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Ed(this.urlSerializer,l.guardsResult);let d=new $m(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Xe(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Bt.GuardRejected),!1)),km(l=>{if(l.guards.canActivateChecks.length)return ee(l).pipe(Ge(d=>{let f=new qm(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Pe(d=>{let f=!1;return ee(d).pipe(LV(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",Bt.NoDataFromResolver)}}))}),Ge(d=>{let f=new zm(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),km(l=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(Ge(y=>{f.component=y}),Y(()=>{})));for(let y of f.children)g.push(...d(y));return g};return Hu(d(l.targetSnapshot.root)).pipe(fr(null),yn(1))}),km(()=>this.afterPreactivation()),Pe(()=>{let{currentSnapshot:l,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?we(f).pipe(Y(()=>s)):ee(s)}),Y(l=>{let d=WL(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=Re(W({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),Ge(()=>{this.events.next(new oc)}),eV(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),yn(1),Ge({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ri(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Wf(this.transitionAbortSubject.pipe(Ge(l=>{throw l}))),pr(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Bt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),dr(l=>{if(c=!0,s0(l))this.events.next(new Qn(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),YL(l)?this.events.next(new Xo(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let d=new ic(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let f=cn(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof ac){let{message:g,cancellationCode:y}=Ed(this.urlSerializer,f);this.events.next(new Qn(s.id,this.urlSerializer.serialize(s.extractedUrl),g,y)),this.events.next(new Xo(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let g=r.errorHandler(l);s.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return vt}))}))}cancelNavigationTransition(r,i,o){let s=new Qn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function QV(n){return n!==Ja}var YV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:()=>V(ZV),providedIn:"root"});let n=e;return n})(),ay=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},ZV=(()=>{let e=class e extends ay{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ng(e)))(o||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),f0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:()=>V(JV),providedIn:"root"});let n=e;return n})(),JV=(()=>{let e=class e extends f0{constructor(){super(...arguments),this.location=V(Ua),this.urlSerializer=V(cy),this.options=V(fy,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(gy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Mr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=t0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof rc)this.stateMemento=this.createStateMemento();else if(r instanceof Ni)this.rawUrlTree=i.initialUrl;else if(r instanceof gd){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof oc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Qn&&(r.code===Bt.GuardRejected||r.code===Bt.NoDataFromResolver)?this.restoreHistory(i):r instanceof ic?this.restoreHistory(i,!0):r instanceof Ri&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=W(W({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=W(W({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ng(e)))(o||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ya=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ya||{});function XV(n,e){n.events.pipe(Xe(t=>t instanceof Ri||t instanceof Qn||t instanceof ic||t instanceof Ni),Y(t=>t instanceof Ri||t instanceof Ni?Ya.COMPLETE:(t instanceof Qn?t.code===Bt.Redirect||t.code===Bt.SupersededByNewNavigation:!1)?Ya.REDIRECTING:Ya.FAILED),Xe(t=>t!==Ya.REDIRECTING),yn(1)).subscribe(()=>{e()})}function ej(n){throw n}var tj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},p0=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=V(Zl),this.stateManager=V(f0),this.options=V(fy,{optional:!0})||{},this.pendingTasks=V(Tr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(KV),this.urlSerializer=V(cy),this.location=V(Ua),this.urlHandlingStrategy=V(gy),this._events=new Ue,this.errorHandler=this.options.errorHandler||ej,this.navigated=!1,this.routeReuseStrategy=V(YV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(py,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(ly,{optional:!0}),this.eventsSubscription=new Le,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Qn&&i.code!==Bt.Redirect&&i.code!==Bt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ri)this.navigated=!0;else if(i instanceof Xo){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l=W({info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||QV(o.source)},a);this.scheduleNavigation(c,Ja,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}ij(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ja,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=W({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(dy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,f=null;switch(c){case"merge":f=W(W({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let y=o?o.snapshot:this.routerState.snapshot.root;g=ZC(y)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),g=this.currentUrlTree.root}return JC(g,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=tc(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Ja,null,i)}navigate(r,i={skipLocationChange:!1}){return rj(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=W({},tj):i===!1?o=W({},nj):o=i,tc(r))return kC(this.currentUrlTree,r,o);let s=this.parseUrl(r);return kC(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((g,y)=>{c=g,l=y});let f=this.pendingTasks.add();return XV(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function rj(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new te(4008,!1)}function ij(n){return!(n instanceof oc)&&!(n instanceof Xo)}var oj=new G("");function q8(n,...e){return Pa([{provide:py,multi:!0,useValue:n},[],{provide:es,useFactory:sj,deps:[p0]},{provide:Jl,multi:!0,useFactory:aj},e.map(t=>t.\u0275providers)])}function sj(n){return n.routerState.root}function aj(){let n=V(Ii);return e=>{let t=n.get(Si);if(e!==t.components[0])return;let r=n.get(p0),i=n.get(cj);n.get(uj)===1&&r.initialNavigation(),n.get(lj,null,he.Optional)?.setUpPreloading(),n.get(oj,null,he.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var cj=new G("",{factory:()=>new Ue}),uj=new G("",{providedIn:"root",factory:()=>1});var lj=new G("");var dj="firebase",hj="10.12.2";lr(dj,hj,"app");var rs=new Er("ANGULARFIRE2_VERSION");var fj=(n,e)=>{let t=e?[e]:qI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Pi=class{constructor(){return fj(pj)}},pj="app-check";function my(){}var Td=class{zone;delegate;constructor(e,t=Vf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},yy=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",my,{},my,my)),t.pipe(Ge({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},bd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Td(Zone.current)),this.insideAngular=t.run(()=>new Td(Zone.current,mn)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(U(Ie))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function g0(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function e6(n){return n.pipe(jt(g0().outsideAngular))}function Ft(n){return gj(g0())(n)}function gj(n){return function(t){return t=t.lift(new yy(n.ngZone)),t.pipe(tn(n.outsideAngular),jt(n.insideAngular))}}var mj="firebase",yj="10.12.2";St.registerVersion(mj,yj,"app-compat");var vj=["ngOnDestroy"],v0=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(vj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var Cd=class{constructor(e){return e}},is=new G("angularfire2.app.options"),os=new G("angularfire2.app.name");function fc(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=St.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>St.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;wj("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Cd(s)}var wj=(n,...e)=>{am()&&typeof console<"u"&&console[n](...e)},Ej={provide:Cd,useFactory:fc,deps:[is,Ie,[new jo,os]]},u6=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:is,useValue:t},{provide:os,useValue:r}]}}constructor(t){St.registerVersion("angularfire",rs.full,"core"),St.registerVersion("angularfire",rs.full,"app-compat"),St.registerVersion("angular",Qb.full,t.toString())}static \u0275fac=function(r){return new(r||n)(U(kt))};static \u0275mod=an({type:n});static \u0275inj=sn({providers:[Ej]})}return n})();function Sd(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return Ij(i,s)||(y0("error",`${e} was already initialized on the ${t} Firebase App with different settings.${_j?" You may need to reload as Firebase is not HMR aware.":""}`),y0("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function Ij(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var _j=typeof module<"u"&&!!module.hot,y0=(n,...e)=>{am()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var bj=new Map,Cj={activated:!1,tokenObservers:[]},Sj={initialized:!1,enabled:!1};function ln(n){return bj.get(n)||Object.assign({},Cj)}function D0(){return Sj}var Aj="https://content-firebaseappcheck.googleapis.com/v1";var xj="exchangeDebugToken",w0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},w6=24*60*60*1e3;var wy=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new bf,this.pending.promise.catch(t=>{}),yield Mj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new bf,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Mj(n){return new Promise(e=>{setTimeout(e,n)})}var Rj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Nr=new BI("appCheck","AppCheck",Rj);function T0(n){if(!ln(n).activated)throw Nr.create("use-before-activation",{appName:n.name})}function b0(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(y){throw Nr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw Nr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw Nr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Nr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function C0(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Aj}/projects/${t}/apps/${r}:${xj}?key=${i}`,body:{debug_token:e}}}var Nj="firebase-app-check-database",Pj=1,Ey="firebase-app-check-store";var Ad=null;function kj(){return Ad||(Ad=new Promise((n,e)=>{try{let t=indexedDB.open(Nj,Pj);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Nr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Ey,{keyPath:"compositeKey"})}}}catch(t){e(Nr.create("storage-open",{originalErrorMessage:t?.message}))}}),Ad)}function Oj(n,e){return Fj(Lj(n),e)}function Fj(n,e){return N(this,null,function*(){let r=(yield kj()).transaction(Ey,"readwrite"),o=r.objectStore(Ey).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Nr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function Lj(n){return`${n.options.appId}-${n.name}`}var Iy=new _u("@firebase/app-check");function vy(n,e){return Iu()?Oj(n,e).catch(t=>{Iy.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function S0(){return D0().enabled}function A0(){return N(this,null,function*(){let n=D0();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Vj={error:"UNKNOWN_ERROR"};function jj(n){return VI.encodeString(JSON.stringify(n),!1)}function _y(n,e=!1){return N(this,null,function*(){let t=n.app;T0(t);let r=ln(t),i=r.token,o;if(i&&!pc(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(pc(c)?i=c:yield vy(t,void 0))}if(!e&&i&&pc(i))return{token:i.token};let s=!1;if(S0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=b0(C0(t,yield A0()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield vy(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield ln(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Iy.warn(c.message):Iy.error(c),o=c}let a;return i?o?pc(i)?a={token:i.token,internalError:o}:a=I0(o):(a={token:i.token},r.token=i,yield vy(t,i)):a=I0(o),s&&qj(t,a),a})}function Uj(n){return N(this,null,function*(){let e=n.app;T0(e);let{provider:t}=ln(e);if(S0()){let r=yield A0(),{token:i}=yield b0(C0(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function Bj(n,e,t,r){let{app:i}=n,o=ln(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&pc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),E0(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>E0(n))}function x0(n,e){let t=ln(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function E0(n){let{app:e}=n,t=ln(e),r=t.tokenRefresher;r||(r=$j(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function $j(n){let{app:e}=n;return new wy(()=>N(this,null,function*(){let t=ln(e),r;if(t.token?r=yield _y(n,!0):r=yield _y(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ln(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},w0.RETRIAL_MIN_WAIT,w0.RETRIAL_MAX_WAIT)}function qj(n,e){let t=ln(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function pc(n){return n.expireTimeMillis-Date.now()>0}function I0(n){return{token:jj(Vj),error:n}}var Dy=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ln(this.app);for(let t of e)x0(this.app,t.next);return Promise.resolve()}};function zj(n,e){return new Dy(n,e)}function Hj(n){return{getToken:e=>_y(n,e),getLimitedUseToken:()=>Uj(n),addTokenListener:e=>Bj(n,"INTERNAL",e),removeTokenListener:e=>x0(n.app,e)}}var Gj="@firebase/app-check",Wj="0.8.4";var Kj="app-check",_0="app-check-internal";function Qj(){fa(new ri(Kj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return zj(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(_0).initialize()})),fa(new ri(_0,n=>{let e=n.getProvider("app-check").getImmediate();return Hj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),lr(Gj,Wj)}Qj();var Yj=["localhost","0.0.0.0","127.0.0.1"],R6=typeof window<"u"&&Yj.includes(window.location.hostname);var Ty=new G("angularfire2.auth.use-emulator"),by=new G("angularfire2.auth.settings"),Cy=new G("angularfire2.auth.tenant-id"),Sy=new G("angularfire2.auth.langugage-code"),Ay=new G("angularfire2.auth.use-device-language"),xy=new G("angularfire.auth.persistence"),My=(n,e,t,r,i,o,s,a)=>Sd(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))c.settings[l]=d;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),R0=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,d,f,g,y){let _=new Ue,A=ee(void 0).pipe(jt(s.outsideAngular),Pe(()=>o.runOutsideAngular(()=>import("./chunk-GXGZD42Z.js"))),Y(()=>fc(t,o,r)),Y(b=>My(b,o,a,l,d,f,c,g)),Ku({bufferSize:1,refCount:!1}));if(Cr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ee(null);else{A.pipe(zt()).subscribe();let b=A.pipe(Pe(O=>O.getRedirectResult().then(B=>B,()=>null)),Ft,Ku({bufferSize:1,refCount:!1})),P=A.pipe(Pe(O=>new re(B=>({unsubscribe:o.runOutsideAngular(()=>O.onAuthStateChanged(Q=>B.next(Q),Q=>B.error(Q),()=>B.complete()))})))),j=A.pipe(Pe(O=>new re(B=>({unsubscribe:o.runOutsideAngular(()=>O.onIdTokenChanged(Q=>B.next(Q),Q=>B.error(Q),()=>B.complete()))}))));this.authState=b.pipe(Qu(P),tn(s.outsideAngular),jt(s.insideAngular)),this.user=b.pipe(Qu(j),tn(s.outsideAngular),jt(s.insideAngular)),this.idToken=this.user.pipe(Pe(O=>O?we(O.getIdToken()):ee(null))),this.idTokenResult=this.user.pipe(Pe(O=>O?we(O.getIdTokenResult()):ee(null))),this.credential=$f(b,_,this.authState.pipe(Xe(O=>!O))).pipe(Y(O=>O?.user?O:null),tn(s.outsideAngular),jt(s.insideAngular))}return v0(this,A,o,{spy:{apply:(b,P,j)=>{(b.startsWith("signIn")||b.startsWith("createUser"))&&j.then(O=>_.next(O))}}})}static \u0275fac=function(r){return new(r||n)(U(is),U(os,8),U(kt),U(Ie),U(bd),U(Ty,8),U(by,8),U(Cy,8),U(Sy,8),U(Ay,8),U(xy,8),U(Pi,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var N0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},P0={};var Pr,Ry;(function(){var n;function e(I,v){function E(){}E.prototype=v.prototype,I.D=v.prototype,I.prototype=new E,I.prototype.constructor=I,I.C=function(D,T,S){for(var w=Array(arguments.length-2),Fn=2;Fn<arguments.length;Fn++)w[Fn-2]=arguments[Fn];return v.prototype[T].apply(D,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,E){E||(E=0);var D=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)D[T]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(T=0;16>T;++T)D[T]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=I.g[0],E=I.g[1],T=I.g[2];var S=I.g[3],w=v+(S^E&(T^S))+D[0]+3614090360&4294967295;v=E+(w<<7&4294967295|w>>>25),w=S+(T^v&(E^T))+D[1]+3905402710&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(E^S&(v^E))+D[2]+606105819&4294967295,T=S+(w<<17&4294967295|w>>>15),w=E+(v^T&(S^v))+D[3]+3250441966&4294967295,E=T+(w<<22&4294967295|w>>>10),w=v+(S^E&(T^S))+D[4]+4118548399&4294967295,v=E+(w<<7&4294967295|w>>>25),w=S+(T^v&(E^T))+D[5]+1200080426&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(E^S&(v^E))+D[6]+2821735955&4294967295,T=S+(w<<17&4294967295|w>>>15),w=E+(v^T&(S^v))+D[7]+4249261313&4294967295,E=T+(w<<22&4294967295|w>>>10),w=v+(S^E&(T^S))+D[8]+1770035416&4294967295,v=E+(w<<7&4294967295|w>>>25),w=S+(T^v&(E^T))+D[9]+2336552879&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(E^S&(v^E))+D[10]+4294925233&4294967295,T=S+(w<<17&4294967295|w>>>15),w=E+(v^T&(S^v))+D[11]+2304563134&4294967295,E=T+(w<<22&4294967295|w>>>10),w=v+(S^E&(T^S))+D[12]+1804603682&4294967295,v=E+(w<<7&4294967295|w>>>25),w=S+(T^v&(E^T))+D[13]+4254626195&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(E^S&(v^E))+D[14]+2792965006&4294967295,T=S+(w<<17&4294967295|w>>>15),w=E+(v^T&(S^v))+D[15]+1236535329&4294967295,E=T+(w<<22&4294967295|w>>>10),w=v+(T^S&(E^T))+D[1]+4129170786&4294967295,v=E+(w<<5&4294967295|w>>>27),w=S+(E^T&(v^E))+D[6]+3225465664&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^E&(S^v))+D[11]+643717713&4294967295,T=S+(w<<14&4294967295|w>>>18),w=E+(S^v&(T^S))+D[0]+3921069994&4294967295,E=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(E^T))+D[5]+3593408605&4294967295,v=E+(w<<5&4294967295|w>>>27),w=S+(E^T&(v^E))+D[10]+38016083&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^E&(S^v))+D[15]+3634488961&4294967295,T=S+(w<<14&4294967295|w>>>18),w=E+(S^v&(T^S))+D[4]+3889429448&4294967295,E=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(E^T))+D[9]+568446438&4294967295,v=E+(w<<5&4294967295|w>>>27),w=S+(E^T&(v^E))+D[14]+3275163606&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^E&(S^v))+D[3]+4107603335&4294967295,T=S+(w<<14&4294967295|w>>>18),w=E+(S^v&(T^S))+D[8]+1163531501&4294967295,E=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(E^T))+D[13]+2850285829&4294967295,v=E+(w<<5&4294967295|w>>>27),w=S+(E^T&(v^E))+D[2]+4243563512&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^E&(S^v))+D[7]+1735328473&4294967295,T=S+(w<<14&4294967295|w>>>18),w=E+(S^v&(T^S))+D[12]+2368359562&4294967295,E=T+(w<<20&4294967295|w>>>12),w=v+(E^T^S)+D[5]+4294588738&4294967295,v=E+(w<<4&4294967295|w>>>28),w=S+(v^E^T)+D[8]+2272392833&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^E)+D[11]+1839030562&4294967295,T=S+(w<<16&4294967295|w>>>16),w=E+(T^S^v)+D[14]+4259657740&4294967295,E=T+(w<<23&4294967295|w>>>9),w=v+(E^T^S)+D[1]+2763975236&4294967295,v=E+(w<<4&4294967295|w>>>28),w=S+(v^E^T)+D[4]+1272893353&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^E)+D[7]+4139469664&4294967295,T=S+(w<<16&4294967295|w>>>16),w=E+(T^S^v)+D[10]+3200236656&4294967295,E=T+(w<<23&4294967295|w>>>9),w=v+(E^T^S)+D[13]+681279174&4294967295,v=E+(w<<4&4294967295|w>>>28),w=S+(v^E^T)+D[0]+3936430074&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^E)+D[3]+3572445317&4294967295,T=S+(w<<16&4294967295|w>>>16),w=E+(T^S^v)+D[6]+76029189&4294967295,E=T+(w<<23&4294967295|w>>>9),w=v+(E^T^S)+D[9]+3654602809&4294967295,v=E+(w<<4&4294967295|w>>>28),w=S+(v^E^T)+D[12]+3873151461&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^E)+D[15]+530742520&4294967295,T=S+(w<<16&4294967295|w>>>16),w=E+(T^S^v)+D[2]+3299628645&4294967295,E=T+(w<<23&4294967295|w>>>9),w=v+(T^(E|~S))+D[0]+4096336452&4294967295,v=E+(w<<6&4294967295|w>>>26),w=S+(E^(v|~T))+D[7]+1126891415&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~E))+D[14]+2878612391&4294967295,T=S+(w<<15&4294967295|w>>>17),w=E+(S^(T|~v))+D[5]+4237533241&4294967295,E=T+(w<<21&4294967295|w>>>11),w=v+(T^(E|~S))+D[12]+1700485571&4294967295,v=E+(w<<6&4294967295|w>>>26),w=S+(E^(v|~T))+D[3]+2399980690&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~E))+D[10]+4293915773&4294967295,T=S+(w<<15&4294967295|w>>>17),w=E+(S^(T|~v))+D[1]+2240044497&4294967295,E=T+(w<<21&4294967295|w>>>11),w=v+(T^(E|~S))+D[8]+1873313359&4294967295,v=E+(w<<6&4294967295|w>>>26),w=S+(E^(v|~T))+D[15]+4264355552&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~E))+D[6]+2734768916&4294967295,T=S+(w<<15&4294967295|w>>>17),w=E+(S^(T|~v))+D[13]+1309151649&4294967295,E=T+(w<<21&4294967295|w>>>11),w=v+(T^(E|~S))+D[4]+4149444226&4294967295,v=E+(w<<6&4294967295|w>>>26),w=S+(E^(v|~T))+D[11]+3174756917&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~E))+D[2]+718787259&4294967295,T=S+(w<<15&4294967295|w>>>17),w=E+(S^(T|~v))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(T+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var E=v-this.blockSize,D=this.B,T=this.h,S=0;S<v;){if(T==0)for(;S<=E;)i(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<v;)if(D[T++]=I.charCodeAt(S++),T==this.blockSize){i(this,D),T=0;break}}else for(;S<v;)if(D[T++]=I[S++],T==this.blockSize){i(this,D),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var E=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=E&255,E/=256;for(this.u(I),I=Array(16),v=E=0;4>v;++v)for(var D=0;32>D;D+=8)I[E++]=this.g[v]>>>D&255;return I};function o(I,v){var E=a;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=v(I)}function s(I,v){this.h=v;for(var E=[],D=!0,T=I.length-1;0<=T;T--){var S=I[T]|0;D&&S==v||(E[T]=S,D=!1)}this.g=E}var a={};function c(I){return-128<=I&&128>I?o(I,function(v){return new s([v|0],0>v?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return b(l(-I));for(var v=[],E=1,D=0;I>=E;D++)v[D]=I/E|0,E*=4294967296;return new s(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return b(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),D=f,T=0;T<I.length;T+=8){var S=Math.min(8,I.length-T),w=parseInt(I.substring(T,T+S),v);8>S?(S=l(Math.pow(v,S)),D=D.j(S).add(l(w))):(D=D.j(E),D=D.add(l(w)))}return D}var f=c(0),g=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(A(this))return-b(this).m();for(var I=0,v=1,E=0;E<this.g.length;E++){var D=this.i(E);I+=(0<=D?D:4294967296+D)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(A(this))return"-"+b(this).toString(I);for(var v=l(Math.pow(I,6)),E=this,D="";;){var T=B(E,v).g;E=P(E,T.j(v));var S=((0<E.g.length?E.g[0]:E.h)>>>0).toString(I);if(E=T,_(E))return S+D;for(;6>S.length;)S="0"+S;D=S+D}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function A(I){return I.h==-1}n.l=function(I){return I=P(this,I),A(I)?-1:_(I)?0:1};function b(I){for(var v=I.g.length,E=[],D=0;D<v;D++)E[D]=~I.g[D];return new s(E,~I.h).add(g)}n.abs=function(){return A(this)?b(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),E=[],D=0,T=0;T<=v;T++){var S=D+(this.i(T)&65535)+(I.i(T)&65535),w=(S>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);D=w>>>16,S&=65535,w&=65535,E[T]=w<<16|S}return new s(E,E[E.length-1]&-2147483648?-1:0)};function P(I,v){return I.add(b(v))}n.j=function(I){if(_(this)||_(I))return f;if(A(this))return A(I)?b(this).j(b(I)):b(b(this).j(I));if(A(I))return b(this.j(b(I)));if(0>this.l(y)&&0>I.l(y))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,E=[],D=0;D<2*v;D++)E[D]=0;for(D=0;D<this.g.length;D++)for(var T=0;T<I.g.length;T++){var S=this.i(D)>>>16,w=this.i(D)&65535,Fn=I.i(T)>>>16,Ws=I.i(T)&65535;E[2*D+2*T]+=w*Ws,j(E,2*D+2*T),E[2*D+2*T+1]+=S*Ws,j(E,2*D+2*T+1),E[2*D+2*T+1]+=w*Fn,j(E,2*D+2*T+1),E[2*D+2*T+2]+=S*Fn,j(E,2*D+2*T+2)}for(D=0;D<v;D++)E[D]=E[2*D+1]<<16|E[2*D];for(D=v;D<2*v;D++)E[D]=0;return new s(E,0)};function j(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function O(I,v){this.g=I,this.h=v}function B(I,v){if(_(v))throw Error("division by zero");if(_(I))return new O(f,f);if(A(I))return v=B(b(I),v),new O(b(v.g),b(v.h));if(A(v))return v=B(I,b(v)),new O(b(v.g),v.h);if(30<I.g.length){if(A(I)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,D=v;0>=D.l(I);)E=Q(E),D=Q(D);var T=H(E,1),S=H(D,1);for(D=H(D,2),E=H(E,2);!_(D);){var w=S.add(D);0>=w.l(I)&&(T=T.add(E),S=w),D=H(D,1),E=H(E,1)}return v=P(I,T.j(v)),new O(T,v)}for(T=f;0<=I.l(v);){for(E=Math.max(1,Math.floor(I.m()/v.m())),D=Math.ceil(Math.log(E)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),S=l(E),w=S.j(v);A(w)||0<w.l(I);)E-=D,S=l(E),w=S.j(v);_(S)&&(S=g),T=T.add(S),I=P(I,w)}return new O(T,I)}n.A=function(I){return B(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),E=[],D=0;D<v;D++)E[D]=this.i(D)&I.i(D);return new s(E,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),E=[],D=0;D<v;D++)E[D]=this.i(D)|I.i(D);return new s(E,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),E=[],D=0;D<v;D++)E[D]=this.i(D)^I.i(D);return new s(E,this.h^I.h)};function Q(I){for(var v=I.g.length+1,E=[],D=0;D<v;D++)E[D]=I.i(D)<<1|I.i(D-1)>>>31;return new s(E,I.h)}function H(I,v){var E=v>>5;v%=32;for(var D=I.g.length-E,T=[],S=0;S<D;S++)T[S]=0<v?I.i(S+E)>>>v|I.i(S+E+1)<<32-v:I.i(S+E);return new s(T,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ry=P0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,Pr=P0.Integer=s}).apply(typeof N0<"u"?N0:typeof self<"u"?self:typeof window<"u"?window:{});var xd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yn={};var Ny,Py,ss,ky,gc,Md,Oy,Fy,Ly;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof xd=="object"&&xd];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var C=u[m];if(!(C in p))break e;p=p[C]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function o(u,h){u instanceof String&&(u+="");var p=0,m=!1,C={next:function(){if(!m&&p<u.length){var M=p++;return{value:h(M,u[M]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),u.apply(h,C)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function _(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,C,M){for(var L=Array(arguments.length-2),De=2;De<arguments.length;De++)L[De-2]=arguments[De];return h.prototype[C].apply(m,L)}}function A(u){let h=u.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function b(u,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let C=u.length||0,M=m.length||0;u.length=C+M;for(let L=0;L<M;L++)u[C+L]=m[L]}else u.push(m)}}class P{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function j(u){return/^[\s\xa0]*$/.test(u)}function O(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function B(u){return B[" "](u),u}B[" "]=function(){};var Q=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function H(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function I(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,h){let p,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(p in m)u[p]=m[p];for(let M=0;M<E.length;M++)p=E[M],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function T(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function S(u){a.setTimeout(()=>{throw u},0)}function w(){var u=Jh;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Fn{constructor(){this.h=this.g=null}add(h,p){let m=Ws.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var Ws=new P(()=>new fM,u=>u.reset());class fM{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ks,Qs=!1,Jh=new Fn,kE=()=>{let u=a.Promise.resolve(void 0);Ks=()=>{u.then(pM)}};var pM=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(p){S(p)}var h=Ws;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}Qs=!1};function sr(){this.s=this.s,this.C=this.C}sr.prototype.s=!1,sr.prototype.ma=function(){this.s||(this.s=!0,this.N())},sr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var gM=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function Ys(u,h){if(st.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(Q){e:{try{B(h.nodeName);var C=!0;break e}catch{}C=!1}C||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:mM[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ys.aa.h.call(this)}}_(Ys,st);var mM={2:"touch",3:"pen",4:"mouse"};Ys.prototype.h=function(){Ys.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Zs="closure_listenable_"+(1e6*Math.random()|0),yM=0;function vM(u,h,p,m,C){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=C,this.key=++yM,this.da=this.fa=!1}function ru(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function iu(u){this.src=u,this.g={},this.h=0}iu.prototype.add=function(u,h,p,m,C){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var L=ef(u,h,m,C);return-1<L?(h=u[L],p||(h.fa=!1)):(h=new vM(h,this.src,M,!!m,C),h.fa=p,u.push(h)),h};function Xh(u,h){var p=h.type;if(p in u.g){var m=u.g[p],C=Array.prototype.indexOf.call(m,h,void 0),M;(M=0<=C)&&Array.prototype.splice.call(m,C,1),M&&(ru(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function ef(u,h,p,m){for(var C=0;C<u.length;++C){var M=u[C];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==m)return C}return-1}var tf="closure_lm_"+(1e6*Math.random()|0),nf={};function OE(u,h,p,m,C){if(m&&m.once)return LE(u,h,p,m,C);if(Array.isArray(h)){for(var M=0;M<h.length;M++)OE(u,h[M],p,m,C);return null}return p=af(p),u&&u[Zs]?u.K(h,p,l(m)?!!m.capture:!!m,C):FE(u,h,p,!1,m,C)}function FE(u,h,p,m,C,M){if(!h)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,De=of(u);if(De||(u[tf]=De=new iu(u)),p=De.add(h,p,m,L,M),p.proxy)return p;if(m=wM(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)gM||(C=L),C===void 0&&(C=!1),u.addEventListener(h.toString(),m,C);else if(u.attachEvent)u.attachEvent(jE(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function wM(){function u(p){return h.call(u.src,u.listener,p)}let h=EM;return u}function LE(u,h,p,m,C){if(Array.isArray(h)){for(var M=0;M<h.length;M++)LE(u,h[M],p,m,C);return null}return p=af(p),u&&u[Zs]?u.L(h,p,l(m)?!!m.capture:!!m,C):FE(u,h,p,!0,m,C)}function VE(u,h,p,m,C){if(Array.isArray(h))for(var M=0;M<h.length;M++)VE(u,h[M],p,m,C);else m=l(m)?!!m.capture:!!m,p=af(p),u&&u[Zs]?(u=u.i,h=String(h).toString(),h in u.g&&(M=u.g[h],p=ef(M,p,m,C),-1<p&&(ru(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete u.g[h],u.h--)))):u&&(u=of(u))&&(h=u.g[h.toString()],u=-1,h&&(u=ef(h,p,m,C)),(p=-1<u?h[u]:null)&&rf(p))}function rf(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[Zs])Xh(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent(jE(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=of(h))?(Xh(p,u),p.h==0&&(p.src=null,h[tf]=null)):ru(u)}}}function jE(u){return u in nf?nf[u]:nf[u]="on"+u}function EM(u,h){if(u.da)u=!0;else{h=new Ys(h,this);var p=u.listener,m=u.ha||u.src;u.fa&&rf(u),u=p.call(m,h)}return u}function of(u){return u=u[tf],u instanceof iu?u:null}var sf="__closure_events_fn_"+(1e9*Math.random()>>>0);function af(u){return typeof u=="function"?u:(u[sf]||(u[sf]=function(h){return u.handleEvent(h)}),u[sf])}function at(){sr.call(this),this.i=new iu(this),this.M=this,this.F=null}_(at,sr),at.prototype[Zs]=!0,at.prototype.removeEventListener=function(u,h,p,m){VE(this,u,h,p,m)};function gt(u,h){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new st(h,u);else if(h instanceof st)h.target=h.target||u;else{var C=h;h=new st(m,u),D(h,C)}if(C=!0,p)for(var M=p.length-1;0<=M;M--){var L=h.g=p[M];C=ou(L,m,!0,h)&&C}if(L=h.g=u,C=ou(L,m,!0,h)&&C,C=ou(L,m,!1,h)&&C,p)for(M=0;M<p.length;M++)L=h.g=p[M],C=ou(L,m,!1,h)&&C}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],m=0;m<p.length;m++)ru(p[m]);delete u.g[h],u.h--}}this.F=null},at.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},at.prototype.L=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function ou(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,M=0;M<h.length;++M){var L=h[M];if(L&&!L.da&&L.capture==p){var De=L.listener,nt=L.ha||L.src;L.fa&&Xh(u.i,L),C=De.call(nt,m)!==!1&&C}}return C&&!m.defaultPrevented}function UE(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function BE(u){u.g=UE(()=>{u.g=null,u.i&&(u.i=!1,BE(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class IM extends sr{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:BE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(u){sr.call(this),this.h=u,this.g={}}_(Js,sr);var $E=[];function qE(u){H(u.g,function(h,p){this.g.hasOwnProperty(p)&&rf(h)},u),u.g={}}Js.prototype.N=function(){Js.aa.N.call(this),qE(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cf=a.JSON.stringify,_M=a.JSON.parse,DM=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function uf(){}uf.prototype.h=null;function zE(u){return u.h||(u.h=u.i())}function HE(){}var Xs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lf(){st.call(this,"d")}_(lf,st);function df(){st.call(this,"c")}_(df,st);var Xr={},GE=null;function su(){return GE=GE||new at}Xr.La="serverreachability";function WE(u){st.call(this,Xr.La,u)}_(WE,st);function ea(u){let h=su();gt(h,new WE(h))}Xr.STAT_EVENT="statevent";function KE(u,h){st.call(this,Xr.STAT_EVENT,u),this.stat=h}_(KE,st);function mt(u){let h=su();gt(h,new KE(h,u))}Xr.Ma="timingevent";function QE(u,h){st.call(this,Xr.Ma,u),this.size=h}_(QE,st);function ta(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function na(){this.g=!0}na.prototype.xa=function(){this.g=!1};function TM(u,h,p,m,C,M){u.info(function(){if(u.g)if(M)for(var L="",De=M.split("&"),nt=0;nt<De.length;nt++){var ve=De[nt].split("=");if(1<ve.length){var ct=ve[0];ve=ve[1];var ut=ct.split("_");L=2<=ut.length&&ut[1]=="type"?L+(ct+"="+ve+"&"):L+(ct+"=redacted&")}}else L=null;else L=M;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+h+`
`+p+`
`+L})}function bM(u,h,p,m,C,M,L){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+h+`
`+p+`
`+M+" "+L})}function so(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+SM(u,p)+(m?" "+m:"")})}function CM(u,h){u.info(function(){return"TIMEOUT: "+h})}na.prototype.info=function(){};function SM(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var M=C[0];if(M!="noop"&&M!="stop"&&M!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return cf(p)}catch{return h}}var au={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},YE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hf;function cu(){}_(cu,uf),cu.prototype.g=function(){return new XMLHttpRequest},cu.prototype.i=function(){return{}},hf=new cu;function ar(u,h,p,m){this.j=u,this.i=h,this.l=p,this.R=m||1,this.U=new Js(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ZE}function ZE(){this.i=null,this.g="",this.h=!1}var JE={},ff={};function pf(u,h,p){u.L=1,u.v=hu(Ln(h)),u.m=p,u.P=!0,XE(u,null)}function XE(u,h){u.F=Date.now(),uu(u),u.A=Ln(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),fI(p.i,"t",m),u.C=0,p=u.j.J,u.h=new ZE,u.g=RI(u.j,p?h:null,!u.m),0<u.O&&(u.M=new IM(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,m=u.ca;var C="readystatechange";Array.isArray(C)||(C&&($E[0]=C.toString()),C=$E);for(var M=0;M<C.length;M++){var L=OE(p,C[M],m||h.handleEvent,!1,h.h||h);if(!L)break;h.g[L.key]=L}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),ea(),TM(u.i,u.u,u.A,u.l,u.R,u.m)}ar.prototype.ca=function(u){u=u.target;let h=this.M;h&&Vn(u)==3?h.j():this.Y(u)},ar.prototype.Y=function(u){try{if(u==this.g)e:{let ut=Vn(this.g);var h=this.g.Ba();let uo=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||EI(this.g)))){this.J||ut!=4||h==7||(h==8||0>=uo?ea(3):ea(2)),gf(this);var p=this.g.Z();this.X=p;t:if(eI(this)){var m=EI(this.g);u="";var C=m.length,M=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ei(this),ra(this);var L="";break t}this.h.i=new a.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(M&&h==C-1)});m.length=0,this.h.g+=u,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=p==200,bM(this.i,this.u,this.A,this.l,this.R,ut,p),this.o){if(this.T&&!this.K){t:{if(this.g){var De,nt=this.g;if((De=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(De)){var ve=De;break t}}ve=null}if(p=ve)so(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mf(this,p);else{this.o=!1,this.s=3,mt(12),ei(this),ra(this);break e}}if(this.P){p=!0;let Xt;for(;!this.J&&this.C<L.length;)if(Xt=AM(this,L),Xt==ff){ut==4&&(this.s=4,mt(14),p=!1),so(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==JE){this.s=4,mt(15),so(this.i,this.l,L,"[Invalid Chunk]"),p=!1;break}else so(this.i,this.l,Xt,null),mf(this,Xt);if(eI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||L.length!=0||this.h.h||(this.s=1,mt(16),p=!1),this.o=this.o&&p,!p)so(this.i,this.l,L,"[Invalid Chunked Response]"),ei(this),ra(this);else if(0<L.length&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.ba&&!ct.M&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),_f(ct),ct.M=!0,mt(11))}}else so(this.i,this.l,L,null),mf(this,L);ut==4&&ei(this),this.o&&!this.J&&(ut==4?SI(this.j,this):(this.o=!1,uu(this)))}else HM(this.g),p==400&&0<L.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),ei(this),ra(this)}}}catch{}finally{}};function eI(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function AM(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?ff:(p=Number(h.substring(p,m)),isNaN(p)?JE:(m+=1,m+p>h.length?ff:(h=h.slice(m,m+p),u.C=m+p,h)))}ar.prototype.cancel=function(){this.J=!0,ei(this)};function uu(u){u.S=Date.now()+u.I,tI(u,u.I)}function tI(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ta(g(u.ba,u),h)}function gf(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ar.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(CM(this.i,this.A),this.L!=2&&(ea(),mt(17)),ei(this),this.s=2,ra(this)):tI(this,this.S-u)};function ra(u){u.j.G==0||u.J||SI(u.j,u)}function ei(u){gf(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,qE(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function mf(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||yf(p.h,u))){if(!u.K&&yf(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)yu(p),gu(p);else break e;If(p),mt(18)}}else p.za=C[1],0<p.za-p.T&&37500>C[2]&&p.F&&p.v==0&&!p.C&&(p.C=ta(g(p.Za,p),6e3));if(1>=iI(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ni(p,11)}else if((u.K||p.g==u)&&yu(p),!j(h))for(C=p.Da.g.parse(h),h=0;h<C.length;h++){let ve=C[h];if(p.T=ve[0],ve=ve[1],p.G==2)if(ve[0]=="c"){p.K=ve[1],p.ia=ve[2];let ct=ve[3];ct!=null&&(p.la=ct,p.j.info("VER="+p.la));let ut=ve[4];ut!=null&&(p.Aa=ut,p.j.info("SVER="+p.Aa));let uo=ve[5];uo!=null&&typeof uo=="number"&&0<uo&&(m=1.5*uo,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let Xt=u.g;if(Xt){let wu=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wu){var M=m.h;M.g||wu.indexOf("spdy")==-1&&wu.indexOf("quic")==-1&&wu.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(vf(M,M.h),M.h=null))}if(m.D){let Df=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;Df&&(m.ya=Df,Ae(m.I,m.D,Df))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var L=u;if(m.qa=MI(m,m.J?m.ia:null,m.W),L.K){oI(m.h,L);var De=L,nt=m.L;nt&&(De.I=nt),De.B&&(gf(De),uu(De)),m.g=L}else bI(m);0<p.i.length&&mu(p)}else ve[0]!="stop"&&ve[0]!="close"||ni(p,7);else p.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?ni(p,7):Ef(p):ve[0]!="noop"&&p.l&&p.l.ta(ve),p.v=0)}}ea(4)}catch{}}var xM=class{constructor(u,h){this.g=u,this.map=h}};function nI(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function iI(u){return u.h?1:u.g?u.g.size:0}function yf(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function vf(u,h){u.g?u.g.add(h):u.h=h}function oI(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}nI.prototype.cancel=function(){if(this.i=sI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function sI(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return A(u.i)}function MM(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,m=0;m<p;m++)h.push(u[m]);return h}h=[],p=0;for(m in u)h[p++]=u[m];return h}function RM(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let m in u)h[p++]=m;return h}}}function aI(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=RM(u),m=MM(u),C=m.length,M=0;M<C;M++)h.call(void 0,m[M],p&&p[M],u)}var cI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NM(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),C=null;if(0<=m){var M=u[p].substring(0,m);C=u[p].substring(m+1)}else M=u[p];h(M,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ti(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ti){this.h=u.h,lu(this,u.j),this.o=u.o,this.g=u.g,du(this,u.s),this.l=u.l;var h=u.i,p=new sa;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),uI(this,p),this.m=u.m}else u&&(h=String(u).match(cI))?(this.h=!1,lu(this,h[1]||"",!0),this.o=ia(h[2]||""),this.g=ia(h[3]||"",!0),du(this,h[4]),this.l=ia(h[5]||"",!0),uI(this,h[6]||"",!0),this.m=ia(h[7]||"")):(this.h=!1,this.i=new sa(null,this.h))}ti.prototype.toString=function(){var u=[],h=this.j;h&&u.push(oa(h,lI,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(oa(h,lI,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(oa(p,p.charAt(0)=="/"?OM:kM,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",oa(p,LM)),u.join("")};function Ln(u){return new ti(u)}function lu(u,h,p){u.j=p?ia(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function du(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function uI(u,h,p){h instanceof sa?(u.i=h,VM(u.i,u.h)):(p||(h=oa(h,FM)),u.i=new sa(h,u.h))}function Ae(u,h,p){u.i.set(h,p)}function hu(u){return Ae(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ia(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function oa(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,PM),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function PM(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var lI=/[#\/\?@]/g,kM=/[#\?:]/g,OM=/[#\?]/g,FM=/[#\?@]/g,LM=/#/g;function sa(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function cr(u){u.g||(u.g=new Map,u.h=0,u.i&&NM(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=sa.prototype,n.add=function(u,h){cr(this),this.i=null,u=ao(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function dI(u,h){cr(u),h=ao(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function hI(u,h){return cr(u),h=ao(u,h),u.g.has(h)}n.forEach=function(u,h){cr(this),this.g.forEach(function(p,m){p.forEach(function(C){u.call(h,C,m,this)},this)},this)},n.na=function(){cr(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let C=u[m];for(let M=0;M<C.length;M++)p.push(h[m])}return p},n.V=function(u){cr(this);let h=[];if(typeof u=="string")hI(this,u)&&(h=h.concat(this.g.get(ao(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},n.set=function(u,h){return cr(this),this.i=null,u=ao(this,u),hI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function fI(u,h,p){dI(u,h),0<p.length&&(u.i=null,u.g.set(ao(u,h),A(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let M=encodeURIComponent(String(m)),L=this.V(m);for(m=0;m<L.length;m++){var C=M;L[m]!==""&&(C+="="+encodeURIComponent(String(L[m]))),u.push(C)}}return this.i=u.join("&")};function ao(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function VM(u,h){h&&!u.j&&(cr(u),u.i=null,u.g.forEach(function(p,m){var C=m.toLowerCase();m!=C&&(dI(this,m),fI(this,C,p))},u)),u.j=h}function jM(u,h){let p=new na;if(a.Image){let m=new Image;m.onload=y(ur,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(ur,p,"TestLoadImage: error",!1,h,m),m.onabort=y(ur,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(ur,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function UM(u,h){let p=new na,m=new AbortController,C=setTimeout(()=>{m.abort(),ur(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(M=>{clearTimeout(C),M.ok?ur(p,"TestPingServer: ok",!0,h):ur(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),ur(p,"TestPingServer: error",!1,h)})}function ur(u,h,p,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(p)}catch{}}function BM(){this.g=new DM}function $M(u,h,p){let m=p||"";try{aI(u,function(C,M){let L=C;l(C)&&(L=cf(C)),h.push(m+M+"="+encodeURIComponent(L))})}catch(C){throw h.push(m+"type="+encodeURIComponent("_badmap")),C}}function aa(u){this.l=u.Ub||null,this.j=u.eb||!1}_(aa,uf),aa.prototype.g=function(){return new fu(this.l,this.j)},aa.prototype.i=function(u){return function(){return u}}({});function fu(u,h){at.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(fu,at),n=fu.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,ua(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ca(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ua(this)),this.g&&(this.readyState=3,ua(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function pI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?ca(this):ua(this),this.readyState==3&&pI(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,ca(this))},n.Qa=function(u){this.g&&(this.response=u,ca(this))},n.ga=function(){this.g&&ca(this)};function ca(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ua(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function ua(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(fu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function gI(u){let h="";return H(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function wf(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=gI(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Ae(u,h,p))}function Fe(u){at.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Fe,at);var qM=/^https?$/i,zM=["POST","PUT"];n=Fe.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hf.g(),this.v=this.o?zE(this.o):zE(hf),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(M){mI(this,M);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)p.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let M of m.keys())p.set(M,m.get(M));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(zM,h,void 0))||m||C||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,L]of p)this.g.setRequestHeader(M,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wI(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){mI(this,M)}};function mI(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,yI(u),pu(u)}function yI(u){u.A||(u.A=!0,gt(u,"complete"),gt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,gt(this,"complete"),gt(this,"abort"),pu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pu(this,!0)),Fe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?vI(this):this.bb())},n.bb=function(){vI(this)};function vI(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Vn(u)!=4||u.Z()!=2)){if(u.u&&Vn(u)==4)UE(u.Ea,0,u);else if(gt(u,"readystatechange"),Vn(u)==4){u.h=!1;try{let L=u.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=L===0){var C=String(u.D).match(cI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!qM.test(C?C.toLowerCase():"")}p=m}if(p)gt(u,"complete"),gt(u,"success");else{u.m=6;try{var M=2<Vn(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",yI(u)}}finally{pu(u)}}}}function pu(u,h){if(u.g){wI(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||gt(u,"ready");try{p.onreadystatechange=m}catch{}}}function wI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Vn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),_M(h)}};function EI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function HM(u){let h={};u=(u.g&&2<=Vn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(j(u[m]))continue;var p=T(u[m]);let C=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let M=h[C]||[];h[C]=M,M.push(p)}I(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function la(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function II(u){this.Aa=0,this.i=[],this.j=new na,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=la("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=la("baseRetryDelayMs",5e3,u),this.cb=la("retryDelaySeedMs",1e4,u),this.Wa=la("forwardChannelMaxRetries",2,u),this.wa=la("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new nI(u&&u.concurrentRequestLimit),this.Da=new BM,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=II.prototype,n.la=8,n.G=1,n.connect=function(u,h,p,m){mt(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=MI(this,null,this.W),mu(this)};function Ef(u){if(_I(u),u.G==3){var h=u.U++,p=Ln(u.I);if(Ae(p,"SID",u.K),Ae(p,"RID",h),Ae(p,"TYPE","terminate"),da(u,p),h=new ar(u,u.j,h),h.L=2,h.v=hu(Ln(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=RI(h.j,null),h.g.ea(h.v)),h.F=Date.now(),uu(h)}xI(u)}function gu(u){u.g&&(_f(u),u.g.cancel(),u.g=null)}function _I(u){gu(u),u.u&&(a.clearTimeout(u.u),u.u=null),yu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function mu(u){if(!rI(u.h)&&!u.s){u.s=!0;var h=u.Ga;Ks||kE(),Qs||(Ks(),Qs=!0),Jh.add(h,u),u.B=0}}function GM(u,h){return iI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ta(g(u.Ga,u,h),AI(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new ar(this,this.j,u),M=this.o;if(this.S&&(M?(M=v(M),D(M,this.S)):M=this.S),this.m!==null||this.O||(C.H=M,M=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=TI(this,C,h),p=Ln(this.I),Ae(p,"RID",u),Ae(p,"CVER",22),this.D&&Ae(p,"X-HTTP-Session-Id",this.D),da(this,p),M&&(this.O?h="headers="+encodeURIComponent(String(gI(M)))+"&"+h:this.m&&wf(p,this.m,M)),vf(this.h,C),this.Ua&&Ae(p,"TYPE","init"),this.P?(Ae(p,"$req",h),Ae(p,"SID","null"),C.T=!0,pf(C,p,null)):pf(C,p,h),this.G=2}}else this.G==3&&(u?DI(this,u):this.i.length==0||rI(this.h)||DI(this))};function DI(u,h){var p;h?p=h.l:p=u.U++;let m=Ln(u.I);Ae(m,"SID",u.K),Ae(m,"RID",p),Ae(m,"AID",u.T),da(u,m),u.m&&u.o&&wf(m,u.m,u.o),p=new ar(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=TI(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),vf(u.h,p),pf(p,m,h)}function da(u,h){u.H&&H(u.H,function(p,m){Ae(h,m,p)}),u.l&&aI({},function(p,m){Ae(h,m,p)})}function TI(u,h,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var C=u.i;let M=-1;for(;;){let L=["count="+p];M==-1?0<p?(M=C[0].g,L.push("ofs="+M)):M=0:L.push("ofs="+M);let De=!0;for(let nt=0;nt<p;nt++){let ve=C[nt].g,ct=C[nt].map;if(ve-=M,0>ve)M=Math.max(0,C[nt].g-100),De=!1;else try{$M(ct,L,"req"+ve+"_")}catch{m&&m(ct)}}if(De){m=L.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,m}function bI(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;Ks||kE(),Qs||(Ks(),Qs=!0),Jh.add(h,u),u.v=0}}function If(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ta(g(u.Fa,u),AI(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,CI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ta(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),gu(this),CI(this))};function _f(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function CI(u){u.g=new ar(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Ln(u.qa);Ae(h,"RID","rpc"),Ae(h,"SID",u.K),Ae(h,"AID",u.T),Ae(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ae(h,"TO",u.ja),Ae(h,"TYPE","xmlhttp"),da(u,h),u.m&&u.o&&wf(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=hu(Ln(h)),p.m=null,p.P=!0,XE(p,u)}n.Za=function(){this.C!=null&&(this.C=null,gu(this),If(this),mt(19))};function yu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function SI(u,h){var p=null;if(u.g==h){yu(u),_f(u),u.g=null;var m=2}else if(yf(u.h,h))p=h.D,oI(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var C=u.B;m=su(),gt(m,new QE(m,p)),mu(u)}else bI(u);else if(C=h.s,C==3||C==0&&0<h.X||!(m==1&&GM(u,h)||m==2&&If(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),C){case 1:ni(u,5);break;case 4:ni(u,10);break;case 3:ni(u,6);break;default:ni(u,2)}}}function AI(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function ni(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),m=u.Xa;let C=!m;m=new ti(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||lu(m,"https"),hu(m),C?jM(m.toString(),p):UM(m.toString(),p)}else mt(2);u.G=0,u.l&&u.l.sa(h),xI(u),_I(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function xI(u){if(u.G=0,u.ka=[],u.l){let h=sI(u.h);(h.length!=0||u.i.length!=0)&&(b(u.ka,h),b(u.ka,u.i),u.h.i.length=0,A(u.i),u.i.length=0),u.l.ra()}}function MI(u,h,p){var m=p instanceof ti?Ln(p):new ti(p);if(m.g!="")h&&(m.g=h+"."+m.g),du(m,m.s);else{var C=a.location;m=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var M=new ti(null);m&&lu(M,m),h&&(M.g=h),C&&du(M,C),p&&(M.l=p),m=M}return p=u.D,h=u.ya,p&&h&&Ae(m,p,h),Ae(m,"VER",u.la),da(u,m),m}function RI(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new Fe(new aa({eb:p})):new Fe(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function NI(){}n=NI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function vu(){}vu.prototype.g=function(u,h){return new Vt(u,h)};function Vt(u,h){at.call(this),this.g=new II(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!j(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!j(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new co(this)}_(Vt,at),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Ef(this.g)},Vt.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=cf(u),u=p);h.i.push(new xM(h.Ya++,u)),h.G==3&&mu(h)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Ef(this.g),delete this.g,Vt.aa.N.call(this)};function PI(u){lf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}_(PI,lf);function kI(){df.call(this),this.status=1}_(kI,df);function co(u){this.g=u}_(co,NI),co.prototype.ua=function(){gt(this.g,"a")},co.prototype.ta=function(u){gt(this.g,new PI(u))},co.prototype.sa=function(u){gt(this.g,new kI)},co.prototype.ra=function(){gt(this.g,"b")},vu.prototype.createWebChannel=vu.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,Ly=Yn.createWebChannelTransport=function(){return new vu},Fy=Yn.getStatEventTarget=function(){return su()},Oy=Yn.Event=Xr,Md=Yn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},au.NO_ERROR=0,au.TIMEOUT=8,au.HTTP_ERROR=6,gc=Yn.ErrorCode=au,YE.COMPLETE="complete",ky=Yn.EventType=YE,HE.EventType=Xs,Xs.OPEN="a",Xs.CLOSE="b",Xs.ERROR="c",Xs.MESSAGE="d",at.prototype.listen=at.prototype.K,ss=Yn.WebChannel=HE,Py=Yn.FetchXmlHttpFactory=aa,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,Ny=Yn.XhrIo=Fe}).apply(typeof xd<"u"?xd:typeof self<"u"?self:typeof window<"u"?window:{});var k0="@firebase/firestore";var Qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");var Ls="10.12.1";var Ur=new _u("@firebase/firestore");function ds(){return Ur.logLevel}function kS(n){Ur.setLogLevel(n)}function F(n,...e){if(Ur.logLevel<=gn.DEBUG){let t=e.map(Uw);Ur.debug(`Firestore (${Ls}): ${n}`,...t)}}function qe(n,...e){if(Ur.logLevel<=gn.ERROR){let t=e.map(Uw);Ur.error(`Firestore (${Ls}): ${n}`,...t)}}function Yt(n,...e){if(Ur.logLevel<=gn.WARN){let t=e.map(Uw);Ur.warn(`Firestore (${Ls}): ${n}`,...t)}}function Uw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${Ls}) INTERNAL ASSERTION FAILED: `+n;throw qe(e),new Error(e)}function K(n,e){n||z()}function OS(n,e){n||z()}function q(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends UI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ye=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Bd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},$y=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qe.UNAUTHENTICATED))}shutdown(){}},qy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},zy=class{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Ye;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ye,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>N(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ye)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new Bd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new Qe(e)}},Hy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Gy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Hy(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Wy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ky=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K(typeof t.token=="string"),this.R=t.token,new Wy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Jj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var $d=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Jj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ie(n,e){return n<e?-1:n>e?1:0}function Es(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function FS(n){return n+"\0"}var Oe=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Oe(0,0))}static max(){return new n(new Oe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var qd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},me=class n extends qd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Xj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ze=class n extends qd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Xj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new k(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(me.fromString(e))}static fromName(e){return new n(me.fromString(e).popFirst(5))}static empty(){return new n(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new me(e.slice()))}};var Is=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Qy(n){return n.fields.find(e=>e.kind===2)}function Oi(n){return n.fields.filter(e=>e.kind!==2)}Is.UNKNOWN_ID=-1;var ys=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Sc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Zt.min())}};function LS(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new Oe(t+1,0):new Oe(t,r));return new Zt(i,$.empty(),e)}function VS(n){return new Zt(n.readTime,n.key,-1)}var Zt=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(J.min(),$.empty(),-1)}static max(){return new n(J.max(),$.empty(),-1)}};function Bw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}var jS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Yr(n){return N(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==jS)throw n;F("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Hd=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Ye,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Bi(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=$w(r.target.error);this.V.reject(new Bi(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Bi(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(F("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Zy(t)}},Br=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(ha())===12.2&&qe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return F("SimpleDb","Removing database:",e),Fi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Iu())return!1;if(n.C())return!0;let e=ha(),t=n.S(e),r=0<t&&t<10,i=US(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(F("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Bi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Bi(e,s))},i.onupgradeneeded=o=>{F("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{F("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Hd.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),x.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(F("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function US(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Yy=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Fi(this.B.delete())}},Bi=class extends k{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Zr(n){return n.name==="IndexedDbTransactionError"}var Zy=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(F("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(F("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Fi(r)}add(e){return F("SimpleDb","ADD",this.store.name,e,e),Fi(this.store.add(e))}get(e){return Fi(this.store.get(e)).next(t=>(t===void 0&&(t=null),F("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return F("SimpleDb","DELETE",this.store.name,e),Fi(this.store.delete(e))}count(){return F("SimpleDb","COUNT",this.store.name),Fi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new x((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new x((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){F("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new x((r,i)=>{t.onerror=o=>{let s=$w(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new x((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Yy(a),l=t(a.primaryKey,a.value,c);if(l instanceof x){let d=l.catch(f=>(c.done(),x.reject(f)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>x.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Fi(n){return new x((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=$w(r.target.error);t(i)}})}var O0=!1;function $w(n){let e=Br.S(ha());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return O0||(O0=!0,setTimeout(()=>{throw r},0)),r}}return n}var Jy=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){F("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{F("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Zr(t)?F("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Yr(t)}yield this.X(6e4)}))}},Xy=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return x.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return F("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(F("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=VS(o);Bw(s,r)>0&&(r=s)}),new Zt(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var $t=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Qc(n){return n==null}function Ac(n){return n===0&&1/n==-1/0}function BS(n){return typeof n=="number"&&Number.isInteger(n)&&!Ac(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Tt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=F0(e)),e=e2(n.get(t),e);return F0(e)}function e2(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function F0(n){return n+""}function Cn(n){let e=n.length;if(K(e>=2),e===2)return K(n.charAt(0)===""&&n.charAt(1)===""),me.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new me(r)}var L0=["userId","batchId"];function Od(n,e){return[n,Tt(e)]}function $S(n,e,t){return[n,Tt(e),t]}var t2={},n2=["prefixPath","collectionGroup","readTime","documentId"],r2=["prefixPath","collectionGroup","documentId"],i2=["collectionGroup","readTime","prefixPath","documentId"],o2=["canonicalId","targetId"],s2=["targetId","path"],a2=["path","targetId"],c2=["collectionId","parent"],u2=["indexId","uid"],l2=["uid","sequenceNumber"],d2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],h2=["indexId","uid","orderedDocumentKey"],f2=["userId","collectionPath","documentId"],p2=["userId","collectionPath","largestBatchId"],g2=["userId","collectionGroup","largestBatchId"],qS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],m2=[...qS,"documentOverlays"],zS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],HS=zS,GS=[...HS,"indexConfiguration","indexState","indexEntries"],y2=GS;var xc=class extends zd{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function tt(n,e){let t=q(n);return Br.F(t._e,e)}function V0(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function WS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var xe=class n{constructor(e,t){this.comparator=e,this.root=t||An.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ms(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ms(this.root,e,this.comparator,!1)}getReverseIterator(){return new ms(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ms(this.root,e,this.comparator,!0)}},ms=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},An=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new An(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ce=class n{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gd(this.data.getIterator())}getIteratorFrom(e){return new Gd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Gd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function as(n){return n.hasNext()?n.getNext():void 0}var qt=class n{constructor(e){this.fields=e,e.sort(ze.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ce(ze.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Es(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Wd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function KS(){return typeof atob<"u"}var et=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Wd("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};et.EMPTY_BYTE_STRING=new et("");var v2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xn(n){if(K(!!n),typeof n=="string"){let e=0,t=v2.exec(n);if(K(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(n.seconds),nanos:Ve(n.nanos)}}function Ve(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function $r(n){return typeof n=="string"?et.fromBase64String(n):et.fromUint8Array(n)}function Lh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function qw(n){let e=n.mapValue.fields.__previous_value__;return Lh(e)?qw(e):e}function Mc(n){let e=Xn(n.mapValue.fields.__local_write_time__.timestampValue);return new Oe(e.seconds,e.nanos)}var ev=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},qr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Vr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fd={nullValue:"NULL_VALUE"};function $i(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lh(n)?4:QS(n)?9007199254740991:10:z()}function Rn(n,e){if(n===e)return!0;let t=$i(n);if(t!==$i(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mc(n).isEqual(Mc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Xn(i.timestampValue),a=Xn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return $r(i.bytesValue).isEqual($r(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ve(i.geoPointValue.latitude)===Ve(o.geoPointValue.latitude)&&Ve(i.geoPointValue.longitude)===Ve(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ve(i.integerValue)===Ve(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ve(i.doubleValue),a=Ve(o.doubleValue);return s===a?Ac(s)===Ac(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Es(n.arrayValue.values||[],e.arrayValue.values||[],Rn);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(V0(s)!==V0(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Rn(s[c],a[c])))return!1;return!0}(n,e);default:return z()}}function Rc(n,e){return(n.values||[]).find(t=>Rn(t,e))!==void 0}function zr(n,e){if(n===e)return 0;let t=$i(n),r=$i(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ve(o.integerValue||o.doubleValue),c=Ve(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return j0(n.timestampValue,e.timestampValue);case 4:return j0(Mc(n),Mc(e));case 5:return ie(n.stringValue,e.stringValue);case 6:return function(o,s){let a=$r(o),c=$r(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=ie(a[l],c[l]);if(d!==0)return d}return ie(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ie(Ve(o.latitude),Ve(s.latitude));return a!==0?a:ie(Ve(o.longitude),Ve(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let d=zr(a[l],c[l]);if(d)return d}return ie(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Vr.mapValue&&s===Vr.mapValue)return 0;if(o===Vr.mapValue)return 1;if(s===Vr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=ie(c[f],d[f]);if(g!==0)return g;let y=zr(a[c[f]],l[d[f]]);if(y!==0)return y}return ie(c.length,d.length)}(n.mapValue,e.mapValue);default:throw z()}}function j0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);let t=Xn(n),r=Xn(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function _s(n){return tv(n)}function tv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Xn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return $r(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=tv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${tv(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function qi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function nv(n){return!!n&&"integerValue"in n}function Nc(n){return!!n&&"arrayValue"in n}function U0(n){return!!n&&"nullValue"in n}function B0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ld(n){return!!n&&"mapValue"in n}function _c(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Xi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=_c(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_c(n.arrayValue.values[t]);return e}return Object.assign({},n)}function QS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function w2(n){return"nullValue"in n?Fd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?qi(qr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:z()}function E2(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?qi(qr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Vr:z()}function $0(n,e){let t=zr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function q0(n,e){let t=zr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var pt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ld(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_c(t)}setAll(e){let t=ze.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=_c(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Ld(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ld(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Xi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(_c(this.value))}};function YS(n){let e=[];return Xi(n.fields,(t,r)=>{let i=new ze([t]);if(Ld(r)){let o=YS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new qt(e)}var Ze=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,J.min(),J.min(),J.min(),pt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,J.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,J.min(),J.min(),pt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,J.min(),J.min(),pt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Nn=class{constructor(e,t){this.position=e,this.inclusive=t}};function z0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=zr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function H0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Rn(n.position[t],e.position[t]))return!1;return!0}var zi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function I2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Kd=class{},fe=class n extends Kd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ov(e,t,r):t==="array-contains"?new cv(e,r):t==="in"?new Qd(e,r):t==="not-in"?new uv(e,r):t==="array-contains-any"?new lv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new sv(e,r):new av(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(zr(t,this.value)):t!==null&&$i(this.value)===$i(t)&&this.matchesComparison(zr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},_e=class n extends Kd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Ds(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ds(n){return n.op==="and"}function rv(n){return n.op==="or"}function zw(n){return ZS(n)&&Ds(n)}function ZS(n){for(let e of n.filters)if(e instanceof _e)return!1;return!0}function iv(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+_s(n.value);if(zw(n))return n.filters.map(e=>iv(e)).join(",");{let e=n.filters.map(t=>iv(t)).join(",");return`${n.op}(${e})`}}function JS(n,e){return n instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&Rn(r.value,i.value)}(n,e):n instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&JS(s,i.filters[a]),!0):!1}(n,e):void z()}function XS(n,e){let t=n.filters.concat(e);return _e.create(t,n.op)}function eA(n){return n instanceof fe?function(t){return`${t.field.canonicalString()} ${t.op} ${_s(t.value)}`}(n):n instanceof _e?function(t){return t.op.toString()+" {"+t.getFilters().map(eA).join(" ,")+"}"}(n):"Filter"}var ov=class extends fe{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},sv=class extends fe{constructor(e,t){super(e,"in",t),this.keys=tA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},av=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=tA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function tA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var cv=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Nc(t)&&Rc(t.arrayValue,this.value)}},Qd=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Rc(this.value.arrayValue,t)}},uv=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Rc(this.value.arrayValue,t)}},lv=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Nc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Rc(this.value.arrayValue,r))}};var dv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function hv(n,e=null,t=[],r=[],i=null,o=null,s=null){return new dv(n,e,t,r,i,o,s)}function Hi(n){let e=q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>iv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Qc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_s(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_s(r)).join(",")),e.ue=t}return e.ue}function Yc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!I2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!JS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!H0(n.startAt,e.startAt)&&H0(n.endAt,e.endAt)}function Yd(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Zd(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function G0(n,e,t){let r=Fd,i=!0;for(let o of Zd(n,e)){let s=Fd,a=!0;switch(o.op){case"<":case"<=":s=w2(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Fd}$0({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];$0({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function W0(n,e,t){let r=Vr,i=!0;for(let o of Zd(n,e)){let s=Vr,a=!0;switch(o.op){case">=":case">":s=E2(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Vr}q0({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];q0({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var dn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function nA(n,e,t,r,i,o,s,a){return new dn(n,e,t,r,i,o,s,a)}function Vs(n){return new dn(n)}function K0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Hw(n){return n.collectionGroup!==null}function vs(n){let e=q(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ce(ze.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new zi(o,r))}),t.has(ze.keyField().canonicalString())||e.ce.push(new zi(ze.keyField(),r))}return e.ce}function bt(n){let e=q(n);return e.le||(e.le=_2(e,vs(n))),e.le}function _2(n,e){if(n.limitType==="F")return hv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new zi(i.field,o)});let t=n.endAt?new Nn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Nn(n.startAt.position,n.startAt.inclusive):null;return hv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function fv(n,e){let t=n.filters.concat([e]);return new dn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jd(n,e,t){return new dn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zc(n,e){return Yc(bt(n),bt(e))&&n.limitType===e.limitType}function rA(n){return`${Hi(bt(n))}|lt:${n.limitType}`}function hs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>eA(i)).join(", ")}]`),Qc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>_s(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>_s(i)).join(",")),`Target(${r})`}(bt(n))}; limitType=${n.limitType})`}function Jc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of vs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=z0(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,vs(r),i)||r.endAt&&!function(s,a,c){let l=z0(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,vs(r),i))}(n,e)}function iA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oA(n){return(e,t)=>{let r=!1;for(let i of vs(n)){let o=D2(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function D2(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?zr(c,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var Pn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return WS(this.inner)}size(){return this.innerSize}};var T2=new xe($.comparator);function Lt(){return T2}var sA=new xe($.comparator);function Ec(...n){let e=sA;for(let t of n)e=e.insert(t.key,t);return e}function aA(n){let e=sA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Sn(){return Dc()}function cA(){return Dc()}function Dc(){return new Pn(n=>n.toString(),(n,e)=>n.isEqual(e))}var b2=new xe($.comparator),C2=new Ce($.comparator);function le(...n){let e=C2;for(let t of n)e=e.add(t);return e}var S2=new Ce(ie);function Gw(){return S2}function uA(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ac(e)?"-0":e}}function lA(n){return{integerValue:""+n}}function dA(n,e){return BS(e)?lA(e):uA(n,e)}var Ts=class{constructor(){this._=void 0}};function A2(n,e,t){return n instanceof Hr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Lh(o)&&(o=qw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof er?fA(n,e):n instanceof tr?pA(n,e):function(i,o){let s=hA(i,o),a=Q0(s)+Q0(i.Pe);return nv(s)&&nv(i.Pe)?lA(a):uA(i.serializer,a)}(n,e)}function x2(n,e,t){return n instanceof er?fA(n,e):n instanceof tr?pA(n,e):t}function hA(n,e){return n instanceof Gr?function(r){return nv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Hr=class extends Ts{},er=class extends Ts{constructor(e){super(),this.elements=e}};function fA(n,e){let t=gA(e);for(let r of n.elements)t.some(i=>Rn(i,r))||t.push(r);return{arrayValue:{values:t}}}var tr=class extends Ts{constructor(e){super(),this.elements=e}};function pA(n,e){let t=gA(e);for(let r of n.elements)t=t.filter(i=>!Rn(i,r));return{arrayValue:{values:t}}}var Gr=class extends Ts{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Q0(n){return Ve(n.integerValue||n.doubleValue)}function gA(n){return Nc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Gi=class{constructor(e,t){this.field=e,this.transform=t}};function M2(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof er&&i instanceof er||r instanceof tr&&i instanceof tr?Es(r.elements,i.elements,Rn):r instanceof Gr&&i instanceof Gr?Rn(r.Pe,i.Pe):r instanceof Hr&&i instanceof Hr}(n.transform,e.transform)}var pv=class{constructor(e,t){this.version=e,this.transformResults=t}},je=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Vd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var bs=class{};function mA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Kr(n.key,je.none()):new Wr(n.key,n.data,je.none());{let t=n.data,r=pt.empty(),i=new Ce(ze.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new hn(n.key,r,new qt(i.toArray()),je.none())}}function R2(n,e,t){n instanceof Wr?function(i,o,s){let a=i.value.clone(),c=Z0(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof hn?function(i,o,s){if(!Vd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Z0(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(yA(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Tc(n,e,t,r){return n instanceof Wr?function(o,s,a,c){if(!Vd(o.precondition,s))return a;let l=o.value.clone(),d=J0(o.fieldTransforms,c,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof hn?function(o,s,a,c){if(!Vd(o.precondition,s))return a;let l=J0(o.fieldTransforms,c,s),d=s.data;return d.setAll(yA(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return Vd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function N2(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=hA(r.transform,i||null);o!=null&&(t===null&&(t=pt.empty()),t.set(r.field,o))}return t||null}function Y0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Es(r,i,(o,s)=>M2(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Wr=class extends bs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},hn=class extends bs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function yA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Z0(n,e,t){let r=new Map;K(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,x2(s,a,t[i]))}return r}function J0(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,A2(o,s,e))}return r}var Kr=class extends bs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Pc=class extends bs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var kc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&R2(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Tc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=cA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=mA(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),le())}isEqual(e){return this.batchId===e.batchId&&Es(this.mutations,e.mutations,(t,r)=>Y0(t,r))&&Es(this.baseMutations,e.baseMutations,(t,r)=>Y0(t,r))}},gv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){K(e.mutations.length===r.length);let i=function(){return b2}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Oc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var mv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var We,ge;function vA(n){switch(n){default:return z();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function wA(n){if(n===void 0)return qe("GRPC error has no .code"),R.UNKNOWN;switch(n){case We.OK:return R.OK;case We.CANCELLED:return R.CANCELLED;case We.UNKNOWN:return R.UNKNOWN;case We.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case We.INTERNAL:return R.INTERNAL;case We.UNAVAILABLE:return R.UNAVAILABLE;case We.UNAUTHENTICATED:return R.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case We.NOT_FOUND:return R.NOT_FOUND;case We.ALREADY_EXISTS:return R.ALREADY_EXISTS;case We.PERMISSION_DENIED:return R.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case We.ABORTED:return R.ABORTED;case We.OUT_OF_RANGE:return R.OUT_OF_RANGE;case We.UNIMPLEMENTED:return R.UNIMPLEMENTED;case We.DATA_LOSS:return R.DATA_LOSS;default:return z()}}(ge=We||(We={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var X0=null;function EA(){return new TextEncoder}var P2=new Pr([4294967295,4294967295],0);function eS(n){let e=EA().encode(n),t=new Ry;return t.update(e),new Uint8Array(t.digest())}function tS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pr([t,r],0),new Pr([i,o],0)]}var yv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ui(`Invalid padding: ${t}`);if(r<0)throw new Ui(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ui(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ui(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Pr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Pr.fromNumber(r)));return i.compare(P2)===1&&(i=new Pr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=eS(e),[r,i]=tS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=eS(e),[r,i]=tS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ui=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Fc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Lc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(J.min(),i,new xe(ie),Lt(),le())}},Lc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,le(),le(),le())}};var ws=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Xd=class{constructor(e,t){this.targetId=e,this.me=t}},eh=class{constructor(e,t,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},th=class{constructor(){this.fe=0,this.ge=rS(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=le(),t=le(),r=le();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new Lc(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=rS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},vv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Lt(),this.qe=nS(),this.Qe=new xe(ie)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Yd(o))if(r===0){let s=new $(o.path);this.Ue(t,s,Ze.newNoDocument(s,J.min()))}else K(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}X0?.et(function(d,f,g,y,_){var A,b,P,j,O,B;let Q={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},H=f.unchangedNames;return H&&(Q.bloomFilter={applied:_===0,hashCount:(A=H?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(j=(P=(b=H?.bits)===null||b===void 0?void 0:b.bitmap)===null||P===void 0?void 0:P.length)!==null&&j!==void 0?j:0,padding:(B=(O=H?.bits)===null||O===void 0?void 0:O.padding)!==null&&B!==void 0?B:0,mightContain:I=>{var v;return(v=y?.mightContain(I))!==null&&v!==void 0&&v}}),Q}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=$r(r).toUint8Array()}catch(c){if(c instanceof Wd)return Yt("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new yv(s,i,o)}catch(c){return Yt(c instanceof Ui?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Yd(a.target)){let c=new $(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Ze.newNoDocument(c,e))}o.be&&(t.set(s,o.Ce()),o.ve())}});let r=le();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Fc(e,t,this.Qe,this.ke,r);return this.ke=Lt(),this.qe=nS(),this.Qe=new xe(ie),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new th,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ce(ie),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||F("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new th),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function nS(){return new xe($.comparator)}function rS(){return new xe($.comparator)}var k2={asc:"ASCENDING",desc:"DESCENDING"},O2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F2={and:"AND",or:"OR"},wv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ev(n,e){return n.useProto3Json||Qc(e)?e:{value:e}}function Cs(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function L2(n,e){return Cs(n,e.toTimestamp())}function He(n){return K(!!n),J.fromTimestamp(function(t){let r=Xn(t);return new Oe(r.seconds,r.nanos)}(n))}function Ww(n,e){return Iv(n,e).canonicalString()}function Iv(n,e){let t=function(i){return new me(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function _A(n){let e=me.fromString(n);return K(NA(e)),e}function Vc(n,e){return Ww(n.databaseId,e.path)}function xn(n,e){let t=_A(e);if(t.get(1)!==n.databaseId.projectId)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(bA(t))}function DA(n,e){return Ww(n.databaseId,e)}function TA(n){let e=_A(n);return e.length===4?me.emptyPath():bA(e)}function _v(n){return new me(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bA(n){return K(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function iS(n,e,t){return{name:Vc(n,e),fields:t.value.mapValue.fields}}function CA(n,e,t){let r=xn(n,e.name),i=He(e.updateTime),o=e.createTime?He(e.createTime):J.min(),s=new pt({mapValue:{fields:e.fields}}),a=Ze.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function V2(n,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let o=xn(r,i.found.name),s=He(i.found.updateTime),a=i.found.createTime?He(i.found.createTime):J.min(),c=new pt({mapValue:{fields:i.found.fields}});return Ze.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let o=xn(r,i.missing),s=He(i.readTime);return Ze.newNoDocument(o,s)}(n,e):z()}function j2(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(K(d===void 0||typeof d=="string"),et.fromBase64String(d||"")):(K(d===void 0||d instanceof Buffer||d instanceof Uint8Array),et.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?R.UNKNOWN:wA(l.code);return new k(d,l.message||"")}(s);t=new eh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=xn(n,r.document.name),o=He(r.document.updateTime),s=r.document.createTime?He(r.document.createTime):J.min(),a=new pt({mapValue:{fields:r.document.fields}}),c=Ze.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new ws(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=xn(n,r.document),o=r.readTime?He(r.readTime):J.min(),s=Ze.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ws([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=xn(n,r.document),o=r.removedTargetIds||[];t=new ws([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new mv(i,o),a=r.targetId;t=new Xd(a,s)}}return t}function jc(n,e){let t;if(e instanceof Wr)t={update:iS(n,e.key,e.value)};else if(e instanceof Kr)t={delete:Vc(n,e.key)};else if(e instanceof hn)t={update:iS(n,e.key,e.data),updateMask:H2(e.fieldMask)};else{if(!(e instanceof Pc))return z();t={verify:Vc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Hr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof er)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof tr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:L2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function Dv(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?je.updateTime(He(o.updateTime)):o.exists!==void 0?je.exists(o.exists):je.none()}(e.currentDocument):je.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),c=new Hr;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new er(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new tr(d)}else"increment"in a?c=new Gr(s,a.increment):z();let l=ze.fromServerFormat(a.fieldPath);return new Gi(l,c)}(n,i)):[];if(e.update){e.update.name;let i=xn(n,e.update.name),o=new pt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new qt(l.map(d=>ze.fromServerFormat(d)))}(e.updateMask);return new hn(i,o,s,t,r)}return new Wr(i,o,t,r)}if(e.delete){let i=xn(n,e.delete);return new Kr(i,t)}if(e.verify){let i=xn(n,e.verify);return new Pc(i,t)}return z()}function U2(n,e){return n&&n.length>0?(K(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?He(i.updateTime):He(o);return s.isEqual(J.min())&&(s=He(o)),new pv(s,i.transformResults||[])}(t,e))):[]}function SA(n,e){return{documents:[DA(n,e.path)]}}function AA(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=DA(n,i);let o=function(l){if(l.length!==0)return RA(_e.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:fs(g.field),direction:$2(g.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Ev(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function xA(n){let e=TA(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){K(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let g=MA(f);return g instanceof _e&&zw(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(_){return new zi(ps(_.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Qc(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,y=f.values||[];return new Nn(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new Nn(y,g)}(t.endAt)),nA(e,i,s,o,a,"F",c,l)}function B2(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ps(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ps(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ps(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ps(t.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return fe.create(ps(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return _e.create(t.compositeFilter.filters.map(r=>MA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function $2(n){return k2[n]}function q2(n){return O2[n]}function z2(n){return F2[n]}function fs(n){return{fieldPath:n.canonicalString()}}function ps(n){return ze.fromServerFormat(n.fieldPath)}function RA(n){return n instanceof fe?function(t){if(t.op==="=="){if(B0(t.value))return{unaryFilter:{field:fs(t.field),op:"IS_NAN"}};if(U0(t.value))return{unaryFilter:{field:fs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(B0(t.value))return{unaryFilter:{field:fs(t.field),op:"IS_NOT_NAN"}};if(U0(t.value))return{unaryFilter:{field:fs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fs(t.field),op:q2(t.op),value:t.value}}}(n):n instanceof _e?function(t){let r=t.getFilters().map(i=>RA(i));return r.length===1?r[0]:{compositeFilter:{op:z2(t.op),filters:r}}}(n):z()}function H2(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function NA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ss=class n{constructor(e,t,r,i,o=J.min(),s=J.min(),a=et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var nh=class{constructor(e){this.ct=e}};function G2(n,e){let t;if(e.document)t=CA(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=Ki(e.noDocument.readTime);t=Ze.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=Ki(e.unknownDocument.version);t=Ze.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Oe(i[0],i[1]);return J.fromTimestamp(o)}(e.readTime)),t}function oS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Vc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Cs(o,s.version.toTimestamp()),createTime:Cs(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Wi(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:Wi(e.version)}}return r}function rh(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Wi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ki(n){let e=new Oe(n.seconds,n.nanoseconds);return J.fromTimestamp(e)}function Li(n,e){let t=(e.baseMutations||[]).map(o=>Dv(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Dv(n.ct,o)),i=Oe.fromMillis(e.localWriteTimeMs);return new kc(e.batchId,i,t,r)}function Ic(n){let e=Ki(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ki(n.lastLimboFreeSnapshotVersion):J.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return K(o.documents.length===1),bt(Vs(TA(o.documents[0])))}(n.query):function(o){return bt(xA(o))}(n.query),new Ss(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,et.fromBase64String(n.resumeToken))}function PA(n,e){let t=Wi(e.snapshotVersion),r=Wi(e.lastLimboFreeSnapshotVersion),i;i=Yd(e.target)?SA(n.ct,e.target):AA(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Hi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Kw(n){let e=xA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jd(e,e.limit,"L"):e}function Vy(n,e){return new Oc(e.largestBatchId,Dv(n.ct,e.overlayMutation))}function sS(n,e){let t=e.path.lastSegment();return[n,Tt(e.path.popLast()),t]}function aS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Wi(r.readTime),documentKey:Tt(r.documentKey.path),largestBatchId:r.largestBatchId}}var Tv=class{getBundleMetadata(e,t){return cS(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Ki(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return cS(e).put(function(i){return{bundleId:i.id,createTime:Wi(He(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return uS(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Kw(o.bundledQuery),readTime:Ki(o.readTime)}}(r)})}saveNamedQuery(e,t){return uS(e).put(function(i){return{name:i.name,readTime:Wi(He(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function cS(n){return tt(n,"bundles")}function uS(n){return tt(n,"namedQueries")}var ih=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return mc(e).get(sS(this.userId,t)).next(r=>r?Vy(this.serializer,r):null)}getOverlays(e,t){let r=Sn();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Oc(t,s);i.push(this.ht(e,a))}),x.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Tt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(mc(e).j("collectionPathOverlayIndex",a))}),x.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Sn(),o=Tt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return mc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=Vy(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Sn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return mc(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let f=Vy(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,t){return mc(e).put(function(i,o,s){let[a,c,l]=sS(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:jc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function mc(n){return tt(n,"documentOverlays")}var Zn=class{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Ve(e.integerValue));else if("doubleValue"in e){let r=Ve(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Ac(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),typeof r=="string"&&(r=Xn(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft($r(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?QS(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):z()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){let r=e.fields||{};this.Et(t,55);for(let i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){let r=e.values||[];this.Et(t,50);for(let i of r)this.It(i,t)}gt(e,t){this.Et(t,37),$.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}};Zn.bt=new Zn;function W2(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function lS(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=W2(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var bv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let t=this.Bt(e),r=lS(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){let t=this.Bt(e),r=lS(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){let t=255&e;t===0?(this.Kt(0),this.Kt(255)):t===255?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Cv=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},Sv=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Vi=class{constructor(){this.Gt=new bv,this.zt=new Cv(this.Gt),this.jt=new Sv(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var ji=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function kr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=dS(n.arrayValue,e.arrayValue),t!==0?t:(t=dS(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function dS(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var oh=class{constructor(e){this.Yt=new Ce((t,r)=>ze.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let t of e.filters){let r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(K(e.collectionGroup===this.collectionId),this.en)return!1;let t=Qy(e);if(t!==void 0&&!this.nn(t))return!1;let r=Oi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new Ce(ze.comparator),t=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new ys(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ys(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ys(r.field,r.dir==="asc"?0:1)));return new Is(Is.UNKNOWN_ID,this.collectionId,t,Sc.empty())}nn(e){for(let t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function kA(n){var e,t;if(K(n instanceof fe||n instanceof _e),n instanceof fe){if(n instanceof Qd){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>fe.create(n.field,"==",o)))||[];return _e.create(i,"or")}return n}let r=n.filters.map(i=>kA(i));return _e.create(r,n.op)}function K2(n){if(n.getFilters().length===0)return[];let e=Mv(kA(n));return K(OA(e)),Av(e)||xv(e)?[e]:e.getFilters()}function Av(n){return n instanceof fe}function xv(n){return n instanceof _e&&zw(n)}function OA(n){return Av(n)||xv(n)||function(t){if(t instanceof _e&&rv(t)){for(let r of t.getFilters())if(!Av(r)&&!xv(r))return!1;return!0}return!1}(n)}function Mv(n){if(K(n instanceof fe||n instanceof _e),n instanceof fe)return n;if(n.filters.length===1)return Mv(n.filters[0]);let e=n.filters.map(r=>Mv(r)),t=_e.create(e,n.op);return t=sh(t),OA(t)?t:(K(t instanceof _e),K(Ds(t)),K(t.filters.length>1),t.filters.reduce((r,i)=>Qw(r,i)))}function Qw(n,e){let t;return K(n instanceof fe||n instanceof _e),K(e instanceof fe||e instanceof _e),t=n instanceof fe?e instanceof fe?function(i,o){return _e.create([i,o],"and")}(n,e):hS(n,e):e instanceof fe?hS(e,n):function(i,o){if(K(i.filters.length>0&&o.filters.length>0),Ds(i)&&Ds(o))return XS(i,o.getFilters());let s=rv(i)?i:o,a=rv(i)?o:i,c=s.filters.map(l=>Qw(l,a));return _e.create(c,"or")}(n,e),sh(t)}function hS(n,e){if(Ds(e))return XS(e,n.getFilters());{let t=e.filters.map(r=>Qw(n,r));return _e.create(t,"or")}}function sh(n){if(K(n instanceof fe||n instanceof _e),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return sh(e[0]);if(ZS(n))return n;let t=e.map(i=>sh(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof _e&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:_e.create(r,n.op)}var Rv=class{constructor(){this._n=new Uc}addToCollectionParentIndex(e,t){return this._n.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Zt.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Zt.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},Uc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ce(me.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ce(me.comparator)).toArray()}};var Rd=new Uint8Array(0),Nv=class{constructor(e,t){this.databaseId=t,this.an=new Uc,this.un=new Pn(r=>Hi(r),(r,i)=>Yc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});let o={collectionId:r,parent:Tt(i)};return fS(e).put(o)}return x.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[FS(t),""],!1,!0);return fS(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Cn(s.parent))}return r})}addFieldIndex(e,t){let r=yc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=us(e);return o.next(a=>{s.put(aS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=yc(e),i=us(e),o=cs(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=yc(e),r=cs(e),i=us(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return x.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new oh(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=cs(e),i=!0,o=new Map;return x.forEach(this.cn(t),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=le(),a=[];return x.forEach(o,(c,l)=>{F("IndexedDbIndexManager",`Using index ${function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(B=>`${B.fieldPath}:${B.kind}`).join(",")}`}(c)} to execute ${Hi(t)}`);let d=function(O,B){let Q=Qy(B);if(Q===void 0)return null;for(let H of Zd(O,Q.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null}(l,c),f=function(O,B){let Q=new Map;for(let H of Oi(B))for(let I of Zd(O,H.fieldPath))switch(I.op){case"==":case"in":Q.set(H.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return Q.set(H.fieldPath.canonicalString(),I.value),Array.from(Q.values())}return null}(l,c),g=function(O,B){let Q=[],H=!0;for(let I of Oi(B)){let v=I.kind===0?G0(O,I.fieldPath,O.startAt):W0(O,I.fieldPath,O.startAt);Q.push(v.value),H&&(H=v.inclusive)}return new Nn(Q,H)}(l,c),y=function(O,B){let Q=[],H=!0;for(let I of Oi(B)){let v=I.kind===0?W0(O,I.fieldPath,O.endAt):G0(O,I.fieldPath,O.endAt);Q.push(v.value),H&&(H=v.inclusive)}return new Nn(Q,H)}(l,c),_=this.hn(c,l,g),A=this.hn(c,l,y),b=this.Pn(c,l,f),P=this.In(c.indexId,d,_,g.inclusive,A,y.inclusive,b);return x.forEach(P,j=>r.G(j,t.limit).next(O=>{O.forEach(B=>{let Q=$.fromSegments(B.documentKey);s.has(Q)||(s=s.add(Q),a.push(Q))})}))}).next(()=>a)}return x.resolve(null)})}cn(e){let t=this.un.get(e);return t||(e.filters.length===0?t=[e]:t=K2(_e.create(e.filters,"and")).map(r=>hv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),d=[];for(let f=0;f<c;++f){let g=t?this.Tn(t[f/l]):Rd,y=this.En(e,g,r[f%l],i),_=this.dn(e,g,o[f%l],s),A=a.map(b=>this.En(e,g,b,!0));d.push(...this.createRange(y,_,A))}return d}En(e,t,r,i){let o=new ji(e,$.empty(),t,r);return i?o:o.Jt()}dn(e,t,r,i){let o=new ji(e,$.empty(),t,r);return i?o.Jt():o}ln(e,t){let r=new oh(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.cn(t);return x.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Ce(ze.comparator),d=!1;for(let f of c.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}An(e,t){let r=new Vi;for(let i of Oi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);Zn.bt.Pt(o,s)}return r.Wt()}Tn(e){let t=new Vi;return Zn.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){let r=new Vi;return Zn.bt.Pt(qi(this.databaseId,t),r.Ht(function(o){let s=Oi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(r===null)return[];let i=[];i.push(new Vi);let o=0;for(let s of Oi(e)){let a=r[o++];for(let c of i)if(this.Vn(t,s.fieldPath)&&Nc(a))i=this.mn(i,s,a);else{let l=c.Ht(s.kind);Zn.bt.Pt(a,l)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Vi;c.seed(a.Wt()),Zn.bt.Pt(s,c.Ht(t.kind)),o.push(c)}return o}Vn(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=yc(e),i=us(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return x.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(d,f){let g=f?new Sc(f.sequenceNumber,new Zt(Ki(f.readTime),new $(Cn(f.documentKey)),f.largestBatchId)):Sc.empty(),y=d.fields.map(([_,A])=>new ys(ze.fromServerFormat(_),A));return new Is(d.indexId,d.collectionGroup,y,g)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ie(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=yc(e),o=us(e);return this.gn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>x.forEach(a,c=>o.put(aS(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return x.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?x.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),x.forEach(a,c=>this.pn(e,i,c).next(l=>{let d=this.yn(o,c);return l.isEqual(d)?x.resolve():this.wn(e,o,c,l,d)}))))})}Sn(e,t,r,i){return cs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return cs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){let i=cs(e),o=new Ce(kr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(s,a)=>{o=o.add(new ji(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,t){let r=new Ce(kr),i=this.An(t,e);if(i==null)return r;let o=Qy(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Nc(s))for(let a of s.arrayValue.values||[])r=r.add(new ji(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new ji(t.indexId,e.key,Rd,i));return r}wn(e,t,r,i,o){F("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,d,f,g){let y=c.getIterator(),_=l.getIterator(),A=as(y),b=as(_);for(;A||b;){let P=!1,j=!1;if(A&&b){let O=d(A,b);O<0?j=!0:O>0&&(P=!0)}else A!=null?j=!0:P=!0;P?(f(b),b=as(_)):j?(g(A),A=as(y)):(A=as(y),b=as(_))}}(i,o,kr,a=>{s.push(this.Sn(e,t,r,a))},a=>{s.push(this.bn(e,t,r,a))}),x.waitFor(s)}gn(e){let t=1;return us(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>kr(s,a)).filter((s,a,c)=>!a||kr(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=kr(s,e),c=kr(s,t);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(s),i.push(s.Jt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Rd,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Rd,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,t){return kr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(pS)}getMinOffset(e,t){return x.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||z())).next(pS)}};function fS(n){return tt(n,"collectionParents")}function cs(n){return tt(n,"indexEntries")}function yc(n){return tt(n,"indexConfiguration")}function us(n){return tt(n,"indexState")}function pS(n){K(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Bw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Zt(e.readTime,e.documentKey,t)}var gS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function FA(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(d,f,g)=>(a++,g.delete()));o.push(c.next(()=>{K(a===1)}));let l=[];for(let d of t.mutations){let f=$S(e,d.key.path,t.batchId);o.push(i.delete(f)),l.push(d.key)}return x.waitFor(o).next(()=>l)}function ah(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(41943040,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);var ch=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Or(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=gs(e),s=Or(e);return s.add({}).next(a=>{K(typeof a=="number");let c=new kc(a,t,r,i),l=function(y,_,A){let b=A.baseMutations.map(j=>jc(y.ct,j)),P=A.mutations.map(j=>jc(y.ct,j));return{userId:_,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:b,mutations:P}}(this.serializer,this.userId,c),d=[],f=new Ce((g,y)=>ie(g.canonicalString(),y.canonicalString()));for(let g of i){let y=$S(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(y,t2))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),x.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return Or(e).get(t).next(r=>r?(K(r.userId===this.userId),Li(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?x.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Or(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(K(a.batchId>=r),o=Li(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Or(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Or(e).U("userMutationsIndex",t).next(r=>r.map(i=>Li(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Od(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return gs(e).J({range:i},(s,a,c)=>{let[l,d,f]=s,g=Cn(d);if(l===this.userId&&t.path.isEqual(g))return Or(e).get(f).next(y=>{if(!y)throw z();K(y.userId===this.userId),o.push(Li(this.serializer,y))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ce(ie),i=[];return t.forEach(o=>{let s=Od(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=gs(e).J({range:a},(l,d,f)=>{let[g,y,_]=l,A=Cn(y);g===this.userId&&o.path.isEqual(A)?r=r.add(_):f.done()});i.push(c)}),x.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Od(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ce(ie);return gs(e).J({range:s},(c,l,d)=>{let[f,g,y]=c,_=Cn(g);f===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(y)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Or(e).get(o).next(s=>{if(s===null)throw z();K(s.userId===this.userId),r.push(Li(this.serializer,s))}))}),x.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return FA(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),x.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return x.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return gs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Cn(o[1]);i.push(c)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,t){return LA(e,this.userId,t)}xn(e){return VA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function LA(n,e,t){let r=Od(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return gs(n).J({range:o,H:!0},(a,c,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function Or(n){return tt(n,"mutations")}function gs(n){return tt(n,"documentMutations")}function VA(n){return tt(n,"mutationQueues")}var As=class n{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var Pv=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{let r=new As(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>J.fromTimestamp(new Oe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ls(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return ls(e).J((s,a)=>{let c=Ic(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>x.waitFor(o)).next(()=>i)}forEachTarget(e,t){return ls(e).J((r,i)=>{let o=Ic(i);t(o)})}Bn(e){return mS(e).get("targetGlobalKey").next(t=>(K(t!==null),t))}kn(e,t){return mS(e).put("targetGlobalKey",t)}qn(e,t){return ls(e).put(PA(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Hi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ls(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=Ic(a);Yc(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Fr(e);return t.forEach(s=>{let a=Tt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),x.waitFor(i)}removeMatchingKeys(e,t,r){let i=Fr(e);return x.forEach(t,o=>{let s=Tt(o.path);return x.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Fr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Fr(e),o=le();return i.J({range:r,H:!0},(s,a,c)=>{let l=Cn(s[1]),d=new $(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=Tt(t.path),i=IDBKeyRange.bound([r],[FS(r)],!1,!0),o=0;return Fr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return ls(e).get(t).next(r=>r?Ic(r):null)}};function ls(n){return tt(n,"targets")}function mS(n){return tt(n,"targetGlobal")}function Fr(n){return tt(n,"targetDocuments")}function yS([n,e],[t,r]){let i=ie(n,t);return i===0?ie(e,r):i}var kv=class{constructor(e){this.Kn=e,this.buffer=new Ce(yS),this.$n=0}Un(){return++this.$n}Wn(e){let t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();yS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Ov=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){F("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zr(t)?F("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Yr(t)}yield this.zn(3e5)}))}},Fv=class{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve($t.oe);let r=new kv(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(gS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gS):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,o,s,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),ds()<=gn.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function Q2(n,e){return new Fv(n,e)}var Lv=class{constructor(e,t){this.db=e,this.garbageCollector=Q2(this,t)}Hn(e){let t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return Nd(e,r)}removeReference(e,t,r){return Nd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Nd(e,t)}er(e,t){return function(i,o){let s=!1;return VA(i).Y(a=>LA(i,a,o).next(c=>(c&&(s=!0),x.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=t){let c=this.er(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,J.min()),Fr(e).delete(function(f){return[0,Tt(f.path)]}(s))))});i.push(c)}}).next(()=>x.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Nd(e,t)}Xn(e,t){let r=Fr(e),i,o=$t.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==$t.oe&&t(new $(Cn(i)),o),o=l,i=c):o=$t.oe}).next(()=>{o!==$t.oe&&t(new $(Cn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Nd(n,e){return Fr(n).put(function(r,i){return{targetId:0,path:Tt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var uh=class{constructor(){this.changes=new Pn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ze.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Vv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ki(e).put(r)}removeEntry(e,t,r){return ki(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],rh(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=Ze.newInvalidDocument(t);return ki(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(vc(t))},(i,o)=>{r=this.nr(t,o)}).next(()=>r)}rr(e,t){let r={size:0,document:Ze.newInvalidDocument(t)};return ki(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(vc(t))},(i,o)=>{r={document:this.nr(t,o),size:ah(o)}}).next(()=>r)}getEntries(e,t){let r=Lt();return this.ir(e,t,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,t){let r=Lt(),i=new xe($.comparator);return this.ir(e,t,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,ah(s))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return x.resolve();let i=new Ce(ES);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(vc(i.first()),vc(i.last())),s=i.getIterator(),a=s.getNext();return ki(e).J({index:"documentKeyIndex",range:o},(c,l,d)=>{let f=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&ES(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$(vc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),rh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ki(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=Lt();for(let f of l){let g=this.nr($.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Jc(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=Lt(),s=wS(t,r),a=wS(t,Zt.max());return ki(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,d)=>{let f=this.nr($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new jv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vS(e).get("remoteDocumentGlobalKey").next(t=>(K(!!t),t))}tr(e,t){return vS(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){let r=G2(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(J.min())))return r}return Ze.newInvalidDocument(e)}};function jA(n){return new Vv(n)}var jv=class extends uh{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Pn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ce((o,s)=>ie(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(t.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=oS(this.ar.serializer,s);i=i.add(o.path.popLast());let l=ah(c);r+=l-a.size,t.push(this.ar.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=oS(this.ar.serializer,s.convertToNoDocument(J.min()));t.push(this.ar.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.ar.updateMetadata(e,r)),x.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function vS(n){return tt(n,"remoteDocumentGlobal")}function ki(n){return tt(n,"remoteDocumentsV14")}function vc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wS(n,e){let t=e.documentKey.path.toArray();return[n,rh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ES(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ie(t[o],r[o]),i)return i;return i=ie(t.length,r.length),i||(i=ie(t[t.length-2],r[r.length-2]),i||ie(t[t.length-1],r[r.length-1]))}var Uv=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var lh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Tc(r.mutation,i,qt.empty(),Oe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=le()){let i=Sn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Ec();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Sn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,le()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Lt(),s=Dc(),a=function(){return Dc()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof hn)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),Tc(d.mutation,l,d.mutation.getFieldMask(),Oe.now())):s.set(l.key,qt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new Uv(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Dc(),i=new xe((s,a)=>s-a),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||qt.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||le()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=cA();d.forEach(g=>{if(!o.has(g)){let y=mA(t.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Hw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(Sn()),a=-1,c=o;return s.next(l=>x.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?x.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,le())).next(d=>({batchId:a,changes:aA(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=Ec();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Ec();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,c=>{let l=function(f,g){return new dn(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,Ze.newInvalidDocument(d)))});let a=Ec();return s.forEach((c,l)=>{let d=o.get(c);d!==void 0&&Tc(d.mutation,l,qt.empty(),Oe.now()),Jc(t,l)&&(a=a.insert(c,l))}),a})}};var Bv=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return x.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:He(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(i){return{name:i.name,query:Kw(i.bundledQuery),readTime:He(i.readTime)}}(t)),x.resolve()}};var $v=class{constructor(){this.overlays=new xe($.comparator),this.hr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Sn();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=Sn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new xe((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=Sn(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Sn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return x.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Oc(t,r));let o=this.hr.get(t);o===void 0&&(o=le(),this.hr.set(t,o)),this.hr.set(t,o.add(r.key))}};var Bc=class{constructor(){this.Pr=new Ce(Ke.Ir),this.Tr=new Ce(Ke.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){let r=new Ke(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Ke(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){let t=new $(new me([])),r=new Ke(t,e),i=new Ke(t,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let t=new $(new me([])),r=new Ke(t,e),i=new Ke(t,e+1),o=le();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ke(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ke=class{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return $.comparator(e.key,t.key)||ie(e.pr,t.pr)}static Er(e,t){return ie(e.pr,t.pr)||$.comparator(e.key,t.key)}};var qv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Ce(Ke.Ir)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new kc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Ke(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.br(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ke(t,0),i=new Ke(t,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ce(ie);return t.forEach(i=>{let o=new Ke(i,0),s=new Ke(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),x.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Ke(new $(o),0),a=new Ce(ie);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},s),x.resolve(this.Dr(a))}Dr(e){let t=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){K(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return x.forEach(t.mutations,i=>{let o=new Ke(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){let r=new Ke(t,0),i=this.wr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var zv=class{constructor(e){this.vr=e,this.docs=function(){return new xe($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():Ze.newInvalidDocument(t))}getEntries(e,t){let r=Lt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ze.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Lt(),s=t.path,a=new $(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Bw(VS(d),r)<=0||(i.has(d.key)||Jc(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Fr(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Hv(this)}getSize(e){return x.resolve(this.size)}},Hv=class extends uh{constructor(e){super(),this.ar=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}};var Gv=class{constructor(e){this.persistence=e,this.Mr=new Pn(t=>Hi(t),Yc),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Bc,this.targetCount=0,this.Lr=As.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),x.resolve()}qn(e){this.Mr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Lr=new As(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.qn(t),x.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.Mr.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Nr.gr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.Nr.containsKey(t))}};var dh=class{constructor(e,t){this.Br={},this.overlays={},this.kr=new $t(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Gv(this),this.indexManager=new Rv,this.remoteDocumentCache=function(i){return new zv(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new nh(t),this.$r=new Bv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $v,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new qv(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){F("MemoryPersistence","Starting transaction:",e);let i=new Wv(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,t){return x.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}},Wv=class extends zd{constructor(e){super(),this.currentSequenceNumber=e}},hh=class n{constructor(e){this.persistence=e,this.zr=new Bc,this.jr=null}static Hr(e){return new n(e)}get Jr(){if(this.jr)return this.jr;throw z()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),x.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Jr,r=>{let i=$.fromPath(r);return this.Yr(e,i).next(o=>{o||t.removeEntry(i,J.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return x.or([()=>x.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}};var Kv=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Hd("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",L0,{unique:!0}),c.createObjectStore("documentMutations")}(e),IS(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=x.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),IS(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",L0,{unique:!0});let f=l.store("mutations"),g=d.map(y=>f.put(y));return x.waitFor(g)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:f2});l.createIndex("collectionPathOverlayIndex",p2,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",g2,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:n2});l.createIndex("documentKeyIndex",r2),l.createIndex("collectionGroupIndex",i2)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:u2}).createIndex("sequenceNumberIndex",l2,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:d2}).createIndex("documentKeyIndex",h2,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),s}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=ah(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>x.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>x.forEach(a,c=>{K(c.userId===o.userId);let l=Li(this.serializer,c);return FA(e,o.userId,l).next(()=>{})}))}))}ti(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new me(s),l=function(f){return[0,Tt(f)]}(c);o.push(t.get(l).next(d=>d?x.resolve():(f=>t.put({targetId:0,path:Tt(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>x.waitFor(o))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:c2});let r=t.store("collectionParents"),i=new Uc,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Tt(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new me(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let d=Cn(a);return o(d.popLast())}))}ri(e){let t=e.store("targets");return t.J((r,i)=>{let o=Ic(i),s=PA(this.serializer,o);return t.put(s)})}ii(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(f){return f.document?new $(me.fromString(f.document.name).popFirst(5)):f.noDocument?$.fromSegments(f.noDocument.path):f.unknownDocument?$.fromSegments(f.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>x.waitFor(i))}si(e,t){let r=t.store("mutations"),i=jA(this.serializer),o=new dh(hh.Hr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:le();Li(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),x.forEach(a,(c,l)=>{let d=new Qe(l),f=ih.lt(this.serializer,d),g=o.getIndexManager(d),y=ch.lt(d,this.serializer,g,o.referenceDelegate);return new lh(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new xc(t,$t.oe),c).next()})})}};function IS(n){n.createObjectStore("targetDocuments",{keyPath:s2}).createIndex("documentTargetsIndex",a2,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",o2,{unique:!0}),n.createObjectStore("targetGlobal")}var jy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Qv=class n{constructor(e,t,r,i,o,s,a,c,l,d,f=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=d,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=g=>Promise.resolve(),!n.D())throw new k(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Lv(this,i),this.Ti=t+"main",this.serializer=new nh(c),this.Ei=new Br(this.Ti,this.ui,new Kv(this.serializer)),this.Qr=new Pv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=jA(this.serializer),this.$r=new Tv,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&qe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,jy);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new $t(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Pd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Zr(e))return F("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return F("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return wc(e).get("owner").next(t=>x.resolve(this.Si(t)))}bi(e){return Pd(e).delete(this.clientId)}Di(){return N(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=tt(t,"clientMetadata");return r.U().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return x.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let t of e)this.di.removeItem(this.Fi(t.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?x.resolve(!0):wc(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,jy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pd(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&F("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new xc(e,$t.oe);return this.yi(t).next(()=>this.bi(t))}),this.Ei.close(),this.Li()})}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Pd(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return ch.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Nv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ih.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){F("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===16?y2:c===15?GS:c===14?HS:c===13?zS:c===12?m2:c===11?qS:void z()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new xc(a,this.kr?this.kr.next():$t.oe),t==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw qe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new k(R.FAILED_PRECONDITION,jS);return r(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return wc(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(R.FAILED_PRECONDITION,jy)})}wi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wc(e).put("owner",t)}static D(){return Br.D()}yi(e){let t=wc(e);return t.get("owner").next(r=>this.Si(r)?(F("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):x.resolve())}Ci(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(qe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let t=/(?:Version|Mobile)\/1[456]/;Cf()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{let r=((t=this.di)===null||t===void 0?void 0:t.getItem(this.Fi(e)))!==null;return F("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){qe("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function wc(n){return tt(n,"owner")}function Pd(n){return tt(n,"clientMetadata")}function Yw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Yv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=le(),i=le();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Zv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var fh=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Cf()?8:US(ha())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ji(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Zv;return this.Ji(e,t,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,t,s,a.size)})}).next(()=>o.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(ds()<=gn.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",hs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),x.resolve()):(ds()<=gn.DEBUG&&F("QueryEngine","Query:",hs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(ds()<=gn.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",hs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bt(t))):x.resolve())}ji(e,t){if(K0(t))return x.resolve(null);let r=bt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Jd(t,null,"F"),r=bt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=le(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(t,a);return this.Xi(t,l,s,c.readTime)?this.ji(e,Jd(t,null,"F")):this.es(e,l,t,c)}))})))}Hi(e,t,r,i){return K0(t)||i.isEqual(J.min())?x.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(t,o);return this.Xi(t,s,r,i)?x.resolve(null):(ds()<=gn.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hs(t)),this.es(e,s,t,LS(i,-1)).next(a=>a))})}Zi(e,t){let r=new Ce(oA(e));return t.forEach((i,o)=>{Jc(e,o)&&(r=r.add(o))}),r}Xi(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,t,r){return ds()<=gn.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",hs(t)),this.zi.getDocumentsMatchingQuery(e,t,Zt.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Jv=class{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new xe(ie),this.rs=new Pn(o=>Hi(o),Yc),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lh(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}};function UA(n,e,t,r){return new Jv(n,e,t,r)}function BA(n,e){return N(this,null,function*(){let t=q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=le();for(let l of i){s.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Y2(n,e){let t=q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),y=x.resolve();return g.forEach(_=>{y=y.next(()=>d.getEntry(c,_)).next(A=>{let b=l.docVersions.get(_);K(b!==null),A.version.compareTo(b)<0&&(f.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),d.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function $A(n){let e=q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function Z2(n,e){let t=q(n),r=e.snapshotVersion,i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Qr.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Qr.addMatchingKeys(o,d.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(et.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(A,b,P){return A.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,y,d)&&a.push(t.Qr.updateTargetData(o,y))});let c=Lt(),l=le();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(qA(o,s,e.documentUpdates).next(d=>{c=d.cs,l=d.ls})),!r.isEqual(J.min())){let d=t.Qr.getLastRemoteSnapshotVersion(o).next(f=>t.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.ns=i,o))}function qA(n,e,t){let r=le(),i=le();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Lt();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(J.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:s,ls:i}})}function J2(n,e){let t=q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xs(n,e){let t=q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.Qr.allocateTargetId(r).next(s=>(i=new Ss(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Ms(n,e,t){return N(this,null,function*(){let r=q(n),i=r.ns.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Zr(s))throw s;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function ph(n,e,t){let r=q(n),i=J.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,d){let f=q(c),g=f.rs.get(d);return g!==void 0?x.resolve(f.ns.get(g)):f.Qr.getTargetData(l,d)}(r,s,bt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,t?i:J.min(),t?o:le())).next(a=>(GA(r,iA(e),a),{documents:a,hs:o})))}function zA(n,e){let t=q(n),r=q(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function HA(n,e){let t=q(n),r=t.ss.get(e)||J.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,LS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(GA(t,e,i),i))}function GA(n,e,t){let r=n.ss.get(e)||J.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ss.set(e,r)}function X2(n,e,t,r){return N(this,null,function*(){let i=q(n),o=le(),s=Lt();for(let l of t){let d=e.Ps(l.metadata.name);l.document&&(o=o.add(d));let f=e.Is(l);f.setReadTime(e.Ts(l.metadata.readTime)),s=s.insert(d,f)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield xs(i,function(d){return bt(Vs(me.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>qA(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Qr.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.cs,d.ls)).next(()=>d.cs)))})}function eU(r,i){return N(this,arguments,function*(n,e,t=le()){let o=yield xs(n,bt(Kw(e.bundledQuery))),s=q(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=He(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let l=o.withResumeToken(et.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(l.targetId,l),s.Qr.updateTargetData(a,l).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,t,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function _S(n,e){return`firestore_clients_${n}_${e}`}function DS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Uy(n,e){return`firestore_targets_${n}_${e}`}var gh=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(qe("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},bc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(qe("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},mh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Gw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=BS(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(qe("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},Xv=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(qe("SharedClientState",`Failed to parse online state: ${e}`),null)}},$c=class{constructor(){this.activeTargetIds=Gw()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Cc=class{constructor(e,t,r,i,o){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new xe(ie),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=_S(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new $c),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(_S(this.persistenceKey,r));if(i){let o=mh.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let t=this.storage.getItem(this.vs);if(t){let r=this.xs(t);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Uy(this.persistenceKey,e));if(r){let i=bc.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Uy(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return F("SharedClientState","READ",e,t),t}setItem(e,t){F("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){F("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let t=e;if(t.storageArea===this.storage){if(F("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void qe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.bs.test(t.key)){if(t.newValue==null){let r=this.$s(t.key);return this.Us(r,null)}{let r=this.Ws(t.key,t.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(t.key)){if(t.newValue!==null){let r=this.Gs(t.key,t.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(t.key)){if(t.newValue!==null){let r=this.js(t.key,t.newValue);if(r)return this.Hs(r)}}else if(t.key===this.vs){if(t.newValue!==null){let r=this.xs(t.newValue);if(r)return this.Os(r)}}else if(t.key===this.Ss){let r=function(o){let s=$t.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){qe("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==$t.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Fs){let r=this.Js(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){let i=new gh(this.currentUser,e,t,r),o=DS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){let t=DS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){let t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,r){let i=Uy(this.persistenceKey,e),o=new bc(e,t,r);this.setItem(i,o.ds())}Ks(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){let t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){let r=this.$s(e);return mh.Es(r,t)}Gs(e,t){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return gh.Es(new Qe(o),i,t)}js(e,t){let r=this.Cs.exec(e),i=Number(r[1]);return bc.Es(i,t)}xs(e){return Xv.Es(e)}Js(e){return JSON.parse(e)}zs(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);F("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){let r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Gw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},yh=class{constructor(){this.no=new $c,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new $c,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ew=class{io(e){}shutdown(){}};var vh=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var kd=null;function By(){return kd===null?kd=function(){return 268435456+Math.round(2147483648*Math.random())}():kd++,"0x"+kd.toString(16)}var tU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var tw=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var ft="WebChannelConnection",nw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Do(){return!1}Co(t,r,i,o,s){let a=By(),c=this.vo(t,r.toUriEncodedString());F("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,o,s),this.Mo(t,c,l,i).then(d=>(F("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Yt("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}xo(t,r,i,o,s,a){return this.Co(t,r,i,o,s)}Fo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ls}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}vo(t,r){let i=tU[t];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){let o=By();return new Promise((s,a)=>{let c=new Ny;c.setWithCredentials(!0),c.listenOnce(ky.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case gc.NO_ERROR:let d=c.getResponseJson();F(ft,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case gc.TIMEOUT:F(ft,`RPC '${e}' ${o} timed out`),a(new k(R.DEADLINE_EXCEEDED,"Request time out"));break;case gc.HTTP_ERROR:let f=c.getStatus();if(F(ft,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let _=function(b){let P=b.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(P)>=0?P:R.UNKNOWN}(y.status);a(new k(_,y.message))}else a(new k(R.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new k(R.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{F(ft,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);F(ft,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Oo(e,t,r){let i=By(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ly(),a=Fy(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new Py({})),this.Fo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");F(ft,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c),g=!1,y=!1,_=new tw({lo:b=>{y?F(ft,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(g||(F(ft,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),F(ft,`RPC '${e}' stream ${i} sending:`,b),f.send(b))},ho:()=>f.close()}),A=(b,P,j)=>{b.listen(P,O=>{try{j(O)}catch(B){setTimeout(()=>{throw B},0)}})};return A(f,ss.EventType.OPEN,()=>{y||(F(ft,`RPC '${e}' stream ${i} transport opened.`),_.mo())}),A(f,ss.EventType.CLOSE,()=>{y||(y=!0,F(ft,`RPC '${e}' stream ${i} transport closed`),_.po())}),A(f,ss.EventType.ERROR,b=>{y||(y=!0,Yt(ft,`RPC '${e}' stream ${i} transport errored:`,b),_.po(new k(R.UNAVAILABLE,"The operation could not be completed")))}),A(f,ss.EventType.MESSAGE,b=>{var P;if(!y){let j=b.data[0];K(!!j);let O=j,B=O.error||((P=O[0])===null||P===void 0?void 0:P.error);if(B){F(ft,`RPC '${e}' stream ${i} received error:`,B);let Q=B.status,H=function(E){let D=We[E];if(D!==void 0)return wA(D)}(Q),I=B.message;H===void 0&&(H=R.INTERNAL,I="Unknown error status: "+Q+" with message "+B.message),y=!0,_.po(new k(H,I)),f.close()}else F(ft,`RPC '${e}' stream ${i} received:`,j),_.yo(j)}}),A(a,Oy.STAT_EVENT,b=>{b.stat===Md.PROXY?F(ft,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===Md.NOPROXY&&F(ft,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.fo()},0),_}};function WA(){return typeof window<"u"?window:null}function jd(){return typeof document<"u"?document:null}function Xc(n){return new wv(n,!0)}var qc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var wh=class{constructor(e,t,r,i,o,s,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new qc(e,t)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return N(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return N(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){return N(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(qe(t.toString()),qe("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(t)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{let i=new k(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){let r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>N(this,null,function*(){this.state=0,this.start()}))}c_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},rw=class extends wh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();let t=j2(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?He(s.readTime):J.min()}(e);return this.listener.h_(t,r)}P_(e){let t={};t.database=_v(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=Yd(c)?{documents:SA(o,c)}:{query:AA(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=IA(o,s.resumeToken);let l=Ev(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=Cs(o,s.snapshotVersion.toTimestamp());let l=Ev(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=B2(this.serializer,e);r&&(t.labels=r),this.i_(t)}I_(e){let t={};t.database=_v(this.serializer),t.removeTarget=e,this.i_(t)}},iw=class extends wh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let t=U2(e.writeResults,e.commitTime),r=He(e.commitTime);return this.listener.A_(r,t)}return K(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=_v(this.serializer),this.i_(e)}d_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>jc(this.serializer,r))};this.i_(t)}};var ow=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,Iv(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(R.UNKNOWN,o.toString())})}xo(e,t,r,i,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,Iv(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(R.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},sw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(qe(t),this.y_=!1):F("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var aw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{r.enqueueAndForget(()=>N(this,null,function*(){Jr(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(c){return N(this,null,function*(){let l=q(c);l.M_.add(4),yield js(l),l.N_.set("Unknown"),l.M_.delete(4),yield eu(l)})}(this))}))}),this.N_=new sw(r,i)}};function eu(n){return N(this,null,function*(){if(Jr(n))for(let e of n.x_)yield e(!0)})}function js(n){return N(this,null,function*(){for(let e of n.x_)yield e(!1)})}function Vh(n,e){let t=q(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),Xw(t)?Jw(t):Bs(t).Xo()&&Zw(t,e))}function Rs(n,e){let t=q(n),r=Bs(t);t.F_.delete(e),r.Xo()&&KA(t,e),t.F_.size===0&&(r.Xo()?r.n_():Jr(t)&&t.N_.set("Unknown"))}function Zw(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bs(n).P_(e)}function KA(n,e){n.L_.xe(e),Bs(n).I_(e)}function Jw(n){n.L_=new vv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Bs(n).start(),n.N_.w_()}function Xw(n){return Jr(n)&&!Bs(n).Zo()&&n.F_.size>0}function Jr(n){return q(n).M_.size===0}function QA(n){n.L_=void 0}function nU(n){return N(this,null,function*(){n.N_.set("Online")})}function rU(n){return N(this,null,function*(){n.F_.forEach((e,t)=>{Zw(n,e)})})}function iU(n,e){return N(this,null,function*(){QA(n),Xw(n)?(n.N_.D_(e),Jw(n)):n.N_.set("Unknown")})}function oU(n,e,t){return N(this,null,function*(){if(n.N_.set("Online"),e instanceof eh&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.F_.delete(a),i.L_.removeTarget(a))})}(n,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Eh(n,r)}else if(e instanceof ws?n.L_.Ke(e):e instanceof Xd?n.L_.He(e):n.L_.We(e),!t.isEqual(J.min()))try{let r=yield $A(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.F_.get(l);d&&o.F_.set(l,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let d=o.F_.get(c);if(!d)return;o.F_.set(c,d.withResumeToken(et.EMPTY_BYTE_STRING,d.snapshotVersion)),KA(o,c);let f=new Ss(d.target,c,l,d.sequenceNumber);Zw(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){F("RemoteStore","Failed to raise snapshot:",r),yield Eh(n,r)}})}function Eh(n,e,t){return N(this,null,function*(){if(!Zr(e))throw e;n.M_.add(1),yield js(n),n.N_.set("Offline"),t||(t=()=>$A(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield eu(n)}))})}function YA(n,e){return e().catch(t=>Eh(n,t,e))}function Us(n){return N(this,null,function*(){let e=q(n),t=Qr(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;sU(e);)try{let i=yield J2(e.localStore,r);if(i===null){e.v_.length===0&&t.n_();break}r=i.batchId,aU(e,i)}catch(i){yield Eh(e,i)}ZA(e)&&JA(e)})}function sU(n){return Jr(n)&&n.v_.length<10}function aU(n,e){n.v_.push(e);let t=Qr(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function ZA(n){return Jr(n)&&!Qr(n).Zo()&&n.v_.length>0}function JA(n){Qr(n).start()}function cU(n){return N(this,null,function*(){Qr(n).V_()})}function uU(n){return N(this,null,function*(){let e=Qr(n);for(let t of n.v_)e.d_(t.mutations)})}function lU(n,e,t){return N(this,null,function*(){let r=n.v_.shift(),i=gv.from(r,e,t);yield YA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Us(n)})}function dU(n,e){return N(this,null,function*(){e&&Qr(n).E_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return vA(s)&&s!==R.ABORTED}(i.code)){let o=r.v_.shift();Qr(r).t_(),yield YA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Us(r)}})}(n,e)),ZA(n)&&JA(n)})}function TS(n,e){return N(this,null,function*(){let t=q(n);t.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let r=Jr(t);t.M_.add(3),yield js(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield eu(t)})}function cw(n,e){return N(this,null,function*(){let t=q(n);e?(t.M_.delete(2),yield eu(t)):e||(t.M_.add(2),yield js(t),t.N_.set("Unknown"))})}function Bs(n){return n.B_||(n.B_=function(t,r,i){let o=q(t);return o.f_(),new rw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:nU.bind(null,n),To:rU.bind(null,n),Ao:iU.bind(null,n),h_:oU.bind(null,n)}),n.x_.push(e=>N(this,null,function*(){e?(n.B_.t_(),Xw(n)?Jw(n):n.N_.set("Unknown")):(yield n.B_.stop(),QA(n))}))),n.B_}function Qr(n){return n.k_||(n.k_=function(t,r,i){let o=q(t);return o.f_(),new iw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:cU.bind(null,n),Ao:dU.bind(null,n),R_:uU.bind(null,n),A_:lU.bind(null,n)}),n.x_.push(e=>N(this,null,function*(){e?(n.k_.t_(),yield Us(n)):(yield n.k_.stop(),n.v_.length>0&&(F("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))}))),n.k_}var uw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ye,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function $s(n,e){if(qe("AsyncQueue",`${e}: ${n}`),Zr(n))return new k(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Ih=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=Ec(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var _h=class{constructor(){this.q_=new xe($.comparator)}track(e){let t=e.doc.key,r=this.q_.get(t);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(t,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(t):e.type===1&&r.type===2?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):z():this.q_=this.q_.insert(t,e)}Q_(){let e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ns=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Ih.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var lw=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},dw=class{constructor(){this.queries=new Pn(e=>rA(e),Zc),this.onlineState="Unknown",this.z_=new Set}};function eE(n,e){return N(this,null,function*(){let t=q(n),r=3,i=e.query,o=t.queries.get(i);o?!o.W_()&&e.G_()&&(r=2):(o=new lw,r=e.G_()?0:1);try{switch(r){case 0:o.K_=yield t.onListen(i,!0);break;case 1:o.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=$s(s,`Initialization of query '${hs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.U_.push(e),e.j_(t.onlineState),o.K_&&e.H_(o.K_)&&nE(t)})}function tE(n,e){return N(this,null,function*(){let t=q(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?i=e.G_()?0:1:!o.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function hU(n,e){let t=q(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&nE(t)}function fU(n,e,t){let r=q(n),i=r.queries.get(e);if(i)for(let o of i.U_)o.onError(t);r.queries.delete(e)}function nE(n){n.z_.forEach(e=>{e.next()})}var hw,bS;(bS=hw||(hw={})).J_="default",bS.Cache="cache";var zc=class{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ns(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache||!this.G_())return!0;let r=t!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}na(e){e=Ns.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==hw.Cache}};var fw=class{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}};var Dh=class{constructor(e){this.serializer=e}Ps(e){return xn(this.serializer,e)}Is(e){return e.metadata.exists?CA(this.serializer,e.document,!1):Ze.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return He(e)}},pw=class{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=XA(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;let r=me.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){let t=new Map,r=new Dh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||le()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield X2(this.localStore,new Dh(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(let r of this.queries)yield eU(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function XA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Th=class{constructor(e){this.key=e}},bh=class{constructor(e){this.key=e}},Ch=class{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=le(),this.mutatedKeys=le(),this.Ia=oA(e),this.Ta=new Ih(this.Ia)}get Ea(){return this.la}da(e,t){let r=t?t.Aa:new _h,i=t?t.Ta:this.Ta,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=Jc(this.query,f)?f:null,_=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),b=!1;g&&y?g.data.isEqual(y.data)?_!==A&&(r.track({type:3,doc:y}),b=!0):this.Ra(g,y)||(r.track({type:2,doc:y}),b=!0,(c&&this.Ia(y,c)>0||l&&this.Ia(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),b=!0):g&&!y&&(r.track({type:1,doc:g}),b=!0,(c||l)&&(a=!0)),b&&(y?(s=s.add(y),o=A?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ta:s,Aa:r,Xi:a,mutatedKeys:o}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((d,f)=>function(y,_){let A=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return A(y)-A(_)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(r),i=i!=null&&i;let a=t&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,s.length!==0||l?{snapshot:new Ns(this.query,e.Ta,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new _h,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=le(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new bh(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new Th(r))}),t}pa(e){this.la=e.hs,this.Pa=le();let t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Ns.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},gw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},mw=class{constructor(e){this.key=e,this.wa=!1}},yw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Pn(a=>rA(a),Zc),this.Da=new Map,this.Ca=new Set,this.va=new xe($.comparator),this.Fa=new Map,this.Ma=new Bc,this.xa={},this.Oa=new Map,this.Na=As.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function pU(n,e,t=!0){return N(this,null,function*(){let r=jh(n),i,o=r.ba.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=yield ex(r,e,t,!0),i})}function gU(n,e){return N(this,null,function*(){let t=jh(n);yield ex(t,e,!0,!1)})}function ex(n,e,t,r){return N(this,null,function*(){let i=yield xs(n.localStore,bt(e)),o=i.targetId,s=t?n.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield rE(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Vh(n.remoteStore,i),a})}function rE(n,e,t,r,i){return N(this,null,function*(){n.Ba=(f,g,y)=>function(A,b,P,j){return N(this,null,function*(){let O=b.view.da(P);O.Xi&&(O=yield ph(A.localStore,b.query,!1).then(({documents:I})=>b.view.da(I,O)));let B=j&&j.targetChanges.get(b.targetId),Q=j&&j.targetMismatches.get(b.targetId)!=null,H=b.view.applyChanges(O,A.isPrimaryClient,B,Q);return vw(A,b.targetId,H.fa),H.snapshot})}(n,f,g,y);let o=yield ph(n.localStore,e,!0),s=new Ch(e,o.hs),a=s.da(o.documents),c=Lc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);vw(n,t,l.fa);let d=new gw(e,t,s);return n.ba.set(e,d),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),l.snapshot})}function mU(n,e,t){return N(this,null,function*(){let r=q(n),i=r.ba.get(e),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!Zc(s,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ms(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Rs(r.remoteStore,i.targetId),Ps(r,i.targetId)}).catch(Yr))):(Ps(r,i.targetId),yield Ms(r.localStore,i.targetId,!0))})}function yU(n,e){return N(this,null,function*(){let t=q(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Rs(t.remoteStore,r.targetId))})}function vU(n,e,t){return N(this,null,function*(){let r=aE(n);try{let i=yield function(s,a){let c=q(s),l=Oe.now(),d=a.reduce((y,_)=>y.add(_.key),le()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let _=Lt(),A=le();return c.os.getEntries(y,d).next(b=>{_=b,_.forEach((P,j)=>{j.isValidDocument()||(A=A.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,_)).next(b=>{f=b;let P=[];for(let j of a){let O=N2(j,f.get(j.key).overlayedDocument);O!=null&&P.push(new hn(j.key,O,YS(O.value.mapValue),je.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,P,a)}).next(b=>{g=b;let P=b.applyToLocalDocumentSet(f,A);return c.documentOverlayCache.saveOverlays(y,b.batchId,P)})}).then(()=>({batchId:g.batchId,changes:aA(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.xa[s.currentUser.toKey()];l||(l=new xe(ie)),l=l.insert(a,c),s.xa[s.currentUser.toKey()]=l}(r,i.batchId,t),yield ir(r,i.changes),yield Us(r.remoteStore)}catch(i){let o=$s(i,"Failed to persist write");t.reject(o)}})}function tx(n,e){return N(this,null,function*(){let t=q(n);try{let r=yield Z2(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Fa.get(o);s&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?K(s.wa):i.removedDocuments.size>0&&(K(s.wa),s.wa=!1))}),yield ir(t,r,e)}catch(r){yield Yr(r)}})}function CS(n,e,t){let r=q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=q(s);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.U_)g.j_(a)&&(l=!0)}),l&&nE(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wU(n,e,t){return N(this,null,function*(){let r=q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Fa.get(e),o=i&&i.key;if(o){let s=new xe($.comparator);s=s.insert(o,Ze.newNoDocument(o,J.min()));let a=le().add(o),c=new Fc(J.min(),new Map,new xe(ie),s,a);yield tx(r,c),r.va=r.va.remove(o),r.Fa.delete(e),sE(r)}else yield Ms(r.localStore,e,!1).then(()=>Ps(r,e,t)).catch(Yr)})}function EU(n,e){return N(this,null,function*(){let t=q(n),r=e.batch.batchId;try{let i=yield Y2(t.localStore,e);oE(t,r,null),iE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ir(t,i)}catch(i){yield Yr(i)}})}function IU(n,e,t){return N(this,null,function*(){let r=q(n);try{let i=yield function(s,a){let c=q(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(K(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);oE(r,e,t),iE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ir(r,i)}catch(i){yield Yr(i)}})}function _U(n,e){return N(this,null,function*(){let t=q(n);Jr(t.remoteStore)||F("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=q(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){let i=$s(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function iE(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function oE(n,e,t){let r=q(n),i=r.xa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Ps(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||nx(n,r)})}function nx(n,e){n.Ca.delete(e.path.canonicalString());let t=n.va.get(e);t!==null&&(Rs(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),sE(n))}function vw(n,e,t){for(let r of t)r instanceof Th?(n.Ma.addReference(r.key,e),DU(n,r)):r instanceof bh?(F("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||nx(n,r.key)):z()}function DU(n,e){let t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(F("SyncEngine","New document in limbo: "+t),n.Ca.add(r),sE(n))}function sE(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){let e=n.Ca.values().next().value;n.Ca.delete(e);let t=new $(me.fromString(e)),r=n.Na.next();n.Fa.set(r,new mw(t)),n.va=n.va.insert(t,r),Vh(n.remoteStore,new Ss(bt(Vs(t.path)),r,"TargetPurposeLimboResolution",$t.oe))}}function ir(n,e,t){return N(this,null,function*(){let r=q(n),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{s.push(r.Ba(c,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let d=l&&!l.fromCache;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){i.push(l);let d=Yv.Ki(c.targetId,l);o.push(d)}}))}),yield Promise.all(s),r.Sa.h_(i),yield function(c,l){return N(this,null,function*(){let d=q(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>x.forEach(l,g=>x.forEach(g.qi,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>x.forEach(g.Qi,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!Zr(f))throw f;F("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.ns.get(g),_=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(_);d.ns=d.ns.insert(g,A)}}})}(r.localStore,o))})}function TU(n,e){return N(this,null,function*(){let t=q(n);if(!t.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());let r=yield BA(t.localStore,e);t.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(c=>{c.reject(new k(R.CANCELLED,s))})}),o.Oa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ir(t,r.us)}})}function bU(n,e){let t=q(n),r=t.Fa.get(e);if(r&&r.wa)return le().add(r.key);{let i=le(),o=t.Da.get(e);if(!o)return i;for(let s of o){let a=t.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function CU(n,e){return N(this,null,function*(){let t=q(n),r=yield ph(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&vw(t,e.targetId,i.fa),i})}function SU(n,e){return N(this,null,function*(){let t=q(n);return HA(t.localStore,e).then(r=>ir(t,r))})}function AU(n,e,t,r){return N(this,null,function*(){let i=q(n),o=yield function(a,c){let l=q(a),d=q(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.vn(f,c).next(g=>g?l.localDocuments.getDocuments(f,g):x.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Us(i.remoteStore):t==="acknowledged"||t==="rejected"?(oE(i,e,r||null),iE(i,e),function(a,c){q(q(a).mutationQueue).Mn(c)}(i.localStore,e)):z(),yield ir(i,o)):F("SyncEngine","Cannot apply mutation batch with id: "+e)})}function xU(n,e){return N(this,null,function*(){let t=q(n);if(jh(t),aE(t),e===!0&&t.La!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield SS(t,r.toArray());t.La=!0,yield cw(t.remoteStore,!0);for(let o of i)Vh(t.remoteStore,o)}else if(e===!1&&t.La!==!1){let r=[],i=Promise.resolve();t.Da.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ps(t,s),Ms(t.localStore,s,!0))),Rs(t.remoteStore,s)}),yield i,yield SS(t,r),function(s){let a=q(s);a.Fa.forEach((c,l)=>{Rs(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new xe($.comparator)}(t),t.La=!1,yield cw(t.remoteStore,!1)}})}function SS(n,e,t){return N(this,null,function*(){let r=q(n),i=[],o=[];for(let s of e){let a,c=r.Da.get(s);if(c&&c.length!==0){a=yield xs(r.localStore,bt(c[0]));for(let l of c){let d=r.ba.get(l),f=yield CU(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield zA(r.localStore,s);a=yield xs(r.localStore,l),yield rE(r,rx(l),s,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(o),i})}function rx(n){return nA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function MU(n){return function(t){return q(q(t).persistence).Bi()}(q(n).localStore)}function RU(n,e,t,r){return N(this,null,function*(){let i=q(n);if(i.La)return void F("SyncEngine","Ignoring unexpected query state notification.");let o=i.Da.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield HA(i.localStore,iA(o[0])),a=Fc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",et.EMPTY_BYTE_STRING);yield ir(i,s,a);break}case"rejected":yield Ms(i.localStore,e,!0),Ps(i,e,r);break;default:z()}})}function NU(n,e,t){return N(this,null,function*(){let r=jh(n);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){F("SyncEngine","Adding an already active target "+i);continue}let o=yield zA(r.localStore,i),s=yield xs(r.localStore,o);yield rE(r,rx(o),s.targetId,!1,s.resumeToken),Vh(r.remoteStore,s)}for(let i of t)r.Da.has(i)&&(yield Ms(r.localStore,i,!1).then(()=>{Rs(r.remoteStore,i),Ps(r,i)}).catch(Yr))}})}function jh(n){let e=q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wU.bind(null,e),e.Sa.h_=hU.bind(null,e.eventManager),e.Sa.ka=fU.bind(null,e.eventManager),e}function aE(n){let e=q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IU.bind(null,e),e}function PU(n,e,t){let r=q(n);(function(o,s,a){return N(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(y,_){let A=q(y),b=He(_.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",P=>A.$r.getBundleMetadata(P,_.id)).then(P=>!!P&&P.createTime.compareTo(b)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(XA(c));let l=new pw(c,o.localStore,s.serializer),d=yield s.qa();for(;d;){let g=yield l._a(d);g&&a._updateProgress(g),d=yield s.qa()}let f=yield l.complete();return yield ir(o,f.ca,void 0),yield function(y,_){let A=q(y);return A.persistence.runTransaction("Save bundle","readwrite",b=>A.$r.saveBundleMetadata(b,_))}(o.localStore,c),a._completeWith(f.progress),Promise.resolve(f.ua)}catch(c){return Yt("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Hc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){this.serializer=Xc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return UA(this.persistence,new fh,e.initialUser,this.serializer)}createPersistence(e){return new dh(hh.Hr,this.serializer)}createSharedClientState(e){return new yh}terminate(){return N(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Sh=class n extends Hc{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Tf(n.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield aE(this.Qa.syncEngine),yield Us(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return UA(this.persistence,new fh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Ov(r,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new Xy(t,this.persistence);return new Jy(e.asyncQueue,r)}createPersistence(e){let t=Yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new Qv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,WA(),jd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new yh}},ww=class n extends Sh{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Tf(n.prototype,this,"initialize").call(this,e);let t=this.Qa.syncEngine;this.sharedClientState instanceof Cc&&(this.sharedClientState.syncEngine={Zs:AU.bind(null,t),Xs:RU.bind(null,t),eo:NU.bind(null,t),Bi:MU.bind(null,t),Ys:SU.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>N(this,null,function*(){yield xU(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let t=WA();if(!Cc.D(t))throw new k(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Cc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Gc=class{initialize(e,t){return N(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>CS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=TU.bind(null,this.syncEngine),yield cw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new dw}()}createDatastore(e){let t=Xc(e.databaseInfo.databaseId),r=function(o){return new nw(o)}(e.databaseInfo);return function(o,s,a,c){return new ow(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,s,a){return new aw(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,t=>CS(this.syncEngine,t,0),function(){return vh.D()?new vh:new ew}())}createSyncEngine(e,t){return function(i,o,s,a,c,l,d){let f=new yw(i,o,s,a,c,l);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return N(this,null,function*(){var e;yield function(r){return N(this,null,function*(){let i=q(r);F("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield js(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function AS(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ks=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):qe("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var Ew=class{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Ye,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}qa(){return N(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return N(this,null,function*(){let e=yield this.za();if(e===null)return null;let t=this.Wa.decode(e),r=Number(t);isNaN(r)&&this.ja(`length string (${t}) is not valid number`);let i=yield this.Ha(r);return new fw(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return N(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Ha(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return N(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Iw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=q(i),a={documents:o.map(f=>Vc(s.serializer,f))},c=yield s.xo("BatchGetDocuments",s.serializer.databaseId,me.emptyPath(),a,o.length),l=new Map;c.forEach(f=>{let g=V2(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());K(!!g),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new Pc(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=q(r),s={writes:i.map(a=>jc(o.serializer,a))};yield o.Co("Commit",o.serializer.databaseId,me.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=J.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(J.min())?je.exists(!1):je.updateTime(t):je.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(J.min()))throw new k(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return je.updateTime(t)}return je.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var _w=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Za=r.maxAttempts,this.Yo=new qc(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>N(this,null,function*(){let e=new Iw(this.datastore),t=this.tu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let t=this.updateFunction(e);return!Qc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!vA(t)}return!1}};var Dw=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Qe.UNAUTHENTICATED,this.clientId=$d.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>N(this,null,function*(){F("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(F("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ye;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=$s(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ud(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield BA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Tw(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield cE(n);F("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>TS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>TS(e.remoteStore,i)),n._onlineComponents=e})}function ix(n){return n.name==="FirebaseError"?n.code===R.FAILED_PRECONDITION||n.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function cE(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ud(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!ix(t))throw t;Yt("Error using user provided cache. Falling back to memory cache: "+t),yield Ud(n,new Hc)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield Ud(n,new Hc);return n._offlineComponents})}function Uh(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield Tw(n,n._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield Tw(n,new Gc))),n._onlineComponents})}function ox(n){return cE(n).then(e=>e.persistence)}function uE(n){return cE(n).then(e=>e.localStore)}function sx(n){return Uh(n).then(e=>e.remoteStore)}function lE(n){return Uh(n).then(e=>e.syncEngine)}function kU(n){return Uh(n).then(e=>e.datastore)}function Os(n){return N(this,null,function*(){let e=yield Uh(n),t=e.eventManager;return t.onListen=pU.bind(null,e.syncEngine),t.onUnlisten=mU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=gU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yU.bind(null,e.syncEngine),t})}function OU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield ox(n),t=yield sx(n);return e.setNetworkEnabled(!0),function(i){let o=q(i);return o.M_.delete(0),eu(o)}(t)}))}function FU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield ox(n),t=yield sx(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=q(i);o.M_.add(0),yield js(o),o.N_.set("Offline")})}(t)}))}function LU(n,e){let t=new Ye;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,d){let f=q(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=$s(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield uE(n),e,t)})),t.promise}function ax(n,e,t={}){let r=new Ye;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,c,l){let d=new ks({next:g=>{s.enqueueAndForget(()=>tE(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new k(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new zc(Vs(a.path),d,{includeMetadataChanges:!0,ra:!0});return eE(o,f)}(yield Os(n),n.asyncQueue,e,t,r)})),r.promise}function VU(n,e){let t=new Ye;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield ph(i,o,!0),c=new Ch(o,a.hs),l=c.da(a.documents),d=c.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let c=$s(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield uE(n),e,t)})),t.promise}function cx(n,e,t={}){let r=new Ye;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,c,l){let d=new ks({next:g=>{s.enqueueAndForget(()=>tE(o,f)),g.fromCache&&c.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new zc(a,d,{includeMetadataChanges:!0,ra:!0});return eE(o,f)}(yield Os(n),n.asyncQueue,e,t,r)})),r.promise}function jU(n,e){let t=new ks(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){q(i).z_.add(o),o.next()}(yield Os(n),t)})),()=>{t.$a(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){q(i).z_.delete(o)}(yield Os(n),t)}))}}function UU(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?EA().encode(s):s,function(d,f){return new Ew(d,f)}(function(d,f){if(d instanceof Uint8Array)return AS(d,f);if(d instanceof ArrayBuffer)return AS(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Xc(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){PU(yield lE(n),i,r)}))}function BU(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=q(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield uE(n),e)}))}function ux(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var xS=new Map;function dE(n,e,t){if(!t)throw new k(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hE(n,e,t,r){if(e===!0&&r===!0)throw new k(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MS(n){if(!$.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RS(n){if($.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Bh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function ye(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Bh(n);throw new k(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function lx(n,e){if(e<=0)throw new k(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Ah=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ux((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Qi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ah({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new k(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ah(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $y;switch(r.type){case"firstParty":return new Gy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=xS.get(t);r&&(F("ComponentProvider","Removing Datastore"),xS.delete(t),r.terminate())}(this),Promise.resolve()}};function dx(n,e,t,r={}){var i;let o=(n=ye(n,Qi))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Yt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Qe.MOCK_USER;else{a=jI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Qe(l)}n._authCredentials=new qy(new Bd(a,c))}}var ot=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Se=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Mn=class n extends ot{constructor(e,t,r){super(e,t,Vs(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Se(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function fE(n,e,...t){if(n=Ne(n),dE("collection","path",e),n instanceof Qi){let r=me.fromString(e,...t);return RS(r),new Mn(n,null,r)}{if(!(n instanceof Se||n instanceof Mn))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(me.fromString(e,...t));return RS(r),new Mn(n.firestore,null,r)}}function hx(n,e){if(n=ye(n,Qi),dE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ot(n,null,function(r){return new dn(me.emptyPath(),r)}(e))}function tu(n,e,...t){if(n=Ne(n),arguments.length===1&&(e=$d.newId()),dE("doc","path",e),n instanceof Qi){let r=me.fromString(e,...t);return MS(r),new Se(n,null,new $(r))}{if(!(n instanceof Se||n instanceof Mn))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(me.fromString(e,...t));return MS(r),new Se(n.firestore,n instanceof Mn?n.converter:null,new $(r))}}function pE(n,e){return n=Ne(n),e=Ne(e),(n instanceof Se||n instanceof Mn)&&(e instanceof Se||e instanceof Mn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gE(n,e){return n=Ne(n),e=Ne(e),n instanceof ot&&e instanceof ot&&n.firestore===e.firestore&&Zc(n._query,e._query)&&n.converter===e.converter}var bw=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new qc(this,"async_queue_retry"),this.hu=()=>{let t=jd();t&&F("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};let e=jd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let t=jd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let t=new Ye;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return N(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Zr(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw qe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);let i=uw.createAndSchedule(this,e,t,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&z()}verifyOperationInProgress(){}du(){return N(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let t=this._u.indexOf(e);this._u.splice(t,1)}};function Cw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Sw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ye,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var fx=-1,Me=class extends Qi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new bw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||px(this),this._firestoreClient.terminate()}};function Je(n){return n._firestoreClient||px(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function px(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,d){return new ev(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,ux(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new Dw(n._authCredentials,n._appCheckCredentials,n._queue,o),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function gx(n,e){Tx(n=ye(n,Me));let t=Je(n);if(t._uninitializedComponentsProvider)throw new k(R.FAILED_PRECONDITION,"SDK cache is already specified.");Yt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=n._freezeSettings(),i=new Gc;return yx(t,i,new Sh(i,r.cacheSizeBytes,e?.forceOwnership))}function mx(n){Tx(n=ye(n,Me));let e=Je(n);if(e._uninitializedComponentsProvider)throw new k(R.FAILED_PRECONDITION,"SDK cache is already specified.");Yt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings(),r=new Gc;return yx(e,r,new ww(r,t.cacheSizeBytes))}function yx(n,e,t){let r=new Ye;return n.asyncQueue.enqueue(()=>N(this,null,function*(){try{yield Ud(n,t),yield Tw(n,e),r.resolve()}catch(i){let o=i;if(!ix(o))throw o;Yt("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function vx(n){if(n._initialized&&!n._terminated)throw new k(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Ye;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!Br.D())return Promise.resolve();let i=r+"main";yield Br.delete(i)})}(Yw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function wx(n){return function(t){let r=new Ye;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return _U(yield lE(t),r)})),r.promise}(Je(n=ye(n,Me)))}function Ex(n){return OU(Je(n=ye(n,Me)))}function Ix(n){return FU(Je(n=ye(n,Me)))}function _x(n,e){let t=Je(n=ye(n,Me)),r=new Sw;return UU(t,n._databaseId,e,r),r}function Dx(n,e){return BU(Je(n=ye(n,Me)),e).then(t=>t?new ot(n,null,t.query):null)}function Tx(n){if(n._initialized||n._terminated)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var kn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(et.fromBase64String(e))}catch(t){throw new k(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var fn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var nr=class{constructor(e){this._methodName=e}};var Yi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}};var $U=/^__.*__$/,Aw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new hn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wr(e,this.data,t,this.fieldTransforms)}},xh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function bx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var Mh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Rh(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(bx(this.fu)&&$U.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},xw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Xc(e)}Fu(e,t,r,i=!1){return new Mh({fu:e,methodName:t,vu:r,path:ze.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function eo(n){let e=n._freezeSettings(),t=Xc(n._databaseId);return new xw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $h(n,e,t,r,i,o={}){let s=n.Fu(o.merge||o.mergeFields?2:0,e,t,i);vE("Data must be an object, but it was:",s,r);let a=Ax(r,s),c,l;if(o.merge)c=new qt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=kw(e,f,t);if(!s.contains(g))throw new k(R.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Mx(d,g)||d.push(g)}c=new qt(d),l=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=s.fieldTransforms;return new Aw(new pt(a),c,l)}var Wc=class n extends nr{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Cx(n,e,t){return new Mh({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Mw=class n extends nr{_toFieldTransform(e){return new Gi(e.path,new Hr)}isEqual(e){return e instanceof n}},Rw=class n extends nr{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){let t=Cx(this,e,!0),r=this.Mu.map(o=>to(o,t)),i=new er(r);return new Gi(e.path,i)}isEqual(e){return e instanceof n&&Sf(this.Mu,e.Mu)}},Nw=class n extends nr{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){let t=Cx(this,e,!0),r=this.Mu.map(o=>to(o,t)),i=new tr(r);return new Gi(e.path,i)}isEqual(e){return e instanceof n&&Sf(this.Mu,e.Mu)}},Pw=class n extends nr{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){let t=new Gr(e.serializer,dA(e.serializer,this.xu));return new Gi(e.path,t)}isEqual(e){return e instanceof n&&this.xu===e.xu}};function mE(n,e,t,r){let i=n.Fu(1,e,t);vE("Data must be an object, but it was:",i,r);let o=[],s=pt.empty();Xi(r,(c,l)=>{let d=wE(e,c,t);l=Ne(l);let f=i.Su(d);if(l instanceof Wc)o.push(d);else{let g=to(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new qt(o);return new xh(s,a,i.fieldTransforms)}function yE(n,e,t,r,i,o){let s=n.Fu(1,e,t),a=[kw(e,r,t)],c=[i];if(o.length%2!=0)throw new k(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(kw(e,o[g])),c.push(o[g+1]);let l=[],d=pt.empty();for(let g=a.length-1;g>=0;--g)if(!Mx(l,a[g])){let y=a[g],_=c[g];_=Ne(_);let A=s.Su(y);if(_ instanceof Wc)l.push(y);else{let b=to(_,A);b!=null&&(l.push(y),d.set(y,b))}}let f=new qt(l);return new xh(d,f,s.fieldTransforms)}function Sx(n,e,t,r=!1){return to(t,n.Fu(r?4:3,e))}function to(n,e){if(xx(n=Ne(n)))return vE("Unsupported field value:",e,n),Ax(n,e);if(n instanceof nr)return function(r,i){if(!bx(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=to(a,i.bu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Oe.fromDate(r);return{timestampValue:Cs(i.serializer,o)}}if(r instanceof Oe){let o=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cs(i.serializer,o)}}if(r instanceof Yi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kn)return{bytesValue:IA(i.serializer,r._byteString)};if(r instanceof Se){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ww(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Bh(r)}`)}(n,e)}function Ax(n,e){let t={};return WS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xi(n,(r,i)=>{let o=to(i,e.pu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function xx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Oe||n instanceof Yi||n instanceof kn||n instanceof Se||n instanceof nr)}function vE(n,e,t){if(!xx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Bh(t);throw r==="an object"?e.Du(n+" a custom object"):e.Du(n+" "+r)}}function kw(n,e,t){if((e=Ne(e))instanceof fn)return e._internalPath;if(typeof e=="string")return wE(n,e);throw Rh("Field path arguments must be of type string or ",n,!1,void 0,t)}var qU=new RegExp("[~\\*/\\[\\]]");function wE(n,e,t){if(e.search(qU)>=0)throw Rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fn(...e.split("."))._internalPath}catch{throw Rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new k(R.INVALID_ARGUMENT,a+n+c)}function Mx(n,e){return n.some(t=>t.isEqual(e))}var Zi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Se(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Ow(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(qh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Ow=class extends Zi{data(){return super.data()}};function qh(n,e){return typeof e=="string"?wE(n,e):e instanceof fn?e._internalPath:e._delegate._internalPath}function Rx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kc=class{},Ji=class extends Kc{};function or(n,e,...t){let r=[];e instanceof Kc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof Fw).length,a=o.filter(c=>c instanceof Nh).length;if(s>1||s>0&&a>0)throw new k(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Nh=class n extends Ji{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Bx(e._query,t),new ot(e.firestore,e.converter,fv(e._query,t))}_parse(e){let t=eo(e.firestore);return function(o,s,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new k(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){PS(f,d);let y=[];for(let _ of f)y.push(NS(c,o,_));g={arrayValue:{values:y}}}else g=NS(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||PS(f,d),g=Sx(a,s,f,d==="in"||d==="not-in");return fe.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Nx(n,e,t){let r=e,i=qh("where",n);return Nh._create(i,r,t)}var Fw=class n extends Kc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:_e.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)Bx(s,c),s=fv(s,c)}(e._query,t),new ot(e.firestore,e.converter,fv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Lw=class n extends Ji{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zi(o,s)}(e._query,this._field,this._direction);return new ot(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new dn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function Px(n,e="asc"){let t=e,r=qh("orderBy",n);return Lw._create(r,t)}var Ph=class n extends Ji{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ot(e.firestore,e.converter,Jd(e._query,this._limit,this._limitType))}};function kx(n){return lx("limit",n),Ph._create("limit",n,"F")}function Ox(n){return lx("limitToLast",n),Ph._create("limitToLast",n,"L")}var kh=class n extends Ji{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Ux(e,this.type,this._docOrFields,this._inclusive);return new ot(e.firestore,e.converter,function(i,o){return new dn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function Fx(...n){return kh._create("startAt",n,!0)}function Lx(...n){return kh._create("startAfter",n,!1)}var Oh=class n extends Ji{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Ux(e,this.type,this._docOrFields,this._inclusive);return new ot(e.firestore,e.converter,function(i,o){return new dn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function Vx(...n){return Oh._create("endBefore",n,!1)}function jx(...n){return Oh._create("endAt",n,!0)}function Ux(n,e,t,r){if(t[0]=Ne(t[0]),t[0]instanceof Zi)return function(o,s,a,c,l){if(!c)throw new k(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of vs(o))if(f.field.isKeyField())d.push(qi(s,c.key));else{let g=c.data.field(f.field);if(Lh(g))throw new k(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new k(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new Nn(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=eo(n.firestore);return function(s,a,c,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new k(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let _=0;_<d.length;_++){let A=d[_];if(g[_].field.isKeyField()){if(typeof A!="string")throw new k(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!Hw(s)&&A.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let b=s.path.child(me.fromString(A));if(!$.isDocumentKey(b))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);let P=new $(b);y.push(qi(a,P))}else{let b=Sx(c,l,A);y.push(b)}}return new Nn(y,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function NS(n,e,t){if(typeof(t=Ne(t))=="string"){if(t==="")throw new k(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hw(e)&&t.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(me.fromString(t));if(!$.isDocumentKey(r))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qi(n,new $(r))}if(t instanceof Se)return qi(n,t._key);throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bh(t)}.`)}function PS(n,e){if(!Array.isArray(n)||n.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Bx(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Fs=class{convertValue(e,t="none"){switch($i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Xi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new Yi(Ve(e.latitude),Ve(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=qw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Mc(e));default:return null}}convertTimestamp(e){let t=Xn(e);return new Oe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=me.fromString(e);K(NA(r));let i=new qr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||qe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function zh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Vw=class extends Fs{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Se(this.firestore,null,t)}};var Jn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Jt=class extends Zi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new jr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(qh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},jr=class extends Jt{data(e={}){return super.data(e)}},pn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new jr(this._firestore,this._userDataWriter,r.key,r,new Jn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new jr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new jr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:zU(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function zU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function EE(n,e){return n instanceof Jt&&e instanceof Jt?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof pn&&e instanceof pn&&n._firestore===e._firestore&&gE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function $x(n){n=ye(n,Se);let e=ye(n.firestore,Me);return ax(Je(e),n._key).then(t=>TE(e,n,t))}var rr=class extends Fs{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Se(this.firestore,null,t)}};function qx(n){n=ye(n,Se);let e=ye(n.firestore,Me),t=Je(e),r=new rr(e);return LU(t,n._key).then(i=>new Jt(e,r,n._key,i,new Jn(i!==null&&i.hasLocalMutations,!0),n.converter))}function zx(n){n=ye(n,Se);let e=ye(n.firestore,Me);return ax(Je(e),n._key,{source:"server"}).then(t=>TE(e,n,t))}function Hx(n){n=ye(n,ot);let e=ye(n.firestore,Me),t=Je(e),r=new rr(e);return Rx(n._query),cx(t,n._query).then(i=>new pn(e,r,n,i))}function Gx(n){n=ye(n,ot);let e=ye(n.firestore,Me),t=Je(e),r=new rr(e);return VU(t,n._query).then(i=>new pn(e,r,n,i))}function Wx(n){n=ye(n,ot);let e=ye(n.firestore,Me),t=Je(e),r=new rr(e);return cx(t,n._query,{source:"server"}).then(i=>new pn(e,r,n,i))}function IE(n,e,t){n=ye(n,Se);let r=ye(n.firestore,Me),i=zh(n.converter,e,t);return qs(r,[$h(eo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,je.none())])}function _E(n,e,t,...r){n=ye(n,Se);let i=ye(n.firestore,Me),o=eo(i),s;return s=typeof(e=Ne(e))=="string"||e instanceof fn?yE(o,"updateDoc",n._key,e,t,r):mE(o,"updateDoc",n._key,e),qs(i,[s.toMutation(n._key,je.exists(!0))])}function Kx(n){return qs(ye(n.firestore,Me),[new Kr(n._key,je.none())])}function Qx(n,e){let t=ye(n.firestore,Me),r=tu(n),i=zh(n.converter,e);return qs(t,[$h(eo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,je.exists(!1))]).then(()=>r)}function DE(n,...e){var t,r,i;n=Ne(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Cw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Cw(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(n instanceof Se)l=ye(n.firestore,Me),d=Vs(n._key.path),c={next:f=>{e[s]&&e[s](TE(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=ye(n,ot);l=ye(f.firestore,Me),d=f._query;let g=new rr(l);c={next:y=>{e[s]&&e[s](new pn(l,g,f,y))},error:e[s+1],complete:e[s+2]},Rx(n._query)}return function(g,y,_,A){let b=new ks(A),P=new zc(y,b,_);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return eE(yield Os(g),P)})),()=>{b.$a(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return tE(yield Os(g),P)}))}}(Je(l),d,a,c)}function Yx(n,e){return jU(Je(n=ye(n,Me)),Cw(e)?e:{next:e})}function qs(n,e){return function(r,i){let o=new Ye;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return vU(yield lE(r),i,o)})),o.promise}(Je(n),e)}function TE(n,e,t){let r=t.docs.get(e._key),i=new rr(n);return new Jt(n,i,e._key,r,new Jn(t.hasPendingWrites,t.fromCache),e.converter)}var HU={maxAttempts:5};var Fh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=eo(e)}set(e,t,r){this._verifyNotCommitted();let i=Lr(e,this._firestore),o=zh(i.converter,t,r),s=$h(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,je.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Lr(e,this._firestore),s;return s=typeof(t=Ne(t))=="string"||t instanceof fn?yE(this._dataReader,"WriteBatch.update",o._key,t,r,i):mE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,je.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Lr(e,this._firestore);return this._mutations=this._mutations.concat(new Kr(t._key,je.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Lr(n,e){if((n=Ne(n)).firestore!==e)throw new k(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var jw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=eo(t)}get(t){let r=Lr(t,this._firestore),i=new Vw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new Zi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Zi(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=Lr(t,this._firestore),s=zh(o.converter,r,i),a=$h(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Lr(t,this._firestore),a;return a=typeof(r=Ne(r))=="string"||r instanceof fn?yE(this._dataReader,"Transaction.update",s._key,r,i,o):mE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Lr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Lr(e,this._firestore),r=new rr(this._firestore);return super.get(e).then(i=>new Jt(this._firestore,r,t._key,i._document,new Jn(!1,!1),t.converter))}};function Zx(n,e,t){n=ye(n,Me);let r=Object.assign(Object.assign({},HU),t);return function(o){if(o.maxAttempts<1)throw new k(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Ye;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield kU(o);new _w(o.asyncQueue,l,a,s,c).Xa()})),c.promise}(Je(n),i=>e(new jw(n,i)),r)}function Jx(){return new Wc("deleteField")}function Xx(){return new Mw("serverTimestamp")}function eM(...n){return new Rw("arrayUnion",n)}function tM(...n){return new Nw("arrayRemove",n)}function nM(n){return new Pw("increment",n)}(function(e,t=!0){(function(i){Ls=i})($I),fa(new ri("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Me(new zy(r.getProvider("auth-internal")),new Ky(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qr(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),lr(k0,"4.6.3",e),lr(k0,"4.6.3","esm2017")})();var GU="@firebase/firestore-compat",WU="0.3.32";function ME(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function rM(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function iM(){if(!KS())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Hh=class n{constructor(e){this._delegate=e}static fromBase64String(e){return iM(),new n(kn.fromBase64String(e))}static fromUint8Array(e){return rM(),new n(kn.fromUint8Array(e))}toBase64(){return iM(),this._delegate.toBase64()}toUint8Array(){return rM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function bE(n){return KU(n,["next","error","complete"])}function KU(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var CE=class{enableIndexedDbPersistence(e,t){return gx(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return mx(e._delegate)}clearIndexedDbPersistence(e){return vx(e._delegate)}},Gh=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Yt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){dx(this._delegate,e,t,r)}enableNetwork(){return Ex(this._delegate)}disableNetwork(){return Ix(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,hE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return wx(this._delegate)}onSnapshotsInSync(e){return Yx(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Gs(this,fE(this._delegate,e))}catch(t){throw Ct(t,"collection()","Firestore.collection()")}}doc(e){try{return new On(this,tu(this._delegate,e))}catch(t){throw Ct(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new oo(this,hx(this._delegate,e))}catch(t){throw Ct(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Zx(this._delegate,t=>e(new Wh(this,t)))}batch(){return Je(this._delegate),new Kh(new Fh(this._delegate,e=>qs(this._delegate,e)))}loadBundle(e){return _x(this._delegate,e)}namedQuery(e){return Dx(this._delegate,e).then(t=>t?new oo(this,t):null)}},zs=class extends Fs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hh(new kn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return On.forKey(t,this.firestore,null)}};function QU(n){kS(n)}var Wh=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new zs(e)}get(e){let t=no(e);return this._delegate.get(t).then(r=>new ro(this._firestore,new Jt(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=no(e);return r?(ME("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=no(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=no(e);return this._delegate.delete(t),this}},Kh=class{constructor(e){this._delegate=e}set(e,t,r){let i=no(e);return r?(ME("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=no(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=no(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Hs=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new jr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new io(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new zs(e),t),i.set(t,o)),o}};Hs.INSTANCES=new WeakMap;var On=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zs(e)}static forPath(e,t,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Se(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Se(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Gs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Gs(this.firestore,fE(this._delegate,e))}catch(t){throw Ct(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ne(e),e instanceof Se?pE(this._delegate,e):!1}set(e,t){t=ME("DocumentReference.set",t);try{return t?IE(this._delegate,e,t):IE(this._delegate,e)}catch(r){throw Ct(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?_E(this._delegate,e):_E(this._delegate,e,t,...r)}catch(i){throw Ct(i,"updateDoc()","DocumentReference.update()")}}delete(){return Kx(this._delegate)}onSnapshot(...e){let t=oM(e),r=sM(e,i=>new ro(this.firestore,new Jt(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return DE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=qx(this._delegate):e?.source==="server"?t=zx(this._delegate):t=$x(this._delegate),t.then(r=>new ro(this.firestore,new Jt(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Hs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ct(n,e,t){return n.message=n.message.replace(e,t),n}function oM(n){for(let e of n)if(typeof e=="object"&&!bE(e))return e;return{}}function sM(n,e){var t,r;let i;return bE(n[0])?i=n[0]:bE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ro=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new On(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return EE(this._delegate,e._delegate)}},io=class extends ro{data(e){let t=this._delegate.data(e);return this._delegate._converter||OS(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},oo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zs(e)}where(e,t,r){try{return new n(this.firestore,or(this._delegate,Nx(e,t,r)))}catch(i){throw Ct(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,or(this._delegate,Px(e,t)))}catch(r){throw Ct(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,or(this._delegate,kx(e)))}catch(t){throw Ct(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,or(this._delegate,Ox(e)))}catch(t){throw Ct(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,or(this._delegate,Fx(...e)))}catch(t){throw Ct(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,or(this._delegate,Lx(...e)))}catch(t){throw Ct(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,or(this._delegate,Vx(...e)))}catch(t){throw Ct(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,or(this._delegate,jx(...e)))}catch(t){throw Ct(t,"endAt()","Query.endAt()")}}isEqual(e){return gE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=Gx(this._delegate):e?.source==="server"?t=Wx(this._delegate):t=Hx(this._delegate),t.then(r=>new nu(this.firestore,new pn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=oM(e),r=sM(e,i=>new nu(this.firestore,new pn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return DE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Hs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},SE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new io(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},nu=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new oo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new io(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new SE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new io(this._firestore,r))})}isEqual(e){return EE(this._delegate,e._delegate)}},Gs=class n extends oo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new On(this.firestore,e):null}doc(e){try{return e===void 0?new On(this.firestore,tu(this._delegate)):new On(this.firestore,tu(this._delegate,e))}catch(t){throw Ct(t,"doc()","CollectionReference.doc()")}}add(e){return Qx(this._delegate,e).then(t=>new On(this.firestore,t))}isEqual(e){return pE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Hs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function no(n){return ye(n,Se)}var AE=class n{constructor(...e){this._delegate=new fn(...e)}static documentId(){return new n(ze.keyField().canonicalString())}isEqual(e){return e=Ne(e),e instanceof fn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var xE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=Xx();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=Jx();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=eM(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=tM(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=nM(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var YU={Firestore:Gh,GeoPoint:Yi,Timestamp:Oe,Blob:Hh,Transaction:Wh,WriteBatch:Kh,DocumentReference:On,DocumentSnapshot:ro,Query:oo,QueryDocumentSnapshot:io,QuerySnapshot:nu,CollectionReference:Gs,FieldPath:AE,FieldValue:xE,setLogLevel:QU,CACHE_SIZE_UNLIMITED:fx};function ZU(n,e){n.INTERNAL.registerComponent(new ri("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},YU)))}function JU(n){ZU(n,(e,t)=>new Gh(e,t,new CE)),n.registerVersion(GU,WU)}JU(St);function XU(n,e=mn){return new re(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function aM(n,e){return XU(n,e)}function eB(n,e){return aM(n,e).pipe(ci(void 0),va(),Y(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function PE(n,e){return aM(n,e).pipe(Y(t=>({payload:t,type:"query"})))}var Qh=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=hM(r,t);return new Zh(i,o,this.afs)}snapshotChanges(){return eB(this.ref,this.afs.schedulers.outsideAngular).pipe(Ft)}valueChanges(e={}){return this.snapshotChanges().pipe(Y(({payload:t})=>e.idField?Re(W({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return we(this.ref.get(e)).pipe(Ft)}};function Yh(n,e){return PE(n,e).pipe(ci(void 0),va(),Y(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function cM(n,e,t){return Yh(n,t).pipe(ai((r,i)=>tB(r,i.map(o=>o.payload),e),[]),zf(),Y(r=>r.map(i=>({type:i.type,payload:i}))))}function tB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=nB(n,r))}),n}function RE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function nB(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return RE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return RE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return RE(n,e.oldIndex,1);break}return n}function uM(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Zh=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Yh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Y(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ci(void 0),va(),Xe(([r,i])=>i.length>0||!r),Y(([,r])=>r),Ft)}auditTrail(e){return this.stateChanges(e).pipe(ai((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=uM(e);return cM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ft)}valueChanges(e={}){return PE(this.query,this.afs.schedulers.outsideAngular).pipe(Y(t=>t.payload.docs.map(r=>e.idField?Re(W({},r.data()),{[e.idField]:r.id}):r.data())),Ft)}get(e){return we(this.query.get(e)).pipe(Ft)}add(e){return this.ref.add(e)}doc(e){return new Qh(this.ref.doc(e),this.afs)}},NE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Yh(this.query,this.afs.schedulers.outsideAngular).pipe(Ft):Yh(this.query,this.afs.schedulers.outsideAngular).pipe(Y(t=>t.filter(r=>e.indexOf(r.type)>-1)),Xe(t=>t.length>0),Ft)}auditTrail(e){return this.stateChanges(e).pipe(ai((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=uM(e);return cM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ft)}valueChanges(e={}){return PE(this.query,this.afs.schedulers.outsideAngular).pipe(Y(r=>r.payload.docs.map(i=>e.idField?W({[e.idField]:i.id},i.data()):i.data())),Ft)}get(e){return we(this.query.get(e)).pipe(Ft)}},lM=new G("angularfire2.enableFirestorePersistence"),dM=new G("angularfire2.firestore.persistenceSettings"),rB=new G("angularfire2.firestore.settings"),iB=new G("angularfire2.firestore.use-emulator");function hM(n,e=t=>t){return{query:e(n),ref:n}}var oB=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,d,f,g,y,_,A,b,P,j){this.schedulers=c;let O=fc(t,a,r),B=d;f&&My(O,a,g,_,A,b,y,P),[this.firestore,this.persistenceEnabled$]=Sd(`${O.name}.firestore`,"AngularFirestore",O.name,()=>{let Q=a.runOutsideAngular(()=>O.firestore());if(o&&Q.settings(o),B&&Q.useEmulator(...B),i&&!Cr(s)){let H=()=>{try{return we(Q.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),ee(!1)}};return[Q,a.runOutsideAngular(H)]}else return[Q,ee(!1)]},[o,B,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=hM(i,r),a=this.schedulers.ngZone.run(()=>o);return new Zh(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new NE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Qh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(U(is),U(os,8),U(lM,8),U(rB,8),U(kt),U(Ie),U(bd),U(dM,8),U(iB,8),U(R0,8),U(Ty,8),U(by,8),U(Cy,8),U(Sy,8),U(Ay,8),U(xy,8),U(Pi,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),R5=(()=>{class n{constructor(){St.registerVersion("angularfire",rs.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:lM,useValue:!0},{provide:dM,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=an({type:n});static \u0275inj=sn({providers:[oB]})}return n})();export{re as a,Ue as b,rt as c,we as d,ee as e,Y as f,pR as g,Bf as h,JM as i,IR as j,yn as k,pr as l,Pe as m,te as n,cD as o,Z as p,sn as q,G as r,U as s,V as t,DD as u,an as v,Ci as w,vg as x,yN as y,ka as z,xG as A,MG as B,RG as C,NG as D,Ng as E,Ii as F,Dr as G,lt as H,kt as I,PG as J,kG as K,OG as L,FG as M,LG as N,ht as O,Fo as P,Lo as Q,Ql as R,Yl as S,Ie as T,Wn as U,BO as V,ZO as W,Sb as X,l1 as Y,Rb as Z,d1 as _,BG as $,$G as aa,qG as ba,jb as ca,Ub as da,rm as ea,zG as fa,Bb as ga,HG as ha,GG as ia,WG as ja,x1 as ka,M1 as la,R1 as ma,KG as na,N1 as oa,P1 as pa,QG as qa,YG as ra,F1 as sa,zb as ta,L1 as ua,V1 as va,ZG as wa,j1 as xa,JG as ya,Gb as za,XG as Aa,e3 as Ba,t3 as Ca,n3 as Da,r3 as Ea,i3 as Fa,qo as Ga,Si as Ha,zo as Ia,tC as Ja,Ho as Ka,Ot as La,C3 as Ma,S3 as Na,A3 as Oa,x3 as Pa,M3 as Qa,R3 as Ra,DF as Sa,N3 as Ta,Cr as Ua,W3 as Va,CC as Wa,v8 as Xa,GL as Ya,p0 as Za,q8 as _a,Pi as $a,bd as ab,e6 as bb,Ft as cb,is as db,os as eb,fc as fb,u6 as gb,Sd as hb,R0 as ib,oB as jb,R5 as kb};
